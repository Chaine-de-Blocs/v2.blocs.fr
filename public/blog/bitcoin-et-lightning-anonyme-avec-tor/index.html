<!doctype html><html lang=fr dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Servir Bitcoin et Lightning Network en étant anonyme avec Tor – Blocs.fr</title>
<script defer src=/js/fuse.min.94c78ad70b02749822921660cf4e9f0b3701bc0680c421afb784a78228de0275.js></script><script src=/js/enquire.min.dfb99dee1e029d51d6cfb672d847929890b1585402de17f5ed092edd72a688b4.js></script><script defer src=/js/lazysizes.min.31dd6a2d3a1ec0f78a8df007535cf23f03aeb5c70f026e6d6a19dac3b3acc340.js></script><script defer src=/js/helper/getParents.min.086022fb02d7a1517e33c2670bffb976b3e80bcacd9caeee0c6a586064f20e42.js></script><script defer src=/js/helper/fadeinout.min.9fe4b81a87e722d20c220a2b6ca145a3d8a2cb3ea1e89de55329ff417bdd9570.js></script><script>"use strict";window.onload=function(){var t,n,s,o,a,r,c,d,m,f,v,b,j,A,L,R,K,q,X,ee,l,p,g,y,_,O,x,E,F,T,z,D,N,H,I,B,$,ne,ie,e,re,V,W,Y,G,Q,w=JSON.parse('"ltr"'),ae=JSON.parse('"https://blocs.fr/"'),ce=JSON.parse('"https://blocs.fr/blog/bitcoin-et-lightning-anonyme-avec-tor/"'),te=document.getElementById("toggle-sidebar"),U=document.getElementById("toggle-menu"),M=document.querySelector(".toc__body"),k=document.querySelector(".toc__label"),u=document.getElementById("list-main"),S=document.getElementById("list-side"),C=document.getElementById("single-menu"),h=document.querySelectorAll(".slider__icon");te?te.addEventListener("change",function(e){e.target.checked?(M&&fadeIn(M,200),k&&fadeIn(k,200),u&&S&&(u.className="m",S.className="r"),h&&h.forEach(function(e){e.classList.contains("hide")?e.classList.remove("hide"):e.classList.add("hide")})):(M&&fadeOut(M,200),k&&fadeOut(k,200),u&&S&&(u.className="mr",S.className="hide"),h&&h.forEach(function(e){e.classList.contains("hide")?e.classList.remove("hide"):e.classList.add("hide")}))}):null,U?U.addEventListener("change",function(e){e.target.checked?(u&&C&&(u.className="m",C.className="l"),h&&h.forEach(function(e){e.classList.contains("hide")?e.classList.remove("hide"):e.classList.add("hide")})):(u&&C&&(u.className="lm",C.className="hide"),h&&h.forEach(function(e){e.classList.contains("hide")?e.classList.remove("hide"):e.classList.add("hide")}))}):null,R=document.getElementById("navCollapseBtn"),R?R.addEventListener("click",function(){var n,t=document.querySelector(".navbar__collapse");t&&(n=t.getAttribute("data-open"),n==="true"?(t.setAttribute("data-open","false"),t.style.maxHeight=0):(t.setAttribute("data-open","true"),t.style.maxHeight=t.scrollHeight+"px"))}):null,L=document.querySelectorAll(".expand__button");for(let e=0;e<L.length;e++)L[e].addEventListener("click",function(){var e=this.nextElementSibling;e.style.maxHeight?(e.style.maxHeight=null,this.querySelector("svg").classList.add("expand-icon__right"),this.querySelector("svg").classList.remove("expand-icon__down")):(e.style.maxHeight=e.scrollHeight+"px",this.querySelector("svg").classList.remove("expand-icon__right"),this.querySelector("svg").classList.add("expand-icon__down"))});document.querySelectorAll(".tab")?document.querySelectorAll(".tab").forEach(function(e){var o=e.getAttribute("id"),i=e,n=e.querySelectorAll(".tab__link"),s=e.querySelectorAll(".tab__content"),a=[];n&&n.length>0?n.forEach(function(e,t,n){e.onclick=function(){for(var o=0;o<n.length;o++)t===parseInt(o,10)?n[o].classList.contains("active")||(n[o].classList.add("active"),s[o].style.display="block"):(n[o].classList.remove("active"),s[o].style.display="none")}}):null}):null,document.querySelectorAll(".codetab")?document.querySelectorAll(".codetab").forEach(function(e){var o=e.getAttribute("id"),i=e,n=e.querySelectorAll(".codetab__link"),s=e.querySelectorAll(".codetab__content"),a=[];n&&n.length>0?n.forEach(function(e,t,n){e.onclick=function(){for(var o=0;o<n.length;o++)t===parseInt(o,10)?n[o].classList.contains("active")||(n[o].classList.add("active"),s[o].style.display="block"):(n[o].classList.remove("active"),s[o].style.display="none")}}):null}):null,q=JSON.parse("true"),A=document.getElementById("root"),v=document.getElementById("toggleToLight"),b=document.getElementById("toggleToDark"),q||(A.className="theme__light",localStorage.setItem("theme","light")),b&&(b.onclick=function(){A.className="theme__dark",localStorage.setItem("theme","dark"),v.className="navbar__icons--icon",b.className="hide"}),v&&(v.onclick=function(){A.className="theme__light",localStorage.setItem("theme","light"),v.className="hide",b.className="navbar__icons--icon"}),document.querySelectorAll(".menu__list").forEach(function(e){e.classList.contains("active")&&(e.style.maxHeight=e.scrollHeight+"px")}),document.querySelectorAll(".menu__title--collapse").forEach(function(e){e.addEventListener("click",function(){var s,n=this.nextElementSibling,o=this.querySelector(".menu__title--icon");if(!n)return null;for(s=e.parentNode;s.classList.contains("menu__list")&&s.classList.contains("active");)s.style.maxHeight=100*s.children.length+"px",s=s.parentNode;n.style.maxHeight?(n.style.maxHeight=null,n.classList.remove("active"),o.classList.add("right"),w==="rtl"?o.classList.remove("downrtl"):o.classList.remove("down")):(n.style.maxHeight=n.scrollHeight+"px",n.classList.add("active"),o.classList.remove("right"),w==="rtl"?o.classList.add("downrtl"):o.classList.add("down"))})}),K=document.getElementById("mobileLogo"),d=document.getElementById("myModal"),j=document.getElementById("myDrawer"),X=document.querySelector(".drawer__close"),ee=function(){d.style.opacity=1,w==="rtl"?(d.style.right=0,j.style.right=0):(d.style.left=0,j.style.left=0)},B=function(){d.style.opacity=0,w==="rtl"?j.style.right="-100%":j.style.left="-100%",setTimeout(function(){w==="rtl"?d.style.right="-100%":d.style.left="-100%"},250)},K.onclick=function(){ee(),localStorage.setItem("isDrawerOpen","true")},d.onclick=function(){B(),localStorage.setItem("isDrawerOpen","false")},X.onclick=function(){B(),localStorage.setItem("isDrawerOpen","false")},E=window.pageYOffset||document.documentElement.scrollTop,l=document.querySelector(".toc"),z=l?l.querySelector("#TableOfContents"):null,O=document.querySelector(".single__contents"),$=document.querySelectorAll("div[data-bgimg]"),p=JSON.parse('["h2","h3","h4"]'),p?p=p.toString():p="h1, h2, h3, h4, h5, h6",x=JSON.parse("null"),G=JSON.parse("false");function P(e){G&&x&&Object.keys(x).length&&(x.height<=e?$.forEach(function(e){e.setAttribute("data-bgimg","false")}):$.forEach(function(e){e.setAttribute("data-bgimg","true")}))}P(E),window.onscroll=function(){var e=window.pageYOffset||document.documentElement.scrollTop;e>E?(O?O.querySelectorAll(p.toString()).forEach(function(e){if(document.documentElement.scrollTop>=e.offsetTop&&z){var t=e.getAttribute("id");l.querySelectorAll("a").forEach(function(e){e.classList.remove("active")}),l.querySelector('a[href="#'+t+'"]')?l.querySelector('a[href="#'+t+'"]').classList.add("active"):null}}):null,P(e)):(O?O.querySelectorAll(p.toString()).forEach(function(e){if(document.documentElement.scrollTop>=e.offsetTop&&z){var t=e.getAttribute("id");l.querySelectorAll("a").forEach(function(e){e.classList.remove("active")}),l.querySelector('a[href="#'+t+'"]')?l.querySelector('a[href="#'+t+'"]').classList.add("active"):null}}):null,P(e)),E=e<=0?0:e},c=document.querySelector("#search-mobile"),F=document.querySelector(".mobile-search"),D=document.querySelector("#mobileSearchBtn"),N=document.querySelector("#search-mobile-close"),f=document.querySelector("#search-mobile-container"),r=document.querySelector("#search-mobile-results"),m=document.querySelector("html"),F&&(F.style.display="none"),D?D.addEventListener("click",function(){f&&(f.style.display="block"),c&&c.focus(),m&&(m.style.overflowY="hidden")}):null,N?N.addEventListener("click",function(){if(f&&(f.style.display="none"),c&&(c.value=""),r)for(;r.firstChild;)r.removeChild(r.firstChild);m&&(m.style.overflowY="visible")}):null,c?c.addEventListener("keydown",function(e){if(e.key==="Escape"){if(f&&(f.style.display="none"),c&&(c.value=""),r)for(;r.firstChild;)r.removeChild(r.firstChild);m&&(m.style.overflowY="visible")}}):null,H=localStorage.getItem("theme"),I=document.getElementById("root"),W=document.querySelectorAll(".select-theme"),y=document.querySelectorAll(".select-theme__item"),H&&(y?y.forEach(function(e){e.text.trim()===H?e.classList.add("is-active"):e.classList.remove("is-active")}):null),y?y.forEach(function(e){e.addEventListener("click",function(e){var n,t=e.target.text.trim();localStorage.setItem("theme",t),I.removeAttribute("class"),I.classList.add(`theme__${t}`),W.forEach(function(e){e.querySelectorAll("a").forEach(function(e){e.classList&&(e.text.trim()===t?e.classList.contains("is-active")||e.classList.add("is-active"):e.classList.contains("is-active")&&e.classList.remove("is-active"))})}),window.mermaid&&(t==="dark"||t==="hacker"?(mermaid.initialize({theme:"dark"}),location.reload()):(mermaid.initialize({theme:"default"}),location.reload())),n=document.querySelector("iframe"),n&&n.contentWindow.postMessage({type:"set-theme",theme:t==="dark"||t==="hacker"?"photon-dark":t==="kimbie"?"github-dark-orange":"github-light"},"https://utteranc.es")})}):null,Q=JSON.parse('""'),t=null,n=null,s=null,_=JSON.parse("true"),Y=JSON.parse("true"),g=null,Y&&function(){var t=new XMLHttpRequest;t.open("GET",ae+Q+"/index.json"),t.setRequestHeader("Content-Type","application/json; charset=utf-8"),t.onload=function(){t.status===200?g=new Fuse(JSON.parse(t.response.toString("utf-8")),{keys:["title","description","content"],includeMatches:_,shouldSort:!0,threshold:.4,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1}):console.error(`[${t.status}]Error:`,t.statusText)},t.send()}();function de(e,t){var n,s,o=document.createElement("li");o.className="search-result__item",n=document.createElement("a"),n.innerHTML=t.title,n.setAttribute("class","search-result__item--title"),n.setAttribute("href",t.permalink),s=document.createElement("div"),s.setAttribute("class","search-result__item--desc"),t.description?s.innerHTML=t.description:t.content&&(s.innerHTML=t.content.substring(0,80)),o.appendChild(n),o.appendChild(s),e.appendChild(o)}function le(e,t){var n,s,o,a=document.createElement("li");if(a.className="search-result__item",n=null,o=document.createElement("a"),o.innerHTML=t.item.title,o.setAttribute("class","search-result__item--title"),o.setAttribute("href",t.item.uri),t.matches&&t.matches.length){for(s=0;s<t.matches.length;s++)"title"===t.matches[s].key&&(o=document.createElement("a"),o.innerHTML=i(t.matches[s].value,t.matches[s].indices),o.setAttribute("class","search-result__item--title"),o.setAttribute("href",t.item.uri)),"description"===t.matches[s].key?(n=document.createElement("div"),n.setAttribute("class","search-result__item--desc"),n.innerHTML=i(t.item.description,t.matches[s].indices)):"content"===t.matches[s].key?n||(n=document.createElement("div"),n.setAttribute("class","search-result__item--desc"),n.innerHTML=i(t.item.content.substring(0,80),t.matches[s].indices)):t.item.description?(n=document.createElement("div"),n.setAttribute("class","search-result__item--desc"),n.innerHTML=t.item.description):(n=document.createElement("div"),n.setAttribute("class","search-result__item--desc"),n.innerHTML=t.item.content.substring(0,80));a.appendChild(o),n&&a.appendChild(n),a&&e.appendChild(a)}}function Z(e,s){t=document.getElementById("search-results"),n=document.getElementById("search-menu"),t.setAttribute("class","dd is-active");var i,o=document.createElement("ul");for(o.setAttribute("class","dd-content search-content"),s.length?s.forEach(function(e){var t,s,i=document.createElement("li"),n=document.createElement("a");n.setAttribute("href",e.uri),n.setAttribute("class","dd-item"),n.appendChild(i),s=document.createElement("div"),s.innerHTML=e.title,s.setAttribute("class","search-result__item--title"),t=document.createElement("div"),t.setAttribute("class","search-result__item--desc"),e.description?t.innerHTML=e.description:e.content&&(t.innerHTML=e.content.substring(0,80)),i.appendChild(s),i.appendChild(t),o.appendChild(n)}):(i=document.createElement("li"),i.setAttribute("class","dd-item"),i.innerText="No results found",o.appendChild(i));n.hasChildNodes();)n.removeChild(n.lastChild);n.appendChild(o)}function J(e,s){t=document.getElementById("search-results"),n=document.getElementById("search-menu"),t.setAttribute("class","dd is-active");var a,o=document.createElement("ul");for(o.setAttribute("class","dd-content search-content"),s.length?s.forEach(function(e){var n,s,r=document.createElement("li"),a=document.createElement("a"),t=null;if(a.setAttribute("href",e.item.uri),a.setAttribute("class","dd-item"),a.appendChild(r),s=document.createElement("div"),s.innerHTML=e.item.title,s.setAttribute("class","search-result__item--title"),e.matches&&e.matches.length){for(n=0;n<e.matches.length;n++)"title"===e.matches[n].key&&(s.innerHTML=i(e.matches[n].value,e.matches[n].indices)),"description"===e.matches[n].key?(t=document.createElement("div"),t.setAttribute("class","search-result__item--desc"),t.innerHTML=i(e.item.description,e.matches[n].indices)):"content"===e.matches[n].key?t||(t=document.createElement("div"),t.setAttribute("class","search-result__item--desc"),t.innerHTML=i(e.item.content.substring(0,80),e.matches[n].indices)):e.item.description?(t=document.createElement("div"),t.setAttribute("class","search-result__item--desc"),t.innerHTML=e.item.description):(t=document.createElement("div"),t.setAttribute("class","search-result__item--desc"),t.innerHTML=e.item.content.substring(0,80));r.appendChild(s),t&&r.appendChild(t),o.appendChild(a)}}):(a=document.createElement("li"),a.setAttribute("class","dd-item"),a.innerText="No results found",o.appendChild(a));n.hasChildNodes();)n.removeChild(n.lastChild);n.appendChild(o)}function oe(e,n){t=document.getElementById("search-mobile-results");var i,s=document.createElement("div");s.setAttribute("class","mobile-search__content"),n.length>0?n.forEach(function(e){var t=document.createElement("a");t.setAttribute("href",e.uri),t.innerHTML='<div class="mobile-search__item"><div class="mobile-search__item--title">📄 '+e.title+'</div><div class="mobile-search__item--desc">'+(e.description?e.description:e.content)+"</div></div>",s.appendChild(t)}):(i=document.createElement("span"),s.appendChild(i));let o=document.getElementById("search-mobile-results");for(;o.firstChild;)o.removeChild(o.firstChild);t.appendChild(s)}function se(e,n){t=document.getElementById("search-mobile-results");var a,s=document.createElement("div");s.setAttribute("class","mobile-search__content"),n.length?n.forEach(function(e){var n,o,a=document.createElement("li"),r=document.createElement("a"),t=null;if(r.setAttribute("href",e.item.uri),r.appendChild(a),a.setAttribute("class","mobile-search__item"),o=document.createElement("div"),o.innerHTML=e.item.title,o.setAttribute("class","mobile-search__item--title"),e.matches&&e.matches.length){for(n=0;n<e.matches.length;n++)"title"===e.matches[n].key&&(o.innerHTML=i(e.matches[n].value,e.matches[n].indices)),"description"===e.matches[n].key?(t=document.createElement("div"),t.setAttribute("class","mobile-search__item--desc"),t.innerHTML=i(e.item.description,e.matches[n].indices)):"content"===e.matches[n].key?t||(t=document.createElement("div"),t.setAttribute("class","mobile-search__item--desc"),t.innerHTML=i(e.item.content.substring(0,150),e.matches[n].indices)):e.item.description?(t=document.createElement("div"),t.setAttribute("class","mobile-search__item--desc"),t.innerHTML=e.item.description):(t=document.createElement("div"),t.setAttribute("class","mobile-search__item--desc"),t.innerHTML=e.item.content.substring(0,150));a.appendChild(o),t&&a.appendChild(t),s.appendChild(r)}}):(a=document.createElement("span"),s.appendChild(a));let o=document.getElementById("search-mobile-results");for(;o.firstChild;)o.removeChild(o.firstChild);t.appendChild(s)}function i(e,t){if(!t)return e;var n="",s=0;return t.forEach(function(t){if(t[0]===t[1])return null;n+=""+e.substring(s,t[0])+'<span class="search__highlight">'+e.substring(t[0],t[1]+1)+"</span>",s=t[1]+1}),n+=e.substring(s),n}a=document.getElementById("search"),T=document.getElementById("search-mobile"),o=document.getElementById("search-results"),a?a.addEventListener("input",function(e){if(!e.target.value|window.innerWidth<770)return o?o.setAttribute("class","dd"):null,null;s=e.target.value;var t,n=g.search(e.target.value);_?J(s,n):Z(s,n),t=o.querySelectorAll(".dd-item"),t?t.forEach(function(e){e.addEventListener("mousedown",function(e){e.target.click()})}):null}):null,a?a.addEventListener("blur",function(){if(window.innerWidth<770)return null;o?o.setAttribute("class","dd"):null}):null,a?a.addEventListener("click",function(e){if(window.innerWidth<770)return null;if(!e.target.value)return o?o.setAttribute("class","dd"):null,null;s=e.target.value;var t,n=g.search(e.target.value);_?J(s,n):Z(s,n),t=o.querySelectorAll(".dd-item"),t?t.forEach(function(e){e.addEventListener("mousedown",function(e){e.target.click()})}):null}):null,ne=document.getElementById("search-menu"),ie=document.querySelector("#search-menu .dd-item.is-active"),e=null,re=null,V=350,a?a.addEventListener("keydown",function(n){if(window.innerWidth<770)return null;var o,s=document.querySelectorAll("#search-menu .dd-item");if(n.key==="ArrowDown"){e===null?(e=0,s[e].classList.remove("is-active")):(s[e].classList.remove("is-active"),e=e===s.length-1?0:e+1),s[e].classList.add("is-active");let t=s[e].offsetTop+s[e].clientHeight-V;t>0?document.querySelector(".search-content").scrollTop+=s[e].getBoundingClientRect().height:e===0&&(document.querySelector(".search-content").scrollTop=0)}else if(n.key==="ArrowUp"){e===null?(e=s.length-1,s[e].classList.remove("is-active")):(s[e].classList.remove("is-active"),e=e===0?s.length-1:e-1),s[e].classList.add("is-active");let t=s[e].offsetTop+s[e].clientHeight-V;t<0?document.querySelector(".search-content").scrollTop-=s[e].getBoundingClientRect().height:document.querySelector(".search-content").scrollTop=t+s[e].getBoundingClientRect().height}else n.key==="Enter"?(o=s[e].getAttribute("href"),o&&(location.href=o)):n.key==="Escape"&&(n.target.value=null,t&&t.classList.remove("is-active"))}):null,T?T.addEventListener("input",function(e){if(!e.target.value){let e=document.getElementById("search-mobile-results");for(;e.firstChild;)e.removeChild(e.firstChild);return null}s=e.target.value;var t,n=g.search(e.target.value);_?se(s,n):oe(s,n),t=o.querySelectorAll(".dd-item"),t?t.forEach(function(e){e.addEventListener("mousedown",function(e){e.target.click()})}):null}):null}</script><link rel=stylesheet href=/css/main.min.css><meta name=description content="Vous avez un nœud Bitcoin et Lightning Network, vous participez à la décentralisation du réseau, bravo ! Cependant il réside un point noir, en particulier si votre noeud est localisé chez vous ou votre bureau... En connaissant votre adresse IP, publiée par le noeud, il est possible de vous localiser. On remédie à cela avec Tor."><meta name=keywords content><meta name=created content="2020-01-01T00:00:00+0000"><meta name=modified content="2020-01-01T00:00:00+0000"><meta name=author content="Jonathan Serra"><meta property="og:site_name" content="Blocs.fr"><meta property="og:title" content="Servir Bitcoin et Lightning Network en étant anonyme avec Tor"><meta property="og:url" content="https://blocs.fr/blog/bitcoin-et-lightning-anonyme-avec-tor/"><meta property="og:type" content="article"><meta property="og:description" content="Vous avez un nœud Bitcoin et Lightning Network, vous participez à la décentralisation du réseau, bravo ! Cependant il réside un point noir, en particulier si votre noeud est localisé chez vous ou votre bureau... En connaissant votre adresse IP, publiée par le noeud, il est possible de vous localiser. On remédie à cela avec Tor."><meta property="og:image" content="https://blocs.fr/images/thumbnails/tor_bitcoind_lnd.png"><meta name=generator content="Hugo 0.147.2"><meta name=msapplication-TileColor content="#ffffff"><meta name=theme-color content="#ffffff"><link rel=canonical href=https://blocs.fr/blog/bitcoin-et-lightning-anonyme-avec-tor/><link rel=manifest href=/manifest.json><link rel=apple-touch-icon sizes=57x57 href=/favicon/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/favicon/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/favicon/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/favicon/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/favicon/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/favicon/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/favicon/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/favicon/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/favicon/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/favicon/android-icon-192x192.png><link rel=icon type=image/png sizes=192x192 href=/favicon/android-icon-512x512.png><link rel=icon type=image/png sizes=32x32 href=/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/favicon/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/favicon/favicon-16x16.png><meta name=msapplication-TileColor content="#ffffff"><meta name=msapplication-TileImage content="/ms-icon-144x144.png"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Servir Bitcoin et Lightning Network en étant anonyme avec Tor","datePublished":"2020-01-01T00:00:00Z","dateModified":"2020-01-01T00:00:00Z","url":"https://blocs.fr/blog/bitcoin-et-lightning-anonyme-avec-tor/","description":"Vous avez un nœud Bitcoin et Lightning Network, vous participez à la décentralisation du réseau, bravo ! Cependant il réside un point noir, en particulier si votre noeud est localisé chez vous ou votre bureau... En connaissant votre adresse IP, publiée par le noeud, il est possible de vous localiser. On remédie à cela avec Tor.","keywords":["bitcoin","debian","bitcoin-cli","tor"],"image":"https://blocs.fr/images/thumbnails/tor_bitcoind_lnd.png","author":{"@type":"Person","name":"Jonathan Serra"},"mainEntityOfPage":{"@type":"Person","@id":"https://blocs.fr/","name":"Jonathan Serra","image":"https://blocs.fr/images/jonathan_blocs_serra.png"},"publisher":{"@type":"Person","name":"Jonathan Serra","jobTitle":"CTO","alumniOf":"UTT","gender":"male","nationality":"French","url":"https://blocs.fr/"},"sameAs":["https://github.com/Chaine-de-Blocs","https://www.twitch.tv/codequietw","https://www.youtube.com/c/Cha%C3%AEnedeBlocs","https://twitter.com/_blocs"]}</script></head><body id=root class=theme__dark><script>var rootElem=document.getElementById("root"),themeOptions=JSON.parse('["dark","light"]'),localTheme=localStorage.getItem("theme");localTheme&&themeOptions&&themeOptions.length>0&&(themeOptions.includes(localTheme)?rootElem.className=`theme__${localTheme}`:rootElem.className=`theme__${themeOptions[0]}`)</script><div id=container><div id=myDrawer class=drawer><div class=drawer__header><a href=/ class=drawer__header--text>Blocs.fr</a><div class=grow></div><div class=drawer__close><svg width="22" height="22" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path fill="currentcolor" d="M18.3 5.71c-.39-.39-1.02-.39-1.41.0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41.0s-.39 1.02.0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02.0 1.41s1.02.39 1.41.0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41.0s.39-1.02.0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02.0-1.4z"/></svg></div></div><div class=drawer__body><div class=menu><h6 class=menu__label>Servir Bitcoin et Lightning Network en étant anonyme avec Tor</h6><ul><li><a href=https://blocs.fr/blog/comment-le-vibe-coding-fait-gagner-du-temps-et-de-largent/ class=menu__title>Le Vibe Coding : Comment j'ai compressé 2 mois de développement en 50 heures pour serjaq.fr grâce à l'IA</a></li><li><a href=https://blocs.fr/blog/bitcoin-script/ class=menu__title>Bitcoin SCRIPT en vidéo</a></li><li><a href=https://blocs.fr/blog/mastering-the-lightning-network-1/ class=menu__title>1 - Mastering the Lightning Network - Comprendre Bitcoin et le Lightning Network</a></li><li><a href=https://blocs.fr/blog/mastering-the-lightning-network-10/ class=menu__title>10 - Mastering the Lightning Network - Les messages sur Lightning Network (TLV, e2e encryption)</a></li><li><a href=https://blocs.fr/blog/mastering-the-lightning-network-11/ class=menu__title>11 - Mastering the Lightning Network - Informations Paiement et vie privée en vidéo</a></li><li><a href=https://blocs.fr/blog/mastering-the-lightning-network-12/ class=menu__title>12 - Mastering the Lightning Network - Chapitre final en vidéo</a></li><li><a href=https://blocs.fr/blog/mastering-the-lightning-network-2/ class=menu__title>2 - Mastering the Lightning Network - Paiement avec Bitcoin et Lightning Network</a></li><li><a href=https://blocs.fr/blog/mastering-the-lightning-network-3/ class=menu__title>3 - Mastering the Lightning Network - Transaction d'engagement (commitment tx)</a></li><li><a href=https://blocs.fr/blog/mastering-the-lightning-network-4/ class=menu__title>4 - Mastering the Lightning Network - Créer un réseau de nœud Lightning Network</a></li><li><a href=https://blocs.fr/blog/mastering-the-lightning-network-5/ class=menu__title>5 - Mastering the Lightning Network - Installer un serveur Bitcoin et LN</a></li><li><a href=https://blocs.fr/blog/mastering-the-lightning-network-6/ class=menu__title>6 - Mastering the Lightning Network - Comprendre la commitment transaction</a></li><li><a href=https://blocs.fr/blog/mastering-the-lightning-network-7/ class=menu__title>7 - Mastering the Lightning Network - Routage, secret de paiement et HTLC sur LN</a></li><li><a href=https://blocs.fr/blog/mastering-the-lightning-network-9/ class=menu__title>9 - Mastering the Lightning Network - Onion routing, Gossip protocol et Path Finding</a></li><li><a href=https://blocs.fr/blog/le-developpement-blockchain-par-ou-commencer/ class=menu__title>Le développement Blockchain, par où commencer ?</a></li><li class=active><a href=https://blocs.fr/blog/bitcoin-et-lightning-anonyme-avec-tor/ class="menu__title active">Servir Bitcoin et Lightning Network en étant anonyme avec Tor</a></li><li><a href=https://blocs.fr/blog/installer-un-noeud-lightning-network/ class=menu__title>Installer un nœud Lightning Network</a></li><li><a href=https://blocs.fr/blog/configurer-un-noeud-lightning-network/ class=menu__title>Configurer son nœud Bitcoin Lightning Network</a></li></ul></div><script>var menuTitle=document.querySelectorAll(".menu__title"),modal=document.getElementById("myModal"),drawer=document.getElementById("myDrawer"),closeDrawer=function(){setTimeout(function(){modal.style.opacity=0,drawer.style.left="-100%",modal.style.left="-100%"},250)};menuTitle?menuTitle.forEach(function(e){e.onclick=function(){closeDrawer(),localStorage.setItem("isDrawerOpen","false")}}):null</script></div></div><div id=myModal class=modal></div><script>var isDrawerOpen=localStorage.getItem("isDrawerOpen"),modal=document.getElementById("myModal"),drawer=document.getElementById("myDrawer"),languagedir=JSON.parse('"ltr"'),openDrawer=function(){modal.style.opacity=1,languagedir==="rtl"?(modal.style.right=0,drawer.style.right=0):(modal.style.left=0,drawer.style.left=0)};isDrawerOpen&&isDrawerOpen==="true"&&openDrawer()</script><nav class=nav><div class=navbar__wrapper data-bgimg=false><div class=divider><div class="navbar lmr"><div id=siteLogo class=navbar__logo--wrapper>&nbsp;&nbsp;
<a href=/ title rel=home class=navbar__logo--text-link><h6 class=navbar__logo--text>blocs</br>.fr</h6></a></div><div class=navbar__menu--wrapper><div id=tabletLogo class=hide><a href=/ rel=home class=navbar__logo--link><div class=navbar__icons--icon><svg width="25" height="25" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path fill="currentcolor" d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55.0 1-.45 1-1v-7h1.7c.46.0.68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34.0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55.0 1-.45 1-1z"/></svg></div></a></div><div id=mobileLogo class=hide><a href=# class=navbar__logo--link><div class=navbar__icons--icon><svg width="25" height="25" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path fill="currentcolor" d="M4 18h16c.55.0 1-.45 1-1s-.45-1-1-1H4c-.55.0-1 .45-1 1s.45 1 1 1zm0-5h16c.55.0 1-.45 1-1s-.45-1-1-1H4c-.55.0-1 .45-1 1s.45 1 1 1zM3 7c0 .55.45 1 1 1h16c.55.0 1-.45 1-1s-.45-1-1-1H4c-.55.0-1 .45-1 1z"/></svg></div></a></div><span id=navMenuMobile class=hide><button id=navCollapseBtn class=navbar__dropdown--title aria-label="Section Menu" data-dir=ltr>
blog<svg width="20" height="20" viewBox="0 0 24 24"><path fill="currentcolor" d="M8.12 9.29 12 13.17l3.88-3.88c.39-.39 1.02-.39 1.41.0s.39 1.02.0 1.41l-4.59 4.59c-.39.39-1.02.39-1.41.0L6.7 10.7c-.39-.39-.39-1.02.0-1.41.39-.38 1.03-.39 1.42.0z"/></svg></button><div class=navbar__collapse data-open=false><ul><li class="navbar__menu--mobile-item active"><a href=/blog class=active>Blog</a></li></ul></div></span><ul id=navMenu class=navbar__menu><li class="navbar__menu--item active"><a href=/blog data-bgimg=false>Blog</a></li></ul></div><div class=grow></div><div id=siteSearch><div class=search data-bgimg=false><span class=icon><svg width="22" height="22" fill="currentcolor" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49.0s.41-1.08.0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
</span><input id=search aria-label="Site Search" class=input type=text autocomplete=off placeholder=Search><div id=search-results class=dropdown><div id=search-menu class=dropdown-menu></div></div></div></div><div id=mobileSearch class=hide><div id=mobileSearchBtn class=mobile-search__btn><svg width="22" height="22" fill="currentcolor" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49.0s.41-1.08.0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg></div><div id=search-mobile-container class="mobile-search hide"><div class=mobile-search__top><input id=search-mobile type=text aria-label="Mobile Search" placeholder=Search... class=mobile-search__top--input><div id=search-mobile-close class=mobile-search__top--icon><svg width="22" height="22" viewBox="0 0 24 24"><path opacity=".87" fill="none" d="M0 0h24v24H0V0z"/><path fill="currentcolor" d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41.0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"/></svg></div></div><div id=search-mobile-results class=mobile-search__body></div></div></div><div class=navbar__icons><button id=toggleToDark class=navbar__icons--icon aria-label="Toggle to dark mode">
<svg width="20" height="20" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path fill="currentcolor" d="M20 15.31 23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69zM12 18c-3.31.0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z"/></svg>
</button>
<button id=toggleToLight class=navbar__icons--icon aria-label="Toggle to light mode">
<svg width="20" height="20" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path fill="currentcolor" d="M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69zM12 18c-3.31.0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6zm0-10c-2.21.0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4z"/></svg>
</button>
<script>var theme=localStorage.getItem("theme"),toggleToLightBtn=document.getElementById("toggleToLight"),toggleToDarkBtn=document.getElementById("toggleToDark");theme&&theme==="dark"?(toggleToLightBtn.className="navbar__icons--icon",toggleToDarkBtn.className="hide"):(toggleToLightBtn.className="hide",toggleToDarkBtn.className="navbar__icons--icon")</script><div class=navbar__icons--icon><a href=https://github.com/Chaine-de-Blocs title="Github de blocs.fr" aria-label="Github de blocs.fr" target=_blank rel=noreferrer><svg fill="currentcolor" viewBox="0 0 24 24" width="22" height="22"><path d="M10.9 2.1c-4.6.5-8.3 4.2-8.8 8.7-.5 4.7 2.2 8.9 6.3 10.5C8.7 21.4 9 21.2 9 20.8v-1.6s-.4.1-.9.1c-1.4.0-2-1.2-2.1-1.9-.1-.4-.3-.7-.6-1C5.1 16.3 5 16.3 5 16.2 5 16 5.3 16 5.4 16c.6.0 1.1.7 1.3 1 .5.8 1.1 1 1.4 1 .4.0.7-.1.9-.2.1-.7.4-1.4 1-1.8-2.3-.5-4-1.8-4-4 0-1.1.5-2.2 1.2-3C7.1 8.8 7 8.3 7 7.6c0-.4.0-.9.2-1.3.0-.2.2-.3.3-.3h.1C8.1 6.1 9.1 6.4 10 7.3c.6-.2 1.3-.3 2-.3s1.4.1 2 .3c.9-.9 2-1.2 2.5-1.3h.1c.2.0.3.1.4.3.0.4.0.9.0 1.3.0.8-.1 1.2-.2 1.4.7.8 1.2 1.8 1.2 3 0 2.2-1.7 3.5-4 4 .6.5 1 1.4 1 2.3v2.6c0 .3.3.6.7.5 3.7-1.5 6.3-5.1 6.3-9.3.0-6-5.1-10.7-11.1-10z"/></svg></a></div></div></div></div></div></nav><script>var siteLogo=document.getElementById("siteLogo"),tabletLogo=document.getElementById("tabletLogo"),mobileLogo=document.getElementById("mobileLogo"),navMenu=document.getElementById("navMenu"),navMenuMobile=document.getElementById("navMenuMobile"),siteSearch=document.getElementById("siteSearch"),mobileSearch=document.getElementById("mobileSearch");enquire.register("screen and (max-width:1280px)",{match:function(){siteLogo.className="navbar__logo--wrapper",tabletLogo.className="hide",mobileLogo.className="hide",navMenu.className="navbar__menu",navMenuMobile.className="hide",siteSearch.className="",mobileSearch.className="hide"},unmatch:function(){siteLogo.className="navbar__logo--wrapper",tabletLogo.className="hide",mobileLogo.className="hide",navMenu.className="navbar__menu",navMenuMobile.className="hide",siteSearch.className="",mobileSearch.className="hide"}}).register("screen and (max-width:960px)",{match:function(){siteLogo.className="hide",tabletLogo.className="",mobileLogo.className="hide",navMenu.className="navbar__menu",navMenuMobile.className="hide",siteSearch.className="hide",mobileSearch.className="navbar__icons--icon"},unmatch:function(){siteLogo.className="navbar__logo--wrapper",tabletLogo.className="hide",mobileLogo.className="hide",navMenu.className="navbar__menu",navMenuMobile.className="hide",siteSearch.className="",mobileSearch.className="hide"}}).register("screen and (max-width:600px)",{match:function(){siteLogo.className="hide",tabletLogo.className="hide",mobileLogo.className="",navMenu.className="hide",navMenuMobile.className="",siteSearch.className="hide",mobileSearch.className="navbar__icons--icon"},unmatch:function(){siteLogo.className="hide",tabletLogo.className="",mobileLogo.className="hide",navMenu.className="navbar__menu",navMenuMobile.className="hide",siteSearch.className="hide",mobileSearch.className="navbar__icons--icon"}})</script><div class=mid><div class=divider><nav id=single-menu class=l data-dir=ltr></nav><article id=list-main class=m data-dir=ltr><nav class=breadcrumb aria-label=breadcrumbs data-is-blog=true><ol><li><a href=https://blocs.fr/ class=capitalize>Blocs.fr</a></li><li><a href=https://blocs.fr/blog/ class=capitalize>Blog</a></li><li class=is-active><span>Servir Bitcoin et Lightning Network en étant anonyme avec Tor</span></li></ol></nav><div class=single data-display=block><div class=single__title>Servir Bitcoin et Lightning Network en étant anonyme avec Tor</div><div class=single__meta><svg viewBox="0 0 24 24" width="16" height="16" fill="currentcolor"><path d="M4 4H20V8H4z" opacity=".3"/><path d="M6 1H8V5H6zM16 1h2V5H16z"/><path d="M19 3H5C3.9 3 3 3.9 3 5v14c0 1.1.9 2 2 2h14c1.1.0 2-.9 2-2V5C21 3.9 20.1 3 19 3zm0 16H5V9h14V19zM19 7H5V5h14V7z"/></svg><time title="Ecrit le">1 Jan 2020 </time>&nbsp;&nbsp; <svg fill="#000" viewBox="0 0 24 24" width="16" height="16"><path fill="currentcolor" d="M9 1V3h6V1H9zm9.958984 1.7929688-1.292968 1.5253906 2.949218 2.5 1.292969-1.5253906-2.949219-2.5zM12 4C7.0225467 4 3 8.0225467 3 13c0 4.977453 4.0225467 9 9 9 4.977453.0 9-4.022547 9-9 0-4.9774533-4.022547-9-9-9zm0 2c3.910547.0 7 3.0894533 7 7 0 3.910547-3.089453 7-7 7-3.9105467.0-7-3.089453-7-7 0-3.9105467 3.0894533-7 7-7zM11 8v6h2V8H11z"/></svg> <span title="Temps de lecture">8 min. de lecture</span> &nbsp;&nbsp; <svg fill="#000" viewBox="0 0 32 32" width="16" height="16"><path fill="currentcolor" d="M16 5c-3.855469.0-7 3.144531-7 7 0 2.410156 1.230469 4.550781 3.09375 5.8125C8.527344 19.34375 6 22.882813 6 27H8c0-4.429687 3.570313-8 8-8 4.429688.0 8 3.570313 8 8h2c0-4.117187-2.527344-7.65625-6.09375-9.1875C21.769531 16.550781 23 14.410156 23 12c0-3.855469-3.144531-7-7-7zm0 2c2.773438.0 5 2.226563 5 5 0 2.773438-2.226562 5-5 5-2.773437.0-5-2.226562-5-5 0-2.773437 2.226563-5 5-5z"/></svg> <span title="ECRIT PAR">Jonathan Serra</span></div><article class=single__contents data-dir=ltr><p>Vous avez un nœud Bitcoin et Lightning Network, vous participez à la décentralisation du réseau, bravo ! Cependant il réside un point noir, en particulier si votre noeud est localisé chez vous ou votre bureau&mldr; En connaissant votre adresse IP, publiée par le nœud, il est possible de vous localiser. C&rsquo;est sensible dans le cas où vous y mettez pour l&rsquo;équivalent de milliers d&rsquo;euros en bitcoins, une personne mal intentionnée pourrait vous pirater voire vous cambrioler. Heureusement, grâce à Tor vous allez pouvoir cacher tout cela en un temps record</p><p><em>Ce guide est basé sur une installation avec <code>bitcoind</code> et <code>lnd</code> sur un Debian 9 Stretch Lite, sur n&rsquo;importe quelle version Debian 9 ce guide sera fonctionnel.</em></p><h2 id=quest-ce-que-tor--pourquoi-tor->Qu&rsquo;est ce que Tor ? Pourquoi Tor ?</h2><p>Vous connaissez peut-être Tor indirectement en citant le « Deep Web », mais c&rsquo;est bien plus que cela. Tor est un logiciel libre qui permet de brouiller les communications Internet (TCP) en construisant un circuit de routage IP. En d&rsquo;autres termes un émetteur communique avec un récepteur en passant par un chemin incompréhensible, la communication devient intraçable d&rsquo;un point de vue extérieur.</p><p>Autant vous dire que Tor est la solution propice à anonymiser les communications de votre nœud Bitcoin.</p><blockquote><p>Tor tord le chemin.</p></blockquote><h2 id=installer-et-activer-tor>Installer et activer Tor</h2><p>On va travailler avec le terminale de commandes, si vous avez la version Lite, vous n&rsquo;avez que cela sous la main en principe.</p><p>Installer Tor se fait avec la commande <code>apt update && apt install tor</code>, on met à jour <code>apt</code> pour être sûr de télécharger la dernière version des dépendances.</p><p>Une fois installé activez le service en tapant <code>systemctl enable tor</code> et <code>systemctl start tor</code>.</p><h2 id=configurer-tor>Configurer Tor</h2><p>On a installé Tor, nous allons le configurer en prévision des usages avec <code>lnd</code> et <code>bitcoind</code>.</p><p>La configuration de Tor se trouve dans le chemin <code>/etc/tor/torrc</code> où <code>torrc</code> est un fichier de configuration. Connectez-vous en <code>root</code> pour le modifier avec <code>su root</code>, puis tapez <code>vim /etc/tor/torrc</code> ou <code>nano /etc/tor/torrc</code> si vous préférez <code>nano</code> pour éditer un fichier. Je vous montre les configurations à décommenter (en retirant le # au début de chaque ligne concernée).</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>ControlPort <span class=m>9051</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>CookieAuthentication <span class=m>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>HiddenServiceDir /var/lib/tor/bitcoin/ <span class=c1># Emplacement du dossier de votre routage</span>
</span></span><span class=line><span class=cl>HiddenServicePort <span class=m>8333</span> 127.0.0.1:8333 <span class=c1># Routage bitcoin (8333 est le port mainnet de Bitcoin)</span>
</span></span><span class=line><span class=cl>HiddenServicePort <span class=m>8332</span> <span class=o>[</span>::1<span class=o>]</span>:8332 <span class=c1># Routage bitcoin ipv6</span></span></span></code></pre></td></tr></table></div></div><p>Modifications faites, tapez <code>systemctl restart tor</code> pour redémarrer Tor afin qu&rsquo;il prenne en compte vos modifications.</p><p>Et enfin pour voir si Tor est fonctionnel, observez le avec la commande <code>systemctl status tor@default</code>, vous devriez avec quelque chose comme suit :</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>root@raspberry:~ $ systemctl status tor
</span></span><span class=line><span class=cl>● tor@default.service - Anonymizing overlay network <span class=k>for</span> TCP
</span></span><span class=line><span class=cl>Loaded: loaded <span class=o>(</span>/lib/systemd/system/tor@default.service<span class=p>;</span> static<span class=p>;</span> vendor preset: enabled<span class=o>)</span>
</span></span><span class=line><span class=cl>Active: active <span class=o>(</span>running<span class=o>)</span> since Wed 2020-01-01 10:09:09 UTC<span class=p>;</span> 7h ago
</span></span><span class=line><span class=cl>Process: <span class=m>1805</span> <span class=nv>ExecReload</span><span class=o>=</span>/bin/kill -HUP <span class=si>${</span><span class=nv>MAINPID</span><span class=si>}</span> <span class=o>(</span><span class=nv>code</span><span class=o>=</span>exited, <span class=nv>status</span><span class=o>=</span>0/SUCCESS<span class=o>)</span>
</span></span><span class=line><span class=cl>Process: <span class=m>2259</span> <span class=nv>ExecStartPre</span><span class=o>=</span>/usr/bin/tor --defaults-torrc /usr/share/tor/tor-service-defaults-torrc -f /etc/tor/torrc --RunAsDaemon <span class=m>0</span> --verify-config <span class=o>(</span><span class=nv>code</span><span class=o>=</span>exited, <span class=nv>status</span><span class=o>=</span>0/SUCCESS
</span></span><span class=line><span class=cl>Process: <span class=m>2257</span> <span class=nv>ExecStartPre</span><span class=o>=</span>/usr/bin/install -Z -m <span class=m>02755</span> -o debian-tor -g debian-tor -d /var/run/tor <span class=o>(</span><span class=nv>code</span><span class=o>=</span>exited, <span class=nv>status</span><span class=o>=</span>0/SUCCESS<span class=o>)</span>
</span></span><span class=line><span class=cl>Main PID: <span class=m>2262</span> <span class=o>(</span>tor<span class=o>)</span>
</span></span><span class=line><span class=cl>CGroup: /system.slice/system-tor.slice/tor@default.service
</span></span><span class=line><span class=cl>    └─2262 /usr/bin/tor --defaults-torrc /usr/share/tor/tor-service-defaults-torrc -f /etc/tor/torrc --RunAsDaemon <span class=m>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Jan <span class=m>01</span> 10:09:05 raspberrypi tor<span class=o>[</span>2259<span class=o>]</span>: Jan <span class=m>01</span> 10:09:05.113 <span class=o>[</span>notice<span class=o>]</span> Read configuration file /usr/share/tor/tor-service-defaults-torrc.
</span></span><span class=line><span class=cl>Jan <span class=m>01</span> 10:09:05 raspberrypi tor<span class=o>[</span>2259<span class=o>]</span>: Jan <span class=m>01</span> 10:09:05.113 <span class=o>[</span>notice<span class=o>]</span> Read configuration file /etc/tor/torrc.
</span></span><span class=line><span class=cl>Jan <span class=m>01</span> 10:09:05 raspberrypi tor<span class=o>[</span>2259<span class=o>]</span>: Configuration was valid
</span></span><span class=line><span class=cl>Jan <span class=m>01</span> 10:09:05 raspberrypi tor<span class=o>[</span>2262<span class=o>]</span>: Jan <span class=m>01</span> 10:09:05.979 <span class=o>[</span>notice<span class=o>]</span> Tor 0.2.9.16 <span class=o>(</span>git-9ef571339967c1e5<span class=o>)</span> running on Linux with Libevent 2.0.21-stable, OpenSSL 1.1.0j and Zlib 1.2.8.
</span></span><span class=line><span class=cl>Jan <span class=m>01</span> 10:09:05 raspberrypi tor<span class=o>[</span>2262<span class=o>]</span>: Jan <span class=m>01</span> 10:09:05.979 <span class=o>[</span>notice<span class=o>]</span> Tor can<span class=err>&#39;</span>t <span class=nb>help</span> you <span class=k>if</span> you use it wrong! Learn how to be safe at https://www.torproject.org/download/download#warn
</span></span><span class=line><span class=cl>Jan <span class=m>01</span> 10:09:05 raspberrypi tor<span class=o>[</span>2262<span class=o>]</span>: Jan <span class=m>01</span> 10:09:05.979 <span class=o>[</span>notice<span class=o>]</span> Read configuration file /usr/share/tor/tor-service-defaults-torrc.
</span></span><span class=line><span class=cl>Jan <span class=m>01</span> 10:09:05 raspberrypi tor<span class=o>[</span>2262<span class=o>]</span>: Jan <span class=m>01</span> 10:09:05.979 <span class=o>[</span>notice<span class=o>]</span> Read configuration file /etc/tor/torrc.
</span></span><span class=line><span class=cl>Jan <span class=m>01</span> 10:09:05 raspberrypi tor<span class=o>[</span>2262<span class=o>]</span>: Jan <span class=m>01</span> 10:09:05.995 <span class=o>[</span>notice<span class=o>]</span> Opening Socks listener on 127.0.0.1:9050
</span></span><span class=line><span class=cl>Jan <span class=m>01</span> 10:09:05 raspberrypi tor<span class=o>[</span>2262<span class=o>]</span>: Jan <span class=m>01</span> 10:09:05.995 <span class=o>[</span>notice<span class=o>]</span> Opening Control listener on 127.0.0.1:9051
</span></span><span class=line><span class=cl>Jan <span class=m>01</span> 10:09:09 raspberrypi systemd<span class=o>[</span>1<span class=o>]</span>: Started Anonymizing overlay network <span class=k>for</span> TCP.</span></span></code></pre></td></tr></table></div></div><p>Si votre service Tor n&rsquo;est pas actif, vous trouverez des informations en tapant <code>journalctl -u tor@default</code>.</p><h2 id=connecter-votre-bitcoin-à-tor>Connecter votre Bitcoin à Tor</h2><p>Cette configuration fonctionne avec <code>bitcoind</code> en version <code>0.19.0.1</code>, dans mon nœud j&rsquo;utilise l&rsquo;utilisateur <code>bitcoin</code> pour gérer ce service, je vous déconseille d&rsquo;utiliser <code>root</code>.</p><p>Avant de commencer vous allez devoir chercher votre nom de domaine Tor en tapant ce qui suit :</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>bitcoin@raspberry:~ $ cat /var/lib/tor/bitcoin/hostname
</span></span><span class=line><span class=cl>blocsiq5epwbye47.onion</span></span></code></pre></td></tr></table></div></div><p><code>blocsiq5epwbye47.onion</code> est mon nom de domaine (hostname).</p><blockquote><p>Si vous voulez savoir comment avoir un domaine qui commence par un mot ou pseudo comme ici &ldquo;blocs&rdquo;, laissez un commentaire plus bas.</p></blockquote><p>Pour configurer Bitcoin vous allez modifier <code>.bitcoin/bitcoin.conf</code> avec les informations suivantes :</p><pre tabindex=0><code># Vos configurations
# ...
# Ajoutez ou modifiez ce qui suit

proxy=127.0.0.1:9050 # Proxy sur le service Tor
externalip=blocsiq5epwbye47.onion # à remplacer par votre hostname, c&#39;est l&#39;adresse affichée aux autres nœuds du réseau
</code></pre><p>Redémarrez Bitcoin en tapant <code>bitcoin-cli stop && bitcoind</code>.</p><p>Félicitations votre nœud est désormais sur le réseau Tor. Il ne vous reste plus qu&rsquo;à faire de même sur LND afin d&rsquo;anonymiser nos échanges sur le réseau Lightning Network.</p><h2 id=connecter-votre-lightning-à-tor>Connecter votre Lightning à Tor</h2><p>La configuration de <code>lnd</code> est un peu différente de Bitcoin. Sans plus attendre ouvrez <code>.lnd/lnd.conf</code> et ajoutez ces différentes configurations :</p><pre tabindex=0><code># Vos configurations
# ...
# Ajoutez ou modifiez ce qui suit

listen=localhost # Important pour éviter d&#39;ouvrir votre IP
externalip=blocsiq5epwbye47.onion # Votre hostname Tor
nat=false # A désactiver pour éviter d&#39;associer votre adresse IP à votre nœud

[tor]
tor.active=1
tor.socks=9050
tor.privatekeypath=/var/lib/tor/bitcoin/private_key
</code></pre><p>Redémarrez votre <code>lnd</code> en tapant <code>lncli stop</code> et <code>lnd</code> pour lancer le service.</p><p>Il se peut que vous ayez une erreur de droit relative à Tor. Dans la partie suivante on voit comment la solutionner.</p><h3 id=gérer-les-droits-avec-tor>Gérer les droits avec Tor</h3><p>Vous devez donner accès à différents fichiers de Tor à l&rsquo;utilisateur qui gère votre <code>lnd</code>, dans mon cas mon utilisateur est <code>bitcoin</code>.</p><p>Tapez la commande <code>chmod -R 0750 /var/lib/tor</code>. Cela va donner accès en lecture au groupe <code>debian-tor</code> sur le dossier <code>/var/lib/tor</code>.</p><p>Maintenant ajoutez l&rsquo;utilisateur <code>bitcoin</code> au groupe <code>debian-tor</code> en tapant <code>usermod -a -G debian-tor bitcoin</code> en étant connecté sur <code>su root</code>.</p><blockquote><p>Tor est bien conçu, il ne nous permet pas d&rsquo;appliquer les droits qu&rsquo;on veut à ses dossiers pour limiter de trop les ouvrir. Tapez <code>journalctl -u tor@default</code>, si les dernières lignes parlent d&rsquo;une erreur, cela signifie que votre Tor n&rsquo;est plus en route. C&rsquo;est un général dû à une mauvaise configuration (mauvais droits sur les dossiers relatifs à Tor, mauvaises configuration dans <code>torrc</code>, etc.)</p></blockquote><hr><p>A partir d&rsquo;ici votre nœud est connecté au réseau en passant par Tor ! Il est toujours intéressant d&rsquo;observer si tout est bien cadré par Tor afin de ne pas avoir de fuite d&rsquo;IP. Tapez la commande du terminal ci-dessous :</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>root@raspberry:~ $ netstat -tulpn
</span></span><span class=line><span class=cl><span class=o>(</span>Not all processes could be identified, non-owned process info
</span></span><span class=line><span class=cl>will not be shown, you would have to be root to see it all.<span class=o>)</span>
</span></span><span class=line><span class=cl>Active Internet connections <span class=o>(</span>only servers<span class=o>)</span>
</span></span><span class=line><span class=cl>Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
</span></span><span class=line><span class=cl>tcp        <span class=m>0</span>      <span class=m>0</span> 127.0.0.1:9735          0.0.0.0:*               LISTEN      2043/lnd
</span></span><span class=line><span class=cl>tcp        <span class=m>0</span>      <span class=m>0</span> 127.0.0.1:28332         0.0.0.0:*               LISTEN      653/bitcoind
</span></span><span class=line><span class=cl>tcp        <span class=m>0</span>      <span class=m>0</span> 127.0.0.1:8332          0.0.0.0:*               LISTEN      653/bitcoind
</span></span><span class=line><span class=cl>tcp        <span class=m>0</span>      <span class=m>0</span> 127.0.0.1:8333          0.0.0.0:*               LISTEN      653/bitcoind
</span></span><span class=line><span class=cl>tcp        <span class=m>0</span>      <span class=m>0</span> 127.0.0.1:28333         0.0.0.0:*               LISTEN      653/bitcoind
</span></span><span class=line><span class=cl>tcp        <span class=m>0</span>      <span class=m>0</span> 127.0.0.1:8080          0.0.0.0:*               LISTEN      2043/lnd
</span></span><span class=line><span class=cl>tcp        <span class=m>0</span>      <span class=m>0</span> 0.0.0.0:22              0.0.0.0:*               LISTEN      -
</span></span><span class=line><span class=cl>tcp        <span class=m>0</span>      <span class=m>0</span> 127.0.0.1:10009         0.0.0.0:*               LISTEN      2043/lnd
</span></span><span class=line><span class=cl>tcp        <span class=m>0</span>      <span class=m>0</span> 127.0.0.1:9050          0.0.0.0:*               LISTEN      -
</span></span><span class=line><span class=cl>tcp        <span class=m>0</span>      <span class=m>0</span> 127.0.0.1:9051          0.0.0.0:*               LISTEN      -
</span></span><span class=line><span class=cl>tcp6       <span class=m>0</span>      <span class=m>0</span> ::1:8332                :::*                    LISTEN      653/bitcoind
</span></span><span class=line><span class=cl>tcp6       <span class=m>0</span>      <span class=m>0</span> :::80                   :::*                    LISTEN      -
</span></span><span class=line><span class=cl>tcp6       <span class=m>0</span>      <span class=m>0</span> :::22                   :::*                    LISTEN      -
</span></span><span class=line><span class=cl>udp        <span class=m>0</span>      <span class=m>0</span> 0.0.0.0:48138           0.0.0.0:*                           -
</span></span><span class=line><span class=cl>udp        <span class=m>0</span>      <span class=m>0</span> 0.0.0.0:68              0.0.0.0:*                           -
</span></span><span class=line><span class=cl>udp        <span class=m>0</span>      <span class=m>0</span> 0.0.0.0:5353            0.0.0.0:*                           -
</span></span><span class=line><span class=cl>udp6       <span class=m>0</span>      <span class=m>0</span> :::45175                :::*                                -
</span></span><span class=line><span class=cl>udp6       <span class=m>0</span>      <span class=m>0</span> :::5353                 :::*                                -</span></span></code></pre></td></tr></table></div></div><p>Nous, ce qui nous intéresse ce sont <code>bitcoind</code> et <code>lnd</code>. On va passer tous les ports d&rsquo;écoute en revue et comprendre si oui ou non ils sont &ldquo;torrifiés&rdquo; :</p><ul><li><code>lnd 9735</code> : C&rsquo;est le port de LND, &ldquo;torrifiée&rdquo; avec le clé privée de votre Tor ;</li><li><code>bitcoind 28332</code> : C&rsquo;est le port <a href=https://zeromq.org/ target=_blank>ZMQ</a> de Bitcoin, il sert à la configuration et n&rsquo;est pas distribué ;</li><li><code>bitcoind 8333</code> : C&rsquo;est le port de <code>bitcoind</code> qui est caché via Tor (HiddenServicePort dans <code>/etc/tor/torrc</code>) ;</li><li><code>bitcoind 8332</code> : C&rsquo;est le port JSON-RPC de <code>bitcoind</code>, nul besoin de le cacher avec Tor si vous ne le distribuez pas ;</li><li><code>bitcoind 8332 IPV6</code> : C&rsquo;est le port ipv6 de <code>bitcoind</code> qui est caché via Tor (HiddenServicePort dans <code>/etc/tor/torrc</code>) ;</li></ul><p>Enfin pour voir si <code>lnd</code> a bien considéré vos modifications, tapez <code>lncli getinfo</code>, vous obtenez un JSON comme suit :</p><pre tabindex=0><code>{
	&#34;version&#34;: &#34;0.8.0-beta commit=v0.8.1-beta&#34;,
	&#34;identity_pubkey&#34;: &#34;03a2c34daf010b3501daf704b5a321e82e1631421b7ffa18dd49014967eda82dc9&#34;,
	&#34;alias&#34;: &#34;blocs.fr&#34;,
	&#34;color&#34;: &#34;#00aaff&#34;,
	&#34;num_pending_channels&#34;: 0,
	&#34;num_active_channels&#34;: 6,
	&#34;num_inactive_channels&#34;: 0,
	&#34;num_peers&#34;: 6,
	&#34;block_height&#34;: 610817,
	&#34;block_hash&#34;: &#34;0000000000000000000ff1cf20075afd0df2a52288edd20a7d1cd8a51ca3e32a&#34;,
	&#34;best_header_timestamp&#34;: 1577900732,
	&#34;synced_to_chain&#34;: true,
	&#34;synced_to_graph&#34;: true,
	&#34;testnet&#34;: false,
	&#34;chains&#34;: [
		{
			&#34;chain&#34;: &#34;bitcoin&#34;,
			&#34;network&#34;: &#34;mainnet&#34;
		}
	],
	&#34;uris&#34;: [
		&#34;03a2c34daf010b3501daf704b5a321e82e1631421b7ffa18dd49014967eda82dc9@blocsiq5epwbye47.onion:9735&#34;
	]
}
</code></pre><p>Intéressez vous à la partie d&rsquo;en bas, <code>"uris"</code>, qui est une liste des adresses distribuées dans le réseau. Ici je n&rsquo;ai qu&rsquo;une adresse qui est un .onion, voir ce qui suit le &ldquo;@&rdquo;. La partie de gauche est la clé publique de mon lnd.</p><blockquote><p>.onion est un nom de domaine exclusif au routage en oignon comme le fait Tor. Comme vous pouvez l&rsquo;imaginer, c&rsquo;est réellement une référence à la plante. Cela vient du routage qui recouvre le message de plusieurs couches, comme un oignon où le coeur est enrobé de plusieurs couches. <a href="https://www.youtube.com/watch?v=zjqw1VnuKLs" target=_blank>MrBidouille</a>.</p></blockquote><p>Vérifications faites, vous êtes cachés, bravo !</p><p>Merci à <a href=https://twitter.com/clint_network target=_blank>Clint</a> pour ses infos sur Tor et <a href=https://twitter.com/JohnOnChain target=_blank>JohnOnChain</a> pour m&rsquo;avoir aidé à la configuration de lnd avec Tor.</p></article></div><div class=grow></div><nav class=pagination-single><a href=https://blocs.fr/blog/le-developpement-blockchain-par-ou-commencer/ title="Le développement Blockchain, par où commencer ?" class=pagination-single__left><div class=pagination-single__icon><svg width="22" height="22" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path fill="currentcolor" d="M19 11H7.83l4.88-4.88c.39-.39.39-1.03.0-1.42s-1.02-.39-1.41.0l-6.59 6.59c-.39.39-.39 1.02.0 1.41l6.59 6.59c.39.39 1.02.39 1.41.0s.39-1.02.0-1.41L7.83 13H19c.55.0 1-.45 1-1s-.45-1-1-1z"/></svg></div><div class=pagination-single__right-title>Le développement Blockchain, par où commencer ?</div></a><div class=grow></div><a href=https://blocs.fr/blog/installer-un-noeud-lightning-network/ title="Installer un nœud Lightning Network" class=pagination-single__right><div class=pagination-single__left-title>Installer un nœud Lightning Network</div><div class=pagination-single__icon><svg width="22" height="22" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path fill="currentcolor" d="M5 13h11.17l-4.88 4.88c-.39.39-.39 1.03.0 1.42.39.39 1.02.39 1.41.0l6.59-6.59c.39-.39.39-1.02.0-1.41l-6.58-6.6c-.39-.39-1.02-.39-1.41.0s-.39 1.02.0 1.41L16.17 11H5c-.55.0-1 .45-1 1s.45 1 1 1z"/></svg></div></a></nav></article><section id=list-side class=r data-dir=ltr><div class=toc><h6 class=toc__label>Sommaire de l'article</h6><div class=toc__body><nav id=TableOfContents><ul><li><a href=#quest-ce-que-tor--pourquoi-tor->Qu&rsquo;est ce que Tor ? Pourquoi Tor ?</a></li><li><a href=#installer-et-activer-tor>Installer et activer Tor</a></li><li><a href=#configurer-tor>Configurer Tor</a></li><li><a href=#connecter-votre-bitcoin-à-tor>Connecter votre Bitcoin à Tor</a></li><li><a href=#connecter-votre-lightning-à-tor>Connecter votre Lightning à Tor</a><ul><li><a href=#gérer-les-droits-avec-tor>Gérer les droits avec Tor</a></li></ul></li></ul></nav></div></div></section></div></div><script>"use strict";function wrap(e,t){e.parentNode.insertBefore(t,e),t.appendChild(e)}(function(){var e=document.querySelector(".single__contents");e?e.querySelectorAll("pre > code").forEach(function(e){var t=e.getAttribute("data-lang"),s=document.createElement("div"),o=null,n=null;t&&t.includes(":")&&(o=t.split(":")[0],n=t.split(":")[1],s.className="language-"+o,s.setAttribute("data-lang",n),e.className="language-"+o,e.setAttribute("data-lang",n),e.setAttribute("id",n)),(!t||n)&&wrap(e.parentNode,s)}):null})();var dollarCodeElem=document.querySelectorAll("div.language-\\$"),gtCodeElem=document.querySelectorAll("div.language-\\>");dollarCodeElem?dollarCodeElem.forEach(function(e){var t=e.parentNode.parentNode?e.parentNode.parentNode.querySelectorAll(".lnt"):null;t?t.forEach(function(e){e.innerHTML="$<br/>"}):null}):null,gtCodeElem?gtCodeElem.forEach(function(e){var t=e.parentNode.parentNode?e.parentNode.parentNode.querySelectorAll(".lnt"):null;t?t.forEach(function(e){e.innerHTML="><br/>"}):null}):null</script><script defer src=/js/helper/getParents.min.js></script><script defer src=/js/helper/closest.min.js></script><script defer src=/js/helper/prev.min.js></script><script defer src=/js/helper/prop.min.js></script><script defer src=/js/helper/fadeinout.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){"use strict";var e,t,n,s,o,i,a,r,c,l,d,u,h,f,p,m=document.querySelectorAll(".single__contents > table");for(let e=0;e<m.length;e++)a=m[e],i=document.createElement("div"),i.className="table-wrapper",a.parentElement.replaceChild(i,a),i.appendChild(a);e=JSON.parse("null"),e&&e.includes("mermaid")&&(u=localStorage.getItem("theme")||"light",u==="dark"?mermaid.initialize({theme:"dark"}):mermaid.initialize({theme:"default"}),d=[],[].push.apply(d,document.getElementsByClassName("language-mermaid")),d.forEach(function(e){var n,t=e.parentNode;t!==document.body&&(t.parentNode.insertBefore(e,t),t.parentNode.removeChild(t)),n=document.createElement("div"),n.classList.add("mermaid"),n.innerHTML=e.innerHTML,e.replaceWith(n)})),e&&e.includes("katex")&&(p=document.getElementsByClassName("math"),o={delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1}]},renderMathInElement(document.querySelector(".single__contents"),o)),e&&e.includes("flowchartjs")&&(o=JSON.parse('{"arrow-end":"block","element-color":"black","fill":"white","flowstate":{"approved":{"fill":"#58C4A3","font-size":12,"no-text":"n/a","yes-text":"APPROVED"},"current":{"fill":"yellow","font-color":"red","font-weight":"bold"},"future":{"fill":"#FFFF99"},"invalid":{"fill":"#444444"},"past":{"fill":"#CCCCCC","font-size":12},"rejected":{"fill":"#C45879","font-size":12,"no-text":"REJECTED","yes-text":"n/a"},"request":{"fill":"blue"}},"font-color":"black","font-size":14,"line-color":"black","line-length":50,"line-width":3,"no-text":"no","scale":1,"symbols":{"end":{"class":"end-element"},"start":{"element-color":"green","fill":"yellow","font-color":"red"}},"text-margin":10,"x":0,"y":0,"yes-text":"yes"}'),n=null,h="language-flowchart",t=0,Array.prototype.forEach.call(document.querySelectorAll("[class^="+h+"]"),function(e){e.style.display="none",e.parentNode.style.backgroundColor="transparent",n=e.innerText;var i,s=document.createElement("div");s.id="flowchart"+t,e.parentNode.insertBefore(s,e),i=flowchart.parse(n),i.drawSVG("flowchart"+t,o),t+=1})),e&&e.includes("chart")&&(r="#666",s="#ddd",c=2,Chart.defaults.global.elements.rectangle.borderWidth=c,Chart.defaults.global.elements.rectangle.borderColor=r,Chart.defaults.global.elements.rectangle.backgroundColor=s,Chart.defaults.global.elements.line.borderWidth=c,Chart.defaults.global.elements.line.borderColor=r,Chart.defaults.global.elements.line.backgroundColor=s,Chart.defaults.global.elements.point.borderWidth=c,Chart.defaults.global.elements.point.borderColor=r,Chart.defaults.global.elements.point.backgroundColor=s,f="language-chart",t=0,n=null,Array.prototype.forEach.call(document.querySelectorAll("[class^="+f+"]"),function(e){e.style.display="none",e.parentNode.style.backgroundColor="transparent",n=e.innerText;var i,a,s=document.createElement("canvas"),o=null;s.height=200,s.style.height=200,s.id="myChart"+t,o=JSON.parse(n),e.parentNode.insertBefore(s,e),i=document.getElementById("myChart"+t).getContext("2d"),a=new Chart(i,o),t+=1})),e&&e.includes("viz")&&(l="language-viz-",Array.prototype.forEach.call(document.querySelectorAll("[class^="+l+"]"),function(e){e.style.display="none",e.parentNode.style.backgroundColor="transparent",e.getAttribute("class").split(" ").forEach(function(e){e.startsWith(l)&&(t=e.substr(l.length))});var t,n=new Viz;n.renderSVGElement(e.innerText,{engine:t}).then(function(t){t.style.width="100%",e.parentNode.insertBefore(t,e)})}))})</script><script>var singleMenu=document.getElementById("single-menu"),listMain=document.getElementById("list-main"),listSide=document.getElementById("list-side"),wideViewAsDefault=JSON.parse("null");enquire.register("screen and (max-width:1280px)",{match:function(){wideViewAsDefault?(singleMenu.className="hide",listMain.className="lm",listSide.className="r"):(singleMenu.className="l",listMain.className="m",listSide.className="r")},unmatch:function(){wideViewAsDefault?(singleMenu.className="hide",listMain.className="lm",listSide.className="r"):(singleMenu.className="l",listMain.className="m",listSide.className="r")}}).register("screen and (max-width:960px)",{match:function(){listSide.className="r",listMain.className="lm",singleMenu.className="hide"},unmatch:function(){wideViewAsDefault?(singleMenu.className="hide",listMain.className="lm",listSide.className="r"):(singleMenu.className="l",listMain.className="m",listSide.className="r")}}).register("screen and (max-width:600px)",{match:function(){listSide.className="hide",listMain.className="lmr",singleMenu.className="hide"},unmatch:function(){listSide.className="r",listMain.className="lm",singleMenu.className="hide"}})</script><div class=bot><footer class=footer><div class=divider><div class=lmr><p class=caption>©2025 blocs.fr</p></div></div></footer></div></div></body></html>