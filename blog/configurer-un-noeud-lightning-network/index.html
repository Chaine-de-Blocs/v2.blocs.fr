<!doctype html><html lang=fr dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Configurer son nœud Bitcoin Lightning Network – Blocs.fr</title><script defer src=/js/fuse.min.94c78ad70b02749822921660cf4e9f0b3701bc0680c421afb784a78228de0275.js></script>
<script src=/js/enquire.min.dfb99dee1e029d51d6cfb672d847929890b1585402de17f5ed092edd72a688b4.js></script>
<script defer src=/js/lazysizes.min.31dd6a2d3a1ec0f78a8df007535cf23f03aeb5c70f026e6d6a19dac3b3acc340.js></script>
<script defer src=/js/helper/getParents.min.b75dda22e2d1c0e1e0574c7764bb95bec70c0fb0d4d5440339ba68c685d5a661.js></script>
<script defer src=/js/helper/fadeinout.min.20c87be9abf70b1b46e1d9dcc89636d413b297fea3f6c6a384d71e0eaa821f23.js></script>
<script>"use strict";window.onload=function(){var e,t,n,s,o,i,r,c,l,h,m,f,p,g,v,b,j,y,w,O,x,k,S,F,T,D,N,L,R,P,H,I,B,V,$,U,K,q,Y,G,X,Q,_=JSON.parse('"ltr"'),ee,ea,er,ei,eo=JSON.parse('"https://blocs.fr"'),ed=JSON.parse('"https://blocs.fr/blog/configurer-un-noeud-lightning-network/"'),et=document.getElementById("toggle-sidebar"),W=document.getElementById("toggle-menu"),E=document.querySelector('.toc__body'),M=document.querySelector('.toc__label'),u=document.getElementById('list-main'),A=document.getElementById('list-side'),C=document.getElementById('single-menu'),d=document.querySelectorAll('.slider__icon');et?et.addEventListener('change',function(e){e.target.checked?(E&&fadeIn(E,200),M&&fadeIn(M,200),u&&A&&(u.className='m',A.className='r'),d&&d.forEach(function(e){e.classList.contains('hide')?e.classList.remove('hide'):e.classList.add('hide')})):(E&&fadeOut(E,200),M&&fadeOut(M,200),u&&A&&(u.className='mr',A.className='hide'),d&&d.forEach(function(e){e.classList.contains('hide')?e.classList.remove('hide'):e.classList.add('hide')}))}):null,W?W.addEventListener('change',function(e){e.target.checked?(u&&C&&(u.className='m',C.className='l'),d&&d.forEach(function(e){e.classList.contains('hide')?e.classList.remove('hide'):e.classList.add('hide')})):(u&&C&&(u.className='lm',C.className='hide'),d&&d.forEach(function(e){e.classList.contains('hide')?e.classList.remove('hide'):e.classList.add('hide')}))}):null,V=document.getElementById('navCollapseBtn'),V?V.addEventListener('click',function(){var t,e=document.querySelector('.navbar__collapse');e&&(t=e.getAttribute('data-open'),t==='true'?(e.setAttribute('data-open','false'),e.style.maxHeight=0):(e.setAttribute('data-open','true'),e.style.maxHeight=e.scrollHeight+"px"))}):null,T=document.querySelectorAll('.expand__button');for(let e=0;e<T.length;e++)T[e].addEventListener("click",function(){var e=this.nextElementSibling;e.style.maxHeight?(e.style.maxHeight=null,this.querySelector('svg').classList.add('expand-icon__right'),this.querySelector('svg').classList.remove('expand-icon__down')):(e.style.maxHeight=e.scrollHeight+"px",this.querySelector('svg').classList.remove('expand-icon__right'),this.querySelector('svg').classList.add('expand-icon__down'))});document.querySelectorAll('.tab')?document.querySelectorAll('.tab').forEach(function(e){var o=e.getAttribute('id'),i=e,t=e.querySelectorAll('.tab__link'),n=e.querySelectorAll('.tab__content'),a=[];t&&t.length>0?t.forEach(function(t,s,e){t.onclick=function(){for(var t=0;t<e.length;t++)s===parseInt(t,10)?e[t].classList.contains('active')||(e[t].classList.add('active'),n[t].style.display='block'):(e[t].classList.remove('active'),n[t].style.display='none')}}):null}):null,document.querySelectorAll('.codetab')?document.querySelectorAll('.codetab').forEach(function(e){var o=e.getAttribute('id'),i=e,t=e.querySelectorAll('.codetab__link'),n=e.querySelectorAll('.codetab__content'),a=[];t&&t.length>0?t.forEach(function(t,s,e){t.onclick=function(){for(var t=0;t<e.length;t++)s===parseInt(t,10)?e[t].classList.contains('active')||(e[t].classList.add('active'),n[t].style.display='block'):(e[t].classList.remove('active'),n[t].style.display='none')}}):null}):null,U=JSON.parse("true"),k=document.getElementById('root'),v=document.getElementById('toggleToLight'),O=document.getElementById('toggleToDark'),U||(k.className='theme__light',localStorage.setItem('theme','light')),O&&(O.onclick=function(){k.className='theme__dark',localStorage.setItem('theme','dark'),v.className='navbar__icons--icon',O.className='hide'}),v&&(v.onclick=function(){k.className='theme__light',localStorage.setItem('theme','light'),v.className='hide',O.className='navbar__icons--icon'}),document.querySelectorAll('.menu__list').forEach(function(e){e.classList.contains('active')&&(e.style.maxHeight=e.scrollHeight+"px")}),document.querySelectorAll('.menu__title--collapse').forEach(function(e){e.addEventListener('click',function(){var n,t=this.nextElementSibling,s=this.querySelector('.menu__title--icon');if(!t)return null;for(n=e.parentNode;n.classList.contains('menu__list')&&n.classList.contains('active');)n.style.maxHeight=100*n.children.length+"px",n=n.parentNode;t.style.maxHeight?(t.style.maxHeight=null,t.classList.remove('active'),s.classList.add('right'),_==='rtl'?s.classList.remove('downrtl'):s.classList.remove('down')):(t.style.maxHeight=t.scrollHeight+"px",t.classList.add('active'),s.classList.remove('right'),_==='rtl'?s.classList.add('downrtl'):s.classList.add('down'))})}),q=document.getElementById('mobileLogo'),h=document.getElementById("myModal"),j=document.getElementById('myDrawer'),G=document.querySelector('.drawer__close'),X=function(){h.style.opacity=1,_==='rtl'?(h.style.right=0,j.style.right=0):(h.style.left=0,j.style.left=0)},H=function(){h.style.opacity=0,_==='rtl'?j.style.right='-100%':j.style.left='-100%',setTimeout(function(){_==='rtl'?h.style.right='-100%':h.style.left='-100%'},250)},q.onclick=function(){X(),localStorage.setItem('isDrawerOpen','true')},h.onclick=function(){H(),localStorage.setItem('isDrawerOpen','false')},G.onclick=function(){H(),localStorage.setItem('isDrawerOpen','false')},x=window.pageYOffset||document.documentElement.scrollTop,l=document.querySelector('.toc'),B=l?l.querySelector('#TableOfContents'):null,w=document.querySelector('.single__contents'),P=document.querySelectorAll('div[data-bgimg]'),m=JSON.parse('["h2","h3","h4"]'),m?m=m.toString():m="h1, h2, h3, h4, h5, h6",S=JSON.parse("null"),Q=JSON.parse("false");function z(e){Q&&S&&Object.keys(S).length&&(S.height<=e?P.forEach(function(e){e.setAttribute('data-bgimg','false')}):P.forEach(function(e){e.setAttribute('data-bgimg','true')}))}z(x),window.onscroll=function(){var e=window.pageYOffset||document.documentElement.scrollTop;e>x?(w?w.querySelectorAll(m.toString()).forEach(function(e){if(document.documentElement.scrollTop>=e.offsetTop&&B){var t=e.getAttribute('id');l.querySelectorAll('a').forEach(function(e){e.classList.remove('active')}),l.querySelector('a[href="#'+t+'"]')?l.querySelector('a[href="#'+t+'"]').classList.add('active'):null}}):null,z(e)):(w?w.querySelectorAll(m.toString()).forEach(function(e){if(document.documentElement.scrollTop>=e.offsetTop&&B){var t=e.getAttribute('id');l.querySelectorAll('a').forEach(function(e){e.classList.remove('active')}),l.querySelector('a[href="#'+t+'"]')?l.querySelector('a[href="#'+t+'"]').classList.add('active'):null}}):null,z(e)),x=e<=0?0:e},r=document.querySelector('#search-mobile'),F=document.querySelector('.mobile-search'),D=document.querySelector('#mobileSearchBtn'),N=document.querySelector('#search-mobile-close'),p=document.querySelector('#search-mobile-container'),c=document.querySelector('#search-mobile-results'),f=document.querySelector('html'),F&&(F.style.display='none'),D?D.addEventListener('click',function(){p&&(p.style.display='block'),r&&r.focus(),f&&(f.style.overflowY='hidden')}):null,N?N.addEventListener('click',function(){if(p&&(p.style.display='none'),r&&(r.value=''),c)for(;c.firstChild;)c.removeChild(c.firstChild);f&&(f.style.overflowY='visible')}):null,r?r.addEventListener('keydown',function(e){if(e.key==='Escape'){if(p&&(p.style.display='none'),r&&(r.value=''),c)for(;c.firstChild;)c.removeChild(c.firstChild);f&&(f.style.overflowY='visible')}}):null,$=localStorage.getItem('theme'),I=document.getElementById('root'),K=document.querySelectorAll('.select-theme'),b=document.querySelectorAll('.select-theme__item'),$&&(b?b.forEach(function(e){e.text.trim()===$?e.classList.add('is-active'):e.classList.remove('is-active')}):null),b?b.forEach(function(e){e.addEventListener('click',function(n){var t,e=n.target.text.trim();localStorage.setItem('theme',e),I.removeAttribute('class'),I.classList.add(`theme__${e}`),K.forEach(function(t){t.querySelectorAll('a').forEach(function(t){t.classList&&(t.text.trim()===e?t.classList.contains('is-active')||t.classList.add('is-active'):t.classList.contains('is-active')&&t.classList.remove('is-active'))})}),window.mermaid&&(e==="dark"||e==="hacker"?(mermaid.initialize({theme:'dark'}),location.reload()):(mermaid.initialize({theme:'default'}),location.reload())),t=document.querySelector('iframe'),t&&t.contentWindow.postMessage({type:'set-theme',theme:e==="dark"||e==="hacker"?'photon-dark':e==='kimbie'?'github-dark-orange':'github-light'},'https://utteranc.es')})}):null,ee=JSON.parse('""'),n=null,t=null,s=null,g=JSON.parse("true"),Y=JSON.parse("true"),y=null,Y&&function(){var e=new XMLHttpRequest;e.open('GET',eo+ee+"/index.json"),e.setRequestHeader('Content-Type','application/json; charset=utf-8'),e.onload=function(){e.status===200?y=new Fuse(JSON.parse(e.response.toString('utf-8')),{keys:['title','description','content'],includeMatches:g,shouldSort:!0,threshold:.4,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1}):console.error(`[${e.status}]Error:`,e.statusText)},e.send()}();function el(o,e){var t,n,s=document.createElement('li');s.className='search-result__item',t=document.createElement('a'),t.innerHTML=e.title,t.setAttribute('class','search-result__item--title'),t.setAttribute('href',e.permalink),n=document.createElement('div'),n.setAttribute('class','search-result__item--desc'),e.description?n.innerHTML=e.description:e.content&&(n.innerHTML=e.content.substring(0,80)),s.appendChild(t),s.appendChild(n),o.appendChild(s)}function ec(i,e){var t,n,s,o=document.createElement('li');if(o.className='search-result__item',t=null,s=document.createElement('a'),s.innerHTML=e.item.title,s.setAttribute('class','search-result__item--title'),s.setAttribute('href',e.item.uri),e.matches&&e.matches.length){for(n=0;n<e.matches.length;n++)'title'===e.matches[n].key&&(s=document.createElement('a'),s.innerHTML=a(e.matches[n].value,e.matches[n].indices),s.setAttribute('class','search-result__item--title'),s.setAttribute('href',e.item.uri)),'description'===e.matches[n].key?(t=document.createElement('div'),t.setAttribute('class','search-result__item--desc'),t.innerHTML=a(e.item.description,e.matches[n].indices)):'content'===e.matches[n].key?t||(t=document.createElement('div'),t.setAttribute('class','search-result__item--desc'),t.innerHTML=a(e.item.content.substring(0,80),e.matches[n].indices)):e.item.description?(t=document.createElement('div'),t.setAttribute('class','search-result__item--desc'),t.innerHTML=e.item.description):(t=document.createElement('div'),t.setAttribute('class','search-result__item--desc'),t.innerHTML=e.item.content.substring(0,80));o.appendChild(s),t&&o.appendChild(t),o&&i.appendChild(o)}}function Z(i,o){n=document.getElementById('search-results'),t=document.getElementById('search-menu'),n.setAttribute('class','dd is-active');var s,e=document.createElement('ul');for(e.setAttribute('class','dd-content search-content'),o.length?o.forEach(function(t){var n,o,i=document.createElement('li'),s=document.createElement('a');s.setAttribute('href',t.uri),s.setAttribute('class','dd-item'),s.appendChild(i),o=document.createElement('div'),o.innerHTML=t.title,o.setAttribute('class','search-result__item--title'),n=document.createElement('div'),n.setAttribute('class','search-result__item--desc'),t.description?n.innerHTML=t.description:t.content&&(n.innerHTML=t.content.substring(0,80)),i.appendChild(o),i.appendChild(n),e.appendChild(s)}):(s=document.createElement('li'),s.setAttribute('class','dd-item'),s.innerText='No results found',e.appendChild(s));t.hasChildNodes();)t.removeChild(t.lastChild);t.appendChild(e)}function J(i,o){n=document.getElementById('search-results'),t=document.getElementById('search-menu'),n.setAttribute('class','dd is-active');var s,e=document.createElement('ul');for(e.setAttribute('class','dd-content search-content'),o.length?o.forEach(function(t){var s,o,r=document.createElement('li'),i=document.createElement('a'),n=null;if(i.setAttribute('href',t.item.uri),i.setAttribute('class','dd-item'),i.appendChild(r),o=document.createElement('div'),o.innerHTML=t.item.title,o.setAttribute('class','search-result__item--title'),t.matches&&t.matches.length){for(s=0;s<t.matches.length;s++)'title'===t.matches[s].key&&(o.innerHTML=a(t.matches[s].value,t.matches[s].indices)),'description'===t.matches[s].key?(n=document.createElement('div'),n.setAttribute('class','search-result__item--desc'),n.innerHTML=a(t.item.description,t.matches[s].indices)):'content'===t.matches[s].key?n||(n=document.createElement('div'),n.setAttribute('class','search-result__item--desc'),n.innerHTML=a(t.item.content.substring(0,80),t.matches[s].indices)):t.item.description?(n=document.createElement('div'),n.setAttribute('class','search-result__item--desc'),n.innerHTML=t.item.description):(n=document.createElement('div'),n.setAttribute('class','search-result__item--desc'),n.innerHTML=t.item.content.substring(0,80));r.appendChild(o),n&&r.appendChild(n),e.appendChild(i)}}):(s=document.createElement('li'),s.setAttribute('class','dd-item'),s.innerText='No results found',e.appendChild(s));t.hasChildNodes();)t.removeChild(t.lastChild);t.appendChild(e)}function en(i,s){n=document.getElementById('search-mobile-results');var o,e=document.createElement('div');e.setAttribute('class','mobile-search__content'),s.length>0?s.forEach(function(t){var n=document.createElement('a');n.setAttribute('href',t.uri),n.innerHTML='<div class="mobile-search__item"><div class="mobile-search__item--title">📄 '+t.title+'</div><div class="mobile-search__item--desc">'+(t.description?t.description:t.content)+'</div></div>',e.appendChild(n)}):(o=document.createElement('span'),e.appendChild(o));let t=document.getElementById('search-mobile-results');for(;t.firstChild;)t.removeChild(t.firstChild);n.appendChild(e)}function es(i,s){n=document.getElementById('search-mobile-results');var o,e=document.createElement('div');e.setAttribute('class','mobile-search__content'),s.length?s.forEach(function(t){var s,o,i=document.createElement('li'),r=document.createElement('a'),n=null;if(r.setAttribute('href',t.item.uri),r.appendChild(i),i.setAttribute('class','mobile-search__item'),o=document.createElement('div'),o.innerHTML=t.item.title,o.setAttribute('class','mobile-search__item--title'),t.matches&&t.matches.length){for(s=0;s<t.matches.length;s++)'title'===t.matches[s].key&&(o.innerHTML=a(t.matches[s].value,t.matches[s].indices)),'description'===t.matches[s].key?(n=document.createElement('div'),n.setAttribute('class','mobile-search__item--desc'),n.innerHTML=a(t.item.description,t.matches[s].indices)):'content'===t.matches[s].key?n||(n=document.createElement('div'),n.setAttribute('class','mobile-search__item--desc'),n.innerHTML=a(t.item.content.substring(0,150),t.matches[s].indices)):t.item.description?(n=document.createElement('div'),n.setAttribute('class','mobile-search__item--desc'),n.innerHTML=t.item.description):(n=document.createElement('div'),n.setAttribute('class','mobile-search__item--desc'),n.innerHTML=t.item.content.substring(0,150));i.appendChild(o),n&&i.appendChild(n),e.appendChild(r)}}):(o=document.createElement('span'),e.appendChild(o));let t=document.getElementById('search-mobile-results');for(;t.firstChild;)t.removeChild(t.firstChild);n.appendChild(e)}function a(e,s){if(!s)return e;var t='',n=0;return s.forEach(function(s){if(s[0]===s[1])return null;t+=''+e.substring(n,s[0])+'<span class="search__highlight">'+e.substring(s[0],s[1]+1)+'</span>'+'',n=s[1]+1}),t+=e.substring(n),t}i=document.getElementById('search'),L=document.getElementById('search-mobile'),o=document.getElementById('search-results'),i?i.addEventListener('input',function(e){if(!e.target.value|window.innerWidth<770)return o?o.setAttribute('class','dd'):null,null;s=e.target.value;var t,n=y.search(e.target.value);g?J(s,n):Z(s,n),t=o.querySelectorAll('.dd-item'),t?t.forEach(function(e){e.addEventListener('mousedown',function(e){e.target.click()})}):null}):null,i?i.addEventListener('blur',function(){if(window.innerWidth<770)return null;o?o.setAttribute('class','dd'):null}):null,i?i.addEventListener('click',function(e){if(window.innerWidth<770)return null;if(!e.target.value)return o?o.setAttribute('class','dd'):null,null;s=e.target.value;var t,n=y.search(e.target.value);g?J(s,n):Z(s,n),t=o.querySelectorAll('.dd-item'),t?t.forEach(function(e){e.addEventListener('mousedown',function(e){e.target.click()})}):null}):null,ea=document.getElementById("search-menu"),er=document.querySelector('#search-menu .dd-item.is-active'),e=null,ei=null,R=350,i?i.addEventListener('keydown',function(s){if(window.innerWidth<770)return null;var o,t=document.querySelectorAll('#search-menu .dd-item');if(s.key==='ArrowDown'){e===null?(e=0,t[e].classList.remove('is-active')):(t[e].classList.remove('is-active'),e=e===t.length-1?0:e+1),t[e].classList.add('is-active');let n=t[e].offsetTop+t[e].clientHeight-R;n>0?document.querySelector(".search-content").scrollTop+=t[e].getBoundingClientRect().height:e===0&&(document.querySelector(".search-content").scrollTop=0)}else if(s.key==='ArrowUp'){e===null?(e=t.length-1,t[e].classList.remove('is-active')):(t[e].classList.remove('is-active'),e=e===0?t.length-1:e-1),t[e].classList.add('is-active');let n=t[e].offsetTop+t[e].clientHeight-R;n<0?document.querySelector(".search-content").scrollTop-=t[e].getBoundingClientRect().height:document.querySelector(".search-content").scrollTop=n+t[e].getBoundingClientRect().height}else s.key==='Enter'?(o=t[e].getAttribute('href'),o&&(location.href=o)):s.key==='Escape'&&(s.target.value=null,n&&n.classList.remove('is-active'))}):null,L?L.addEventListener('input',function(e){if(!e.target.value){let e=document.getElementById('search-mobile-results');for(;e.firstChild;)e.removeChild(e.firstChild);return null}s=e.target.value;var t,n=y.search(e.target.value);g?es(s,n):en(s,n),t=o.querySelectorAll('.dd-item'),t?t.forEach(function(e){e.addEventListener('mousedown',function(e){e.target.click()})}):null}):null}</script><link rel=stylesheet href=/css/main.min.css><meta name=description content="Dans l'article précédent j'ai écrit au sujet de l'installation d'un nœud Bitcoin Lightning Network avec un Raspberry Pi. Ce dernier est sommaire et va à l'essentiel. Dans cet article il va s'agir d'optimiser la configuration du Raspberry Pi afin d'améliorer sa sécurité et rendre l'administration moins laborieuse."><meta name=keywords content><meta name=created content="2019-04-24T00:00:00+0000"><meta name=modified content="2019-04-24T00:00:00+0000"><meta name=author content="Jonathan Serra"><meta property="og:site_name" content="Blocs.fr"><meta property="og:title" content="Configurer son nœud Bitcoin Lightning Network"><meta property="og:url" content="https://blocs.fr/blog/configurer-un-noeud-lightning-network/"><meta property="og:type" content="article"><meta property="og:image" content="https://blocs.fr/images/thumbnails/conf_node_title.jpg"><meta name=generator content="Hugo 0.100.1"><meta name=msapplication-TileColor content="#ffffff"><meta name=theme-color content="#ffffff"><link rel=canonical href=https://blocs.fr/blog/configurer-un-noeud-lightning-network/><link rel=manifest href=/manifest.json><link rel=apple-touch-icon sizes=57x57 href=/favicon/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/favicon/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/favicon/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/favicon/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/favicon/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/favicon/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/favicon/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/favicon/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/favicon/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/favicon/android-icon-192x192.png><link rel=icon type=image/png sizes=192x192 href=/favicon/android-icon-512x512.png><link rel=icon type=image/png sizes=32x32 href=/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/favicon/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/favicon/favicon-16x16.png><meta name=msapplication-TileColor content="#ffffff"><meta name=msapplication-TileImage content="/ms-icon-144x144.png"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Configurer son nœud Bitcoin Lightning Network","datePublished":"2019-04-24T00:00:00Z","dateModified":"2019-04-24T00:00:00Z","url":"https://blocs.fr/blog/configurer-un-noeud-lightning-network/","description":"Dans l'article précédent j'ai écrit au sujet de l'installation d'un nœud Bitcoin Lightning Network avec un Raspberry Pi. Ce dernier est sommaire et va à l'essentiel. Dans cet article il va s'agir d'optimiser la configuration du Raspberry Pi afin d'améliorer sa sécurité et rendre l'administration moins laborieuse.","keywords":["bitcoin","lightning network","debian","bitcoin-cli"],"image":"https://blocs.fr/images/thumbnails/conf_node_title.jpg","author":{"@type":"Person","name":"Jonathan Serra"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blocs.fr"},"publisher":{"@type":"Organization","name":"Blocs.fr","url":"https://blocs.fr"}}</script></head><body id=root class=theme__dark><script>var rootElem=document.getElementById('root'),themeOptions=JSON.parse('["dark","light"]'),localTheme=localStorage.getItem('theme');localTheme&&themeOptions&&themeOptions.length>0&&(themeOptions.includes(localTheme)?rootElem.className=`theme__${localTheme}`:rootElem.className=`theme__${themeOptions[0]}`)</script><div id=container><div id=myDrawer class=drawer><div class=drawer__header><a href=/ class=drawer__header--text>Blocs.fr</a><div class=grow></div><div class=drawer__close><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path fill="currentcolor" d="M18.3 5.71c-.39-.39-1.02-.39-1.41.0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41.0s-.39 1.02.0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02.0 1.41s1.02.39 1.41.0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41.0s.39-1.02.0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02.0-1.4z"/></svg></div></div><div class=drawer__body><div class=menu><h6 class=menu__label>Configurer son nœud Bitcoin Lightning Network</h6><ul><li><a href=https://blocs.fr/blog/mastering-the-lightning-network-1/ class=menu__title>1 - Mastering the Lightning Network - Comprendre Bitcoin et le Lightning Network</a></li><li><a href=https://blocs.fr/blog/mastering-the-lightning-network-10/ class=menu__title>10 - Mastering the Lightning Network - Les messages sur Lightning Network (TLV, e2e encryption)</a></li><li><a href=https://blocs.fr/blog/mastering-the-lightning-network-11/ class=menu__title>11 - Mastering the Lightning Network - Informations Paiement et vie privée en vidéo</a></li><li><a href=https://blocs.fr/blog/mastering-the-lightning-network-12/ class=menu__title>12 - Mastering the Lightning Network - Chapitre final en vidéo</a></li><li><a href=https://blocs.fr/blog/mastering-the-lightning-network-2/ class=menu__title>2 - Mastering the Lightning Network - Paiement avec Bitcoin et Lightning Network</a></li><li><a href=https://blocs.fr/blog/mastering-the-lightning-network-3/ class=menu__title>3 - Mastering the Lightning Network - Transaction d'engagement (commitment tx)</a></li><li><a href=https://blocs.fr/blog/mastering-the-lightning-network-4/ class=menu__title>4 - Mastering the Lightning Network - Créer un réseau de nœud Lightning Network</a></li><li><a href=https://blocs.fr/blog/mastering-the-lightning-network-5/ class=menu__title>5 - Mastering the Lightning Network - Installer un serveur Bitcoin et LN</a></li><li><a href=https://blocs.fr/blog/mastering-the-lightning-network-6/ class=menu__title>6 - Mastering the Lightning Network - Comprendre la commitment transaction</a></li><li><a href=https://blocs.fr/blog/mastering-the-lightning-network-7/ class=menu__title>7 - Mastering the Lightning Network - Routage, secret de paiement et HTLC sur LN</a></li><li><a href=https://blocs.fr/blog/mastering-the-lightning-network-9/ class=menu__title>9 - Mastering the Lightning Network - Onion routing, Gossip protocol et Path Finding</a></li><li><a href=https://blocs.fr/blog/le-developpement-blockchain-par-ou-commencer/ class=menu__title>Le développement Blockchain, par où commencer ?</a></li><li><a href=https://blocs.fr/blog/bitcoin-et-lightning-anonyme-avec-tor/ class=menu__title>Servir Bitcoin et Lightning Network en étant anonyme avec Tor</a></li><li><a href=https://blocs.fr/blog/installer-un-noeud-lightning-network/ class=menu__title>Installer un nœud Lightning Network</a></li><li class=active><a href=https://blocs.fr/blog/configurer-un-noeud-lightning-network/ class="menu__title active">Configurer son nœud Bitcoin Lightning Network</a></li></ul></div><script>var menuTitle=document.querySelectorAll('.menu__title'),modal=document.getElementById("myModal"),drawer=document.getElementById('myDrawer'),closeDrawer=function(){setTimeout(function(){modal.style.opacity=0,drawer.style.left='-100%',modal.style.left='-100%'},250)};menuTitle?menuTitle.forEach(function(e){e.onclick=function(){closeDrawer(),localStorage.setItem('isDrawerOpen','false')}}):null</script></div></div><div id=myModal class=modal></div><script>var isDrawerOpen=localStorage.getItem('isDrawerOpen'),modal=document.getElementById("myModal"),drawer=document.getElementById('myDrawer'),languagedir=JSON.parse('"ltr"'),openDrawer=function(){modal.style.opacity=1,languagedir==="rtl"?(modal.style.right=0,drawer.style.right=0):(modal.style.left=0,drawer.style.left=0)};isDrawerOpen&&isDrawerOpen==='true'&&openDrawer()</script><nav class=nav><div class=navbar__wrapper data-bgimg=false><div class=divider><div class="navbar lmr"><div id=siteLogo class=navbar__logo--wrapper>&nbsp;&nbsp;
<a href=/ title rel=home class=navbar__logo--text-link><h6 class=navbar__logo--text>blocs</br>.fr</h6></a></div><div class=navbar__menu--wrapper><div id=tabletLogo class=hide><a href=/ rel=home class=navbar__logo--link><div class=navbar__icons--icon><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path fill="currentcolor" d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55.0 1-.45 1-1v-7h1.7c.46.0.68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34.0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55.0 1-.45 1-1z"/></svg></div></a></div><div id=mobileLogo class=hide><a href=# class=navbar__logo--link><div class=navbar__icons--icon><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path fill="currentcolor" d="M4 18h16c.55.0 1-.45 1-1s-.45-1-1-1H4c-.55.0-1 .45-1 1s.45 1 1 1zm0-5h16c.55.0 1-.45 1-1s-.45-1-1-1H4c-.55.0-1 .45-1 1s.45 1 1 1zM3 7c0 .55.45 1 1 1h16c.55.0 1-.45 1-1s-.45-1-1-1H4c-.55.0-1 .45-1 1z"/></svg></div></a></div><span id=navMenuMobile class=hide><button id=navCollapseBtn class=navbar__dropdown--title aria-label="Section Menu" data-dir=ltr>
blog<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path fill="currentcolor" d="M8.12 9.29 12 13.17l3.88-3.88c.39-.39 1.02-.39 1.41.0s.39 1.02.0 1.41l-4.59 4.59c-.39.39-1.02.39-1.41.0L6.7 10.7c-.39-.39-.39-1.02.0-1.41.39-.38 1.03-.39 1.42.0z"/></svg></button><div class=navbar__collapse data-open=false><ul><li class="navbar__menu--mobile-item active"><a href=/blog class=active>Blog</a></li></ul></div></span><ul id=navMenu class=navbar__menu><li class="navbar__menu--item active"><a href=/blog data-bgimg=false>Blog</a></li></ul></div><div class=grow></div><div id=siteSearch><div class=search data-bgimg=false><span class=icon><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentcolor" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49.0s.41-1.08.0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg></span><input id=search aria-label="Site Search" class=input type=text autocomplete=off placeholder=Search><div id=search-results class=dropdown><div id=search-menu class=dropdown-menu></div></div></div></div><div id=mobileSearch class=hide><div id=mobileSearchBtn class=mobile-search__btn><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentcolor" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49.0s.41-1.08.0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg></div><div id=search-mobile-container class="mobile-search hide"><div class=mobile-search__top><input id=search-mobile type=text aria-label="Mobile Search" placeholder=Search... class=mobile-search__top--input><div id=search-mobile-close class=mobile-search__top--icon><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path opacity=".87" fill="none" d="M0 0h24v24H0V0z"/><path fill="currentcolor" d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41.0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"/></svg></div></div><div id=search-mobile-results class=mobile-search__body></div></div></div><div class=navbar__icons><button id=toggleToDark class=navbar__icons--icon aria-label="Toggle to dark mode"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path fill="currentcolor" d="M20 15.31 23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69zM12 18c-3.31.0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z"/></svg></button>
<button id=toggleToLight class=navbar__icons--icon aria-label="Toggle to light mode"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path fill="currentcolor" d="M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69zM12 18c-3.31.0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6zm0-10c-2.21.0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4z"/></svg></button>
<script>var theme=localStorage.getItem('theme'),toggleToLightBtn=document.getElementById('toggleToLight'),toggleToDarkBtn=document.getElementById('toggleToDark');theme&&theme==='dark'?(toggleToLightBtn.className='navbar__icons--icon',toggleToDarkBtn.className='hide'):(toggleToLightBtn.className='hide',toggleToDarkBtn.className='navbar__icons--icon')</script><div class=navbar__icons--icon><a href=https://github.com/Chaine-de-Blocs title="Github de blocs.fr" aria-label="Github de blocs.fr" target=_blank rel=noreferrer><svg fill="currentcolor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="22" height="22"><path d="M10.9 2.1c-4.6.5-8.3 4.2-8.8 8.7-.5 4.7 2.2 8.9 6.3 10.5C8.7 21.4 9 21.2 9 20.8v-1.6s-.4.1-.9.1c-1.4.0-2-1.2-2.1-1.9-.1-.4-.3-.7-.6-1C5.1 16.3 5 16.3 5 16.2 5 16 5.3 16 5.4 16c.6.0 1.1.7 1.3 1 .5.8 1.1 1 1.4 1 .4.0.7-.1.9-.2.1-.7.4-1.4 1-1.8-2.3-.5-4-1.8-4-4 0-1.1.5-2.2 1.2-3C7.1 8.8 7 8.3 7 7.6c0-.4.0-.9.2-1.3.0-.2.2-.3.3-.3h.1C8.1 6.1 9.1 6.4 10 7.3c.6-.2 1.3-.3 2-.3s1.4.1 2 .3c.9-.9 2-1.2 2.5-1.3h.1c.2.0.3.1.4.3.0.4.0.9.0 1.3.0.8-.1 1.2-.2 1.4.7.8 1.2 1.8 1.2 3 0 2.2-1.7 3.5-4 4 .6.5 1 1.4 1 2.3v2.6c0 .3.3.6.7.5 3.7-1.5 6.3-5.1 6.3-9.3.0-6-5.1-10.7-11.1-10z"/></svg></a></div></div></div></div></div></nav><script>var siteLogo=document.getElementById('siteLogo'),tabletLogo=document.getElementById('tabletLogo'),mobileLogo=document.getElementById('mobileLogo'),navMenu=document.getElementById('navMenu'),navMenuMobile=document.getElementById('navMenuMobile'),siteSearch=document.getElementById('siteSearch'),mobileSearch=document.getElementById('mobileSearch');enquire.register("screen and (max-width:1280px)",{match:function(){siteLogo.className='navbar__logo--wrapper',tabletLogo.className='hide',mobileLogo.className='hide',navMenu.className='navbar__menu',navMenuMobile.className='hide',siteSearch.className='',mobileSearch.className='hide'},unmatch:function(){siteLogo.className='navbar__logo--wrapper',tabletLogo.className='hide',mobileLogo.className='hide',navMenu.className='navbar__menu',navMenuMobile.className='hide',siteSearch.className='',mobileSearch.className='hide'}}).register("screen and (max-width:960px)",{match:function(){siteLogo.className='hide',tabletLogo.className='',mobileLogo.className='hide',navMenu.className='navbar__menu',navMenuMobile.className='hide',siteSearch.className='hide',mobileSearch.className='navbar__icons--icon'},unmatch:function(){siteLogo.className='navbar__logo--wrapper',tabletLogo.className='hide',mobileLogo.className='hide',navMenu.className='navbar__menu',navMenuMobile.className='hide',siteSearch.className='',mobileSearch.className='hide'}}).register("screen and (max-width:600px)",{match:function(){siteLogo.className='hide',tabletLogo.className='hide',mobileLogo.className='',navMenu.className='hide',navMenuMobile.className='',siteSearch.className='hide',mobileSearch.className='navbar__icons--icon'},unmatch:function(){siteLogo.className='hide',tabletLogo.className='',mobileLogo.className='hide',navMenu.className='navbar__menu',navMenuMobile.className='hide',siteSearch.className='hide',mobileSearch.className='navbar__icons--icon'}})</script><div class=mid><div class=divider><nav id=single-menu class=l data-dir=ltr></nav><article id=list-main class=m data-dir=ltr><nav class=breadcrumb aria-label=breadcrumbs data-is-blog=true><ol><li><a href=https://blocs.fr/ class=capitalize>Blocs.fr</a></li><li><a href=https://blocs.fr/blog/ class=capitalize>Blog</a></li><li class=is-active><span>Configurer son nœud Bitcoin Lightning Network</span></li></ol></nav><div class=single data-display=block><div class=single__title>Configurer son nœud Bitcoin Lightning Network</div><div class=single__meta><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentcolor"><path d="M4 4H20V8H4z" opacity=".3"/><path d="M6 1H8V5H6zM16 1h2V5H16z"/><path d="M19 3H5C3.9 3 3 3.9 3 5v14c0 1.1.9 2 2 2h14c1.1.0 2-.9 2-2V5C21 3.9 20.1 3 19 3zm0 16H5V9h14V19zM19 7H5V5h14V7z"/></svg><time title="Ecrit le">24 Apr 2019</time> &nbsp;&nbsp;<svg fill="#000" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16"><path fill="currentcolor" d="M9 1V3h6V1H9zm9.958984 1.7929688-1.292968 1.5253906 2.949218 2.5 1.292969-1.5253906-2.949219-2.5zM12 4C7.0225467 4 3 8.0225467 3 13c0 4.977453 4.0225467 9 9 9 4.977453.0 9-4.022547 9-9 0-4.9774533-4.022547-9-9-9zm0 2c3.910547.0 7 3.0894533 7 7 0 3.910547-3.089453 7-7 7-3.9105467.0-7-3.089453-7-7 0-3.9105467 3.0894533-7 7-7zM11 8v6h2V8H11z"/></svg> <span title="Temps de lecture">8 min. de lecture</span> &nbsp;&nbsp;<svg fill="#000" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="16" height="16"><path fill="currentcolor" d="M16 5c-3.855469.0-7 3.144531-7 7 0 2.410156 1.230469 4.550781 3.09375 5.8125C8.527344 19.34375 6 22.882813 6 27H8c0-4.429687 3.570313-8 8-8 4.429688.0 8 3.570313 8 8h2c0-4.117187-2.527344-7.65625-6.09375-9.1875C21.769531 16.550781 23 14.410156 23 12c0-3.855469-3.144531-7-7-7zm0 2c2.773438.0 5 2.226563 5 5 0 2.773438-2.226562 5-5 5-2.773437.0-5-2.226562-5-5 0-2.773437 2.226563-5 5-5z"/></svg> <span title="ECRIT PAR">Jonathan Serra</span></div><article class=single__contents data-dir=ltr><p><em>Notez que tout ce qui va suivre devra se faire avec l&rsquo;utilisateur administrateur. Pour s&rsquo;y connecter tapez une fois <code>su root</code> puis tapez son mot de passe.</em></p><h2 id=fixer-ladresse-ip-locale-du-nœud>Fixer l&rsquo;adresse IP locale du nœud</h2><p><em>Ce qui suit s&rsquo;applique qu&rsquo;aux connexions réseau filaire et non Wifi</em></p><p>Votre nœud possède une adresse IP locale afin d&rsquo;être accéssible dans votre réseau, c&rsquo;est d&rsquo;ailleurs grâce à cette dernière que vous pouvez y accéder avec SSH. Cependant il est fort probable que son adressage se fasse dynamiquement par défaut, par conséquent l&rsquo;adresse de votre Raspberry pourrait changer. Il est préférable d&rsquo;éviter cette inconvenance alors on va forcer une adresse IP statique.</p><p>Ouvrez le fichiers de configuration DHCP en tapant <code>nano /etc/dhcpcd.conf</code>, ajoutez à la fin du fichier ces informations :</p><pre tabindex=0><code>interface eth0
static ip_address=192.168.1.42/24 # C&#39;est l&#39;IP qu&#39;aura la machine
static routers=&lt;Votre passerelle&gt; # Passerelle, explications plus bas
static domain_name_servers=&lt;Votre passerelle&gt; 8.8.8.8
</code></pre><p>Ici vous allez devoir faire un travail d&rsquo;enquête pour connaître votre réseau et savoir quelle est la passerelle. Suivez le terminal ci-dessous :</p><pre tabindex=0><code>pi@raspberrypi:~ $ ip route
default via 192.168.1.1 dev eth0 src 192.168.1.42 metric 202
192.168.1.0/24 dev eth0 proto kernel scope link src 192.168.1.42 metric 202
</code></pre><p>Trouvé ! <code>192.168.1.1</code> est la passerelle de mon réseau, c&rsquo;est ce que vous devez mettre dans la configuration DHCP plus haut. Notez également le <code>/24</code> qui est un masque de réseau et que vous devez aussi utiliser dans votre configuration DHCP.</p><blockquote><p>Sans entrer dans les détails le masque <code>/24</code> (ou <code>/n</code>) est ce qui va déterminer la plage d&rsquo;adresses disponibles. Avec une adresse type <code>192.168.1.0/24</code> vous avez 254 adresses disponibles allant de <code>192.168.1.1</code> à <code>192.168.1.254</code>. C&rsquo;est important à considérer car cela signifie que vous ne pouvez pas mettre n&rsquo;importe quelle adresse, il est important de respecter le format. Pour être sûr de ne pas vous tromper, conservez les 3 premiers chiffres de l&rsquo;IP et choisissez le dernier : <code>x.x.x.y</code> où &ldquo;x&rdquo; sont les valeurs de base de l&rsquo;IP (<code>192.168.1</code> selon l&rsquo;exemple) et &ldquo;y&rdquo; est une valeur choisie arbitrairement et comprise entre 1 et 254.</p></blockquote><p>Votre nœud a maintenant une IP statique.</p><h2 id=sécuriser-les-accès-distants-ssh>Sécuriser les accès distants SSH</h2><p>SSH est un protocole de réseau qui vous permet de vous connecter à distance sur une machine grâce à un canal chiffré. Cela signifie que la machine distante exécute un service qui reçoit les connexions SSH, ce service s&rsquo;appelle <code>sshd</code>. SSH en lui même est plutôt bien sécurisé, cependant il est possible de couvrir un peu mieux les accès.</p><p>Sans plus attendre trouvez le fichier en tapant <code>sudo nano /etc/ssh/sshd_config</code>.</p><p>Voyons quelles modifications vous pouvez apporter afin de mieux sécuriser les accès SSH. Vous noterez que la plupart des lignes sont commentées grâce au caractère &ldquo;#&rdquo;, cela signifie juste que les lignes comportant ce symbole au début sont neutralisées, le travail consiste essentiellement à dé-neutraliser certaines lignes.</p><p><code>Port 2310</code> : Mettez le port que vous souhaitez, le changer est toujours une couche de sécurité peu coûteuse. Ici j&rsquo;ai mis 2310.</p><p><code>LoginGraceTime 2m</code> : Limite le temps de connexion inactif à 2 minutes. Vous pouvez l&rsquo;augmenter mais le plus bas le mieux.</p><p><code>StrictModes yes</code> : Assure les accès aux fichiers en fonction de l&rsquo;utilisateur connecté.</p><p><code>PermitRootLogin no</code> : Mettez PermitRootLogin à <code>no</code>, cette option bloquera les connexions SSH à l&rsquo;utilisateur administrateur du Raspberry. Si vous avez suivi <a href=/https://blocs.fr/blog/installer-un-noeud-lightning-network/ title="l'installation que je recommande">l&rsquo;installation que je recommande</a> vous avez un utilisateur nommé <code>bitcoin</code> qui a pour rôle d&rsquo;administrer les services bitcoind et lnd. C&rsquo;est sur ce dernier que vous vous connecterez via SSH et non sur l&rsquo;utilisateur root.</p><p><code>MaxAuthTries 3</code> : Nombre d&rsquo;essais pour se connecter via SSH limité à 3. Cela bloque les attaques par brute force automatisé.</p><p><code>MaxSessions 1</code> : Si vous êtes la seule personne à gérer votre machine, et que vous ne comptez pas créer plusieurs connexions SSH simultanées, alors limitez le nombre de sessions à 1. Il faut garder ce nombre le plus petit possible en fonction de vos besoins.</p><p><code>PubkeyAuthentication yes</code> : Cette option vous servira plus tard. Elle n&rsquo;ajoute pas de sécurité supplémentaire, c&rsquo;est une option qui vous facilitera l&rsquo;accès à votre machine.</p><p>Tapez CTRL + O et CTRL + X; et enfin redémarrez SSHd afin d&rsquo;appliquer ces modifications en tapant <code>sudo service sshd restart</code>.</p><h3 id=enregistrer-votre-clé-pour-les-connexions-futures>Enregistrer votre clé pour les connexions futures</h3><p>Dans la configuration précédente vous aviez activé l&rsquo;option PubkeyAuthentication, cette option va vous permettre d&rsquo;enregistrer la clé publique de votre machine sur le Raspberry. Cela vous évitera de taper sans cesse le mot de passe de connexion.</p><p>Cela se passe en un commande. Suivez le terminal ci-dessous. Notez que cela doit se faire depuis votre machine locale (votre mac, votre pc, etc). Si vous êtes sur Windows vous n&rsquo;aurez pas cette commande.</p><pre tabindex=0><code>monpc@oumonmac:~ $ ssh-copy-id -i ~/.ssh/id_rsa.pub bitcoin@192.168.1.42
</code></pre><p>Ensuite vous devrez taper le mot de passe de l&rsquo;utilisateur &ldquo;bitcoin&rdquo;. Notez que l&rsquo;IP <code>192.168.1.42</code> (<a href=/https://blocs.fr/blog/installer-un-noeud-lightning-network/#activer-et-configurer-ssh title="comment trouver l'IP de mon nœud ?">comment trouver l&rsquo;IP de mon nœud ?</a>) doit être l&rsquo;IP de votre nœud distant. Cette action aura pour effet de recenser la clé publique de votre machine dans le Raspberry Pi, il vous reconnaîtra pour les connexions futures et ne vous demandera plus de mot de passe.</p><blockquote><p>Si vous êtes sur Windows en utilisant PuTTy, vous pouvez générer et trouver votre clé publique avec <a href=https://www.digitalocean.com/docs/droplets/how-to/add-ssh-keys/create-with-putty/ target=_blank>PuTTyGen</a>. Copiez cette clé qui commence par &ldquo;ssh-rsa&rdquo; si vous l&rsquo;avez créé avec le chiffrement RSA. Cliquez sur &ldquo;Save private key&rdquo; et enregistrez le fichier sur votre machine. Revenez sur PuTTy, sur le panneau de gauche trouvez &ldquo;Connection / SSH / Auth&rdquo; puis dans la section &ldquo;Private key file for authentication&rdquo; chargez le fichier de votre clé privée, c&rsquo;est un fichier .ppk. Connectez vous à votre Raspberry en utilisant PuTTy. Une fois connecté tapez <code>sudo nano .ssh/authorized_keys</code> et collez la clé publique que vous aviez copié, puis sauvegardez le fichier. C&rsquo;est terminé désormais votre Raspberry connaît votre clé publique et autorisera les connexions futures depuis votre machine Windows.</p></blockquote><h3 id=ajouter-une-couche-supplémentaire-à-lauthentification-ssh>Ajouter une couche supplémentaire à l&rsquo;authentification SSH</h3><p>Pour l&rsquo;instant il est toujours possible de forcer l&rsquo;accès à votre nœud avec une attaque par dictionnaire, qui consiste à tester des millions de mot de passe jusqu&rsquo;à trouver un accès. Il existe un service nommé <code>fail2ban</code> qui va permettre de protéger en limitant les tentatives de connexion.</p><p>Pour l&rsquo;installer tapez <code>apt-get update && apt-get install -y fail2ban</code>. Ensuite vous allez devoir configurer une chose si vous avez modifié le port SSH comme je l&rsquo;ai montré <a href=/#securiser-ssh>juste au dessus</a>. Cherchez le fichier de configuration de fail2ban <code>nano /etc/fail2ban/jail.d/defaults-debian.conf</code>. Voyez la section <code>[sshd]</code> mettez ce qui suit (si vous n&rsquo;avez rien dans le fichier, ajoutez également ce qui suit) :</p><pre tabindex=0><code>[sshd]
enabled = true
port    = 2310 # Notez que c&#39;est le port que j&#39;ai mis plus haut dans sshd_config
</code></pre><p>Sauvegardez en tapant CTRL + O et CTRL + X pour fermer et enfin tapez <code>systemctl restart fail2ban</code>.</p><blockquote><p>fail2ban est un service polyvalent qui sécurise nombreuse authentifications, dont le service sshd et nous l&rsquo;utilisons pour ça.</p></blockquote><h3 id=activer-le-redémarrage-automatique-des-services>Activer le redémarrage automatique des services</h3><p>Cette partie est cruciale. Si votre Raspberry est redémarré à cause d&rsquo;une coupure de courant par exemple, il redémarrera&mldr; Mais il ne relancera pas bitcoind ni lnd. Ce qui aurait pour effet d&rsquo;éteindre le service et vous obliger à intervenir pour qu&rsquo;il persévère.</p><p>D&rsquo;abord il va falloir faire en sorte que le disque soit toujours monté sur le dossier .bitcoin car c&rsquo;est ce dernier qui recense la blockchain et bitcoind en a besoin. Le montage de disque ne se fait jamais automatiquement. Alors voilà comment configurer cela :</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>pi@raspberry:~ $ df -h
</span></span><span class=line><span class=cl>Filesystem      Size  Used Avail Use% Mounted on
</span></span><span class=line><span class=cl>/dev/root        15G  5.6G  8.4G  40% /
</span></span><span class=line><span class=cl>devtmpfs        460M     <span class=m>0</span>  460M   0% /dev
</span></span><span class=line><span class=cl>tmpfs           464M     <span class=m>0</span>  464M   0% /dev/shm
</span></span><span class=line><span class=cl>tmpfs           464M   12M  452M   3% /run
</span></span><span class=line><span class=cl>tmpfs           5.0M  4.0K  5.0M   1% /run/lock
</span></span><span class=line><span class=cl>tmpfs           464M     <span class=m>0</span>  464M   0% /sys/fs/cgroup
</span></span><span class=line><span class=cl>/dev/mmcblk0p1   44M   22M   22M  51% /boot
</span></span><span class=line><span class=cl>/dev/sda        458G  253G  182G  59% /home/bitcoin/.bitcoin
</span></span><span class=line><span class=cl>tmpfs            93M     <span class=m>0</span>   93M   0% /run/user/1001
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>pi@raspberry:~ $ <span class=nb>echo</span> <span class=s1>&#39;/dev/sda /home/bitcoin/.bitcoin ext4 defaults,noatime 0 0&#39;</span> &gt;&gt; /etc/fstab</span></span></code></pre></td></tr></table></div></div><p>Soyez vigilant ici. J&rsquo;ai surligné mon montage actuel qui est <code>/dev/sda</code> monté sur <code>/home/bitcoin/.bitcoin</code>, vous devez mettre ce chemin dans le <code>echo</code> en dessous. Notez également l&rsquo;annotation <code>ext4</code> qui est le système de fichier que j&rsquo;ai choisi lorsque j&rsquo;avais formaté le disque. Si vous avez un doute suivez le terminal ci-dessous</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>pi@raspberry:~ $ file -sL /dev/sda
</span></span><span class=line><span class=cl>/dev/sda: Linux rev 1.0 ext4 filesystem data, <span class=nv>UUID</span><span class=o>=</span>a2a0ec66-f768-4cf0-9442-6c2878ab60e1, volume name BLOCK-STORAGE <span class=o>(</span>needs journal recovery<span class=o>)</span> <span class=o>(</span>extents<span class=o>)</span> <span class=o>(</span>64bit<span class=o>)</span> <span class=o>(</span>large files<span class=o>)</span> <span class=o>(</span>huge files<span class=o>)</span></span></span></code></pre></td></tr></table></div></div><p>Où <code>/dev/sda</code> est mon disque à monter. On voit en surligné <code>ext4</code> qui est le système de fichier.</p><h2 id=bitcoind>bitcoind</h2><p>Le redémarrage automatique d&rsquo;un service sur Linux se fait toujours de la même manière, il faut écrire le service. Et pour ce faire tapez <code>nano /etc/systemd/system/bitcoind.service</code> et entrez la configuration suivante :</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=o>[</span>Unit<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>Description</span><span class=o>=</span>Bitcoin daemon
</span></span><span class=line><span class=cl><span class=nv>After</span><span class=o>=</span>network.target
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>Service<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>ExecStartPre</span><span class=o>=</span>/bin/sh -c <span class=s1>&#39;sleep 30&#39;</span>
</span></span><span class=line><span class=cl><span class=nv>ExecStart</span><span class=o>=</span>/usr/local/bin/bitcoind -daemon -conf<span class=o>=</span>/home/bitcoin/.bitcoin/bitcoin.conf -pid<span class=o>=</span>/home/bitcoin/.bitcoin/bitcoind.pid <span class=c1># Mettez le chemin vers votre dossier .bitcoin</span>
</span></span><span class=line><span class=cl><span class=nv>PIDFile</span><span class=o>=</span>/home/bitcoin/.bitcoin/bitcoind.pid <span class=c1># Mettez le chemin vers votre dossier .bitcoin</span>
</span></span><span class=line><span class=cl><span class=nv>User</span><span class=o>=</span>bitcoin <span class=c1># Votre utilisateur qui gère le service</span>
</span></span><span class=line><span class=cl><span class=nv>Group</span><span class=o>=</span>bitcoin <span class=c1># Votre groupe qui gère le service</span>
</span></span><span class=line><span class=cl><span class=nv>Type</span><span class=o>=</span>forking
</span></span><span class=line><span class=cl><span class=nv>KillMode</span><span class=o>=</span>process
</span></span><span class=line><span class=cl><span class=nv>Restart</span><span class=o>=</span>always
</span></span><span class=line><span class=cl><span class=nv>TimeoutSec</span><span class=o>=</span><span class=m>120</span>
</span></span><span class=line><span class=cl><span class=nv>RestartSec</span><span class=o>=</span><span class=m>30</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>Install<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>WantedBy</span><span class=o>=</span>multi-user.target</span></span></code></pre></td></tr></table></div></div><p>CTRL + O et CTRL + X pour enregistrer et quitter puis tapez <code>systemctl enable bitcoind</code>. La machine est lancée, le service bitcoind démarrera au lancement du Raspberry.</p><h2 id=lnd>lnd</h2><p>Encore une fois, il faut créer un service pour le service de lightning network, tapez <code>nano /etc/systemd/system/lnd.service</code> et voilà la configuration que je recommande :</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=o>[</span>Unit<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>Description</span><span class=o>=</span>LND
</span></span><span class=line><span class=cl><span class=nv>Wants</span><span class=o>=</span>bitcoind.service
</span></span><span class=line><span class=cl><span class=nv>After</span><span class=o>=</span>bticoind.service <span class=c1># Il démarre après bitcoind</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>Service<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>ExecStart</span><span class=o>=</span>/usr/local/bin/lnd
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>User</span><span class=o>=</span>bitcoin <span class=c1># Votre utilisateur qui gère le service</span>
</span></span><span class=line><span class=cl><span class=nv>Group</span><span class=o>=</span>bitcoin <span class=c1># Votre utilisateur qui gère le service</span>
</span></span><span class=line><span class=cl><span class=nv>Type</span><span class=o>=</span>simple
</span></span><span class=line><span class=cl><span class=nv>KillMode</span><span class=o>=</span>process
</span></span><span class=line><span class=cl><span class=nv>LimitNOFILE</span><span class=o>=</span><span class=m>128000</span>
</span></span><span class=line><span class=cl><span class=nv>TimeoutSec</span><span class=o>=</span><span class=m>300</span>
</span></span><span class=line><span class=cl><span class=nv>Restart</span><span class=o>=</span>always
</span></span><span class=line><span class=cl><span class=nv>RestartSec</span><span class=o>=</span><span class=m>120</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>Install<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>WantedBy</span><span class=o>=</span>multi-user.target</span></span></code></pre></td></tr></table></div></div><p>Et enfin pour l&rsquo;activer <code>systemctl enable lnd</code>.</p><hr><p>Félicitations, votre Raspberry est autonome, il relancera les services en cas de redémarrage inopiné, sans votre aide, tout seul comme un grand.</p><p>Dans un article futur on va voir comment on peut administrer son nœud avec une interface graphique !</p></article></div><div class=grow></div><nav class=pagination-single><a href=https://blocs.fr/blog/installer-un-noeud-lightning-network/ title="Installer un nœud Lightning Network" class=pagination-single__left><div class=pagination-single__icon><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path fill="currentcolor" d="M19 11H7.83l4.88-4.88c.39-.39.39-1.03.0-1.42s-1.02-.39-1.41.0l-6.59 6.59c-.39.39-.39 1.02.0 1.41l6.59 6.59c.39.39 1.02.39 1.41.0s.39-1.02.0-1.41L7.83 13H19c.55.0 1-.45 1-1s-.45-1-1-1z"/></svg></div><div class=pagination-single__right-title>Installer un nœud Lightning Network</div></a><div class=grow></div></nav><h2 class=comment-title>Commentez l'article</h2><script src=https://isso.blocs.fr/js/embed.min.js data-isso-reply-notifications=true data-isso=https://isso.blocs.fr/ data-isso-lang=fr crossorigin=anonymous></script><section id=isso-thread></section></article><section id=list-side class=r data-dir=ltr><div class=toc><h6 class=toc__label>Sommaire de l'article</h6><div class=toc__body><nav id=TableOfContents><ul><li><a href=#fixer-ladresse-ip-locale-du-nœud>Fixer l&rsquo;adresse IP locale du nœud</a></li><li><a href=#sécuriser-les-accès-distants-ssh>Sécuriser les accès distants SSH</a><ul><li><a href=#enregistrer-votre-clé-pour-les-connexions-futures>Enregistrer votre clé pour les connexions futures</a></li><li><a href=#ajouter-une-couche-supplémentaire-à-lauthentification-ssh>Ajouter une couche supplémentaire à l&rsquo;authentification SSH</a></li><li><a href=#activer-le-redémarrage-automatique-des-services>Activer le redémarrage automatique des services</a></li></ul></li><li><a href=#bitcoind>bitcoind</a></li><li><a href=#lnd>lnd</a></li></ul></nav></div></div></section></div></div><script>'use strict';function wrap(e,t){e.parentNode.insertBefore(t,e),t.appendChild(e)}(function(){var e=document.querySelector('.single__contents');e?e.querySelectorAll('pre > code').forEach(function(e){var t=e.getAttribute('data-lang'),s=document.createElement('div'),o=null,n=null;t&&t.includes(':')&&(o=t.split(':')[0],n=t.split(':')[1],s.className='language-'+o,s.setAttribute('data-lang',n),e.className='language-'+o,e.setAttribute('data-lang',n),e.setAttribute('id',n)),(!t||n)&&wrap(e.parentNode,s)}):null})();var dollarCodeElem=document.querySelectorAll('div.language-\\$'),gtCodeElem=document.querySelectorAll('div.language-\\>');dollarCodeElem?dollarCodeElem.forEach(function(e){var t=e.parentNode.parentNode?e.parentNode.parentNode.querySelectorAll('.lnt'):null;t?t.forEach(function(e){e.innerHTML='$<br/>'}):null}):null,gtCodeElem?gtCodeElem.forEach(function(e){var t=e.parentNode.parentNode?e.parentNode.parentNode.querySelectorAll('.lnt'):null;t?t.forEach(function(e){e.innerHTML='><br/>'}):null}):null</script><script defer src=/js/helper/getParents.min.js></script>
<script defer src=/js/helper/closest.min.js></script>
<script defer src=/js/helper/prev.min.js></script>
<script defer src=/js/helper/prop.min.js></script>
<script defer src=/js/helper/fadeinout.min.js></script>
<script>document.addEventListener('DOMContentLoaded',function(){'use strict';var e,t,n,s,o,i,a,r,c,l,d,u,h,m,p,f=document.querySelectorAll('.single__contents > table');for(let e=0;e<f.length;e++)s=f[e],c=document.createElement('div'),c.className='table-wrapper',s.parentElement.replaceChild(c,s),c.appendChild(s);e=JSON.parse("null"),e&&e.includes('mermaid')&&(h=localStorage.getItem('theme')||'light',h==="dark"?mermaid.initialize({theme:'dark'}):mermaid.initialize({theme:'default'}),d=[],[].push.apply(d,document.getElementsByClassName('language-mermaid')),d.forEach(function(t){var n,e=t.parentNode;e!==document.body&&(e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e)),n=document.createElement('div'),n.classList.add('mermaid'),n.innerHTML=t.innerHTML,t.replaceWith(n)})),e&&e.includes('katex')&&(p=document.getElementsByClassName('math'),r={delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1}]},renderMathInElement(document.querySelector('.single__contents'),r)),e&&e.includes('flowchartjs')&&(r=JSON.parse('{"arrow-end":"block","element-color":"black","fill":"white","flowstate":{"approved":{"fill":"#58C4A3","font-size":12,"no-text":"n/a","yes-text":"APPROVED"},"current":{"fill":"yellow","font-color":"red","font-weight":"bold"},"future":{"fill":"#FFFF99"},"invalid":{"fill":"#444444"},"past":{"fill":"#CCCCCC","font-size":12},"rejected":{"fill":"#C45879","font-size":12,"no-text":"REJECTED","yes-text":"n/a"},"request":{"fill":"blue"}},"font-color":"black","font-size":14,"line-color":"black","line-length":50,"line-width":3,"no-text":"no","scale":1,"symbols":{"end":{"class":"end-element"},"start":{"element-color":"green","fill":"yellow","font-color":"red"}},"text-margin":10,"x":0,"y":0,"yes-text":"yes"}'),n=null,u="language-flowchart",t=0,Array.prototype.forEach.call(document.querySelectorAll("[class^="+u+"]"),function(e){e.style.display='none',e.parentNode.style.backgroundColor="transparent",n=e.innerText;var o,s=document.createElement('div');s.id='flowchart'+t,e.parentNode.insertBefore(s,e),o=flowchart.parse(n),o.drawSVG("flowchart"+t,r),t+=1})),e&&e.includes('chart')&&(a="#666",i="#ddd",o=2,Chart.defaults.global.elements.rectangle.borderWidth=o,Chart.defaults.global.elements.rectangle.borderColor=a,Chart.defaults.global.elements.rectangle.backgroundColor=i,Chart.defaults.global.elements.line.borderWidth=o,Chart.defaults.global.elements.line.borderColor=a,Chart.defaults.global.elements.line.backgroundColor=i,Chart.defaults.global.elements.point.borderWidth=o,Chart.defaults.global.elements.point.borderColor=a,Chart.defaults.global.elements.point.backgroundColor=i,m="language-chart",t=0,n=null,Array.prototype.forEach.call(document.querySelectorAll("[class^="+m+"]"),function(e){e.style.display='none',e.parentNode.style.backgroundColor="transparent",n=e.innerText;var i,a,s=document.createElement('canvas'),o=null;s.height=200,s.style.height=200,s.id='myChart'+t,o=JSON.parse(n),e.parentNode.insertBefore(s,e),i=document.getElementById('myChart'+t).getContext('2d'),a=new Chart(i,o),t+=1})),e&&e.includes('viz')&&(l="language-viz-",Array.prototype.forEach.call(document.querySelectorAll("[class^="+l+"]"),function(e){e.style.display='none',e.parentNode.style.backgroundColor="transparent",e.getAttribute("class").split(" ").forEach(function(e){e.startsWith(l)&&(t=e.substr(l.length))});var t,n=new Viz;n.renderSVGElement(e.innerText,{engine:t}).then(function(t){t.style.width="100%",e.parentNode.insertBefore(t,e)})}))})</script><script>var singleMenu=document.getElementById('single-menu'),listMain=document.getElementById('list-main'),listSide=document.getElementById('list-side'),wideViewAsDefault=JSON.parse("null");enquire.register("screen and (max-width:1280px)",{match:function(){wideViewAsDefault?(singleMenu.className='hide',listMain.className='lm',listSide.className='r'):(singleMenu.className='l',listMain.className='m',listSide.className='r')},unmatch:function(){wideViewAsDefault?(singleMenu.className='hide',listMain.className='lm',listSide.className='r'):(singleMenu.className='l',listMain.className='m',listSide.className='r')}}).register("screen and (max-width:960px)",{match:function(){listSide.className='r',listMain.className='lm',singleMenu.className='hide'},unmatch:function(){wideViewAsDefault?(singleMenu.className='hide',listMain.className='lm',listSide.className='r'):(singleMenu.className='l',listMain.className='m',listSide.className='r')}}).register("screen and (max-width:600px)",{match:function(){listSide.className='hide',listMain.className='lmr',singleMenu.className='hide'},unmatch:function(){listSide.className='r',listMain.className='lm',singleMenu.className='hide'}})</script><div class=bot><footer class=footer><div class=divider><div class=lmr><p class=caption>©2022 blocs.fr</p></div></div></footer></div></div></body></html>