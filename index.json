[{"content":"Le monde du d√©veloppement logiciel est en perp√©tuelle √©bullition, cherchant sans cesse de nouvelles m√©thodologies pour optimiser la productivit√©, la qualit√© et la rapidit√©. Une approche baptis√©e le \u0026ldquo;Vibe Coding\u0026rdquo; peut radicalement transformer la fa√ßon de travailler dans le d√©veloppement logiciel, permettant de gagner en rapidit√© et en efficacit√© comme jamais vu. Un exemple frappant et concret : le d√©veloppement du site serjaq.fr. Un projet qui, sur le papier, aurait d√ª engloutir deux mois de travail et un budget cons√©quent, a √©t√© mis en orbite en √† peine 50 heures.\nComment une telle compression temporelle est-elle possible ? La r√©ponse tient en deux lettres : IA. Plus pr√©cis√©ment, l\u0026rsquo;utilisation judicieuse et intensive des Large Language Models (LLMs) au c≈ìur du processus de d√©veloppement.\nIl ne s\u0026rsquo;agira pas ici de faire l\u0026rsquo;ex√©g√®se d\u0026rsquo;une chose n√©buleuse d\u0026rsquo;auto-r√©gression lin√©aire sur le mot. Mais d\u0026rsquo;un retour concret, r√©el et le plus objectif possible, permis par une expertise de plus de 10 ans dans l\u0026rsquo;ing√©nierie logicielle, allant de la cr√©ation de protocoles √† la cr√©ation de produits logiciels complets (app, API, infrastructure, interface).\nAvant toute chose : qu\u0026rsquo;est-ce que donc le Vibe Coding ? Le \u0026ldquo;Vibe Coding\u0026rdquo; est une approche de d√©veloppement logiciel qui place l\u0026rsquo;intelligence artificielle au c≈ìur du processus cr√©atif. Contrairement aux m√©thodologies traditionnelles o√π le d√©veloppeur √©crit chaque ligne de code, le Vibe Coding √©tablit une collaboration fluide entre l\u0026rsquo;humain et l\u0026rsquo;IA.\nDans cette approche, le d√©veloppeur d√©finit clairement les objectifs et les sp√©cifications du projet, puis formule des prompts pr√©cis pour guider l\u0026rsquo;IA. Il supervise et it√®re rapidement sur les propositions g√©n√©r√©es, tout en se concentrant sur l\u0026rsquo;architecture globale et les d√©cisions strat√©giques qui n√©cessitent une expertise humaine. Son r√¥le √©volue vers celui d\u0026rsquo;un chef d\u0026rsquo;orchestre qui valide, teste et affine le code produit par son partenaire num√©rique. bip bop bloup\nL\u0026rsquo;IA, de son c√¥t√©, prend en charge la g√©n√©ration du code boilerplate et des structures r√©p√©titives qui constituent souvent une part importante mais peu stimulante du travail de d√©veloppement. Elle propose des impl√©mentations bas√©es sur les descriptions fonctionnelles fournies et traduit des concepts de design en code fonctionnel, tout en sugg√©rant des optimisations et des alternatives techniques que le d√©veloppeur pourrait ne pas avoir envisag√©es.\nCette symbiose permet d\u0026rsquo;atteindre une vitesse de d√©veloppement in√©dite tout en maintenant un niveau de qualit√© satisfaisant. Le Vibe Coding n\u0026rsquo;est pas simplement l\u0026rsquo;utilisation ponctuelle d\u0026rsquo;outils d\u0026rsquo;IA, mais une refonte compl√®te du workflow de d√©veloppement qui maximise les forces respectives de l\u0026rsquo;humain et de la machine, cr√©ant ainsi une nouvelle dynamique o√π l\u0026rsquo;intuition et la cr√©ativit√© humaines se combinent avec la puissance de calcul et la m√©moire encyclop√©dique bobyloniesque des LLMs dit \u0026ldquo;intelligence artificielle\u0026rdquo;.\nLe d√©fi serjaq.fr : ambition et contraintes Avant de plonger dans le \u0026ldquo;comment\u0026rdquo;, comprenons l\u0026rsquo;ampleur de la t√¢che. Serjaq.fr n\u0026rsquo;est pas une simple page statique. Il s\u0026rsquo;agit d\u0026rsquo;une plateforme d\u0026rsquo;e-commerce moderne avec des exigences techniques pr√©cises :\nUn frontend r√©actif et performant d√©velopp√© avec NextJS. Un backend e-commerce headless robuste bas√© sur Sylius. Une solution d\u0026rsquo;analytics on-premise avec Matomo, pour garder la main sur les donn√©es dans les serveurs. Une cha√Æne d\u0026rsquo;int√©gration et de d√©ploiement continus (CI/CD) avec GitHub Actions pour automatiser les mises en production. Traditionnellement, un tel projet mobiliserait une √©quipe pluridisciplinaire : designers UX/UI, d√©veloppeurs frontend et backend, experts DevOps\u0026hellip; Le co√ªt estim√© ? Aux alentours de 30 000 - 40 000 EUR. Un chiffre qui refl√®te les heures de conception, de d√©veloppement, de tests et de d√©ploiement n√©cessaires.\nMon voyage initiatique dans le Vibe Coding Le b√¢ton de p√®lerin √† la paume, l\u0026rsquo;aventure a commenc√© avec une exploration des outils d\u0026rsquo;assistance au d√©veloppement bas√©s sur l\u0026rsquo;IA. J\u0026rsquo;ai d\u0026rsquo;abord jet√© mon d√©volu sur Lovable. Cet outil m\u0026rsquo;a permis de mettre en place une premi√®re √©bauche du frontend. Cependant, j\u0026rsquo;ai vite constat√© que le projet g√©n√©r√© n\u0026rsquo;√©tait pas √† jour avec les derni√®res versions et les meilleures pratiques de NextJS. Plut√¥t que de m\u0026rsquo;embourber dans des mises √† niveau complexes, j\u0026rsquo;ai pris la d√©cision de repartir d\u0026rsquo;une base saine en utilisant le CLI standard create-next-app.\nLitt√©ralement : l\u0026rsquo;apport de Lovable a √©t√© un √©chec. En l\u0026rsquo;√©tat, ces solutions d\u0026rsquo;agents IA sont bien pour l\u0026rsquo;√©bauche, mais la qualit√© pour de la production est discutable.\nC\u0026rsquo;est √† ce moment-l√† que le \u0026ldquo;Vibe Coding\u0026rdquo; a v√©ritablement pris son envol. J\u0026rsquo;ai int√©gr√© Cursor, un √©diteur de code con√ßu pour l\u0026rsquo;IA, en le couplant avec la puissance de GPT-4.1o et de Claude Sonnet 3.7. Cette combinaison s\u0026rsquo;est av√©r√©e √™tre un catalyseur de productivit√© extraordinaire.\nJ\u0026rsquo;ai √©valu√© le gain en temps √† x3. Pas de gain en qualit√© cependant, au contraire la qualit√© produite par les LLMs implique de passer soi-m√™me du temps d\u0026rsquo;ajustement.\nL\u0026rsquo;id√©e du \u0026ldquo;Vibe Coding\u0026rdquo;, c\u0026rsquo;est de se mettre en phase avec l\u0026rsquo;IA, de la guider par des prompts pr√©cis, d\u0026rsquo;it√©rer rapidement, et de laisser le LLM se charger d\u0026rsquo;une grande partie de la g√©n√©ration de code, de la structuration des composants, et m√™me de l\u0026rsquo;int√©gration de frameworks CSS comme TailwindCSS.\nLes grands apports du Vibe Coding L\u0026rsquo;exp√©rience avec serjaq.fr a mis en lumi√®re des avantages consid√©rables :\nUne vitesse de d√©veloppement stratosph√©rique : Passer de 2 mois √† 50 heures n\u0026rsquo;est pas une simple optimisation, c\u0026rsquo;est un changement de paradigme. Les LLMs excellent dans la g√©n√©ration de boilerplate, l\u0026rsquo;√©criture de fonctions r√©p√©titives, et la mise en place de structures de base. Une qualit√© tout √† fait raisonnable : Si l\u0026rsquo;on est pr√©cis dans ses demandes et que l\u0026rsquo;on supervise le travail de l\u0026rsquo;IA, le code produit est non seulement fonctionnel mais aussi maintenable. Pour serjaq.fr, le r√©sultat est un site fluide, moderne et qui r√©pond aux attentes. Excellents designers : Une des surprises les plus agr√©ables fut la capacit√© des LLMs, notamment GPT-4.1o, √† interpr√©ter des descriptions de design et √† les traduire en code TailwindCSS fonctionnel et esth√©tique. Page de confirmation de commande sur serjaq.fr - Un seul prompt notifiant l\u0026rsquo;expertise en design a suffi\nUn cas surprenant, un gain de temps hors norme Un exemple particuli√®rement frappant de la puissance des LLMs a √©t√© leur capacit√© √† g√©n√©rer du code pour Sylius, notamment pour la normalisation des attributs produits.\nL\u0026rsquo;objectif √©tait de retourner les attributs de produits avec le texte associ√©. Mais lorsque l\u0026rsquo;attribut est un select, par d√©faut Sylius retourne l\u0026rsquo;UUID de la valeur et non le texte de la valeur.\nJ\u0026rsquo;ai demand√© au LLM de produire un code permettant de r√©cup√©rer les valeurs d\u0026rsquo;attributs select en labels localis√©s. Voici le code g√©n√©r√©¬†:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 foreach ($object-\u0026gt;getAttributes() as $attributeValue) { $value = $attributeValue-\u0026gt;getValue(); $productAttribute = $attributeValue-\u0026gt;getAttribute(); $configuration = method_exists($productAttribute, \u0026#39;getConfiguration\u0026#39;) ? $productAttribute-\u0026gt;getConfiguration() : []; $type = method_exists($productAttribute, \u0026#39;getType\u0026#39;) ? $productAttribute-\u0026gt;getType() : null; if ($type === \u0026#39;select\u0026#39; \u0026amp;\u0026amp; is_array($value) \u0026amp;\u0026amp; isset($configuration[\u0026#39;choices\u0026#39;])) { $locale = null; if (method_exists($attributeValue, \u0026#39;getLocaleCode\u0026#39;)) { $locale = $attributeValue-\u0026gt;getLocaleCode(); } elseif (method_exists($attributeValue, \u0026#39;getLocale\u0026#39;)) { $locale = $attributeValue-\u0026gt;getLocale(); } if ($locale === null \u0026amp;\u0026amp; isset($context[\u0026#39;locale\u0026#39;])) { $locale = $context[\u0026#39;locale\u0026#39;]; } if ($locale === null) { $locale = \u0026#39;fr_FR\u0026#39;; } $choices = $configuration[\u0026#39;choices\u0026#39;]; $value = array_map(function ($uuid) use ($choices, $locale) { if (isset($choices[$uuid]) \u0026amp;\u0026amp; isset($choices[$uuid][$locale])) { return $choices[$uuid][$locale]; } if (isset($choices[$uuid]) \u0026amp;\u0026amp; is_array($choices[$uuid])) { return reset($choices[$uuid]); } return $uuid; }, $value); if (isset($configuration[\u0026#39;multiple\u0026#39;]) \u0026amp;\u0026amp; $configuration[\u0026#39;multiple\u0026#39;] === false \u0026amp;\u0026amp; count($value) === 1) { $value = $value[0]; } } } Pour le faire moi m√™me avec mon niveau de connaissance de Sylius, consid√©rant l\u0026rsquo;absence de documentation pour ce besoin, il m\u0026rsquo;aurait fallu creuser le code source de Sylius ainsi que comprendre sa structure de base de donn√©es. Cela aurait pris quelques heures, √ßa n\u0026rsquo;a pris que 10 minutes avec quelques prompts et contextes pour affiner.\nLes \u0026ldquo;Moins\u0026rdquo; : Les √©cueils √† ne pas ignorer Le Vibe Coding n\u0026rsquo;est cependant pas une potion magique d√©nu√©e d\u0026rsquo;effets secondaires :\nLa surveillance constante est imp√©rative : Un LLM reste un outil. Il peut mal interpr√©ter une demande, introduire des bugs subtils ou g√©n√©rer du code non optimis√©. Une relecture attentive et des tests r√©guliers sont indispensables. Vous √™tes le chef d\u0026rsquo;orchestre, l\u0026rsquo;IA est l\u0026rsquo;instrument. Le syndrome de la \u0026ldquo;documentation manquante\u0026rdquo; : C\u0026rsquo;est un point critique. Lorsqu\u0026rsquo;un sujet, une librairie ou une API manquent de documentation claire et accessible publiquement (sur laquelle le LLM a √©t√© entra√Æn√©), l\u0026rsquo;IA a tendance √† \u0026ldquo;halluciner\u0026rdquo;. Elle invente des fonctions, des modules ou des configurations qui n\u0026rsquo;existent tout simplement pas. Ces impasses peuvent faire perdre un temps pr√©cieux si l\u0026rsquo;on ne s\u0026rsquo;en rend pas compte rapidement. Le spectre de la dette technique : Si l\u0026rsquo;on manque d\u0026rsquo;expertise sur une technologie ou une technique sp√©cifique, on peut avoir du mal √† guider correctement le LLM. Sans instructions pr√©cises sur les patterns √† utiliser, les optimisations √† pr√©voir ou les bonnes pratiques architecturales, l\u0026rsquo;IA peut produire du code qui fonctionnera √† court terme mais qui engendrera une dette technique importante, co√ªteuse √† r√©sorber par la suite. L\u0026rsquo;IA est un formidable levier, mais elle ne remplace pas l\u0026rsquo;expertise humaine. Au contraire, elle la sublime en automatisant les t√¢ches √† faible valeur ajout√©e, permettant au d√©veloppeur de se concentrer sur l\u0026rsquo;architecture, la logique m√©tier complexe et la supervision.\nPlus vite, mais toujours de la dette technique M√™me si le Vibe Coding permet d\u0026rsquo;acc√©l√©rer consid√©rablement le d√©veloppement et de gagner du temps sur la mise en ≈ìuvre de fonctionnalit√©s, il ne pr√©serve pas pour autant de la dette technique. En g√©n√©rant rapidement du code, parfois sans recul suffisant sur l\u0026rsquo;architecture ou les bonnes pratiques, on risque d\u0026rsquo;accumuler des choix techniques sous-optimaux, des solutions temporaires ou des impl√©mentations peu maintenables. Cette dette, si elle n\u0026rsquo;est pas identifi√©e et trait√©e r√©guli√®rement, peut freiner l\u0026rsquo;√©volution du projet et augmenter les co√ªts de maintenance √† moyen et long terme.\nPour exemple :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 import { create } from \u0026#39;zustand\u0026#39;; import axios from \u0026#39;axios\u0026#39;; interface Province { code: string; name: string; } interface Country { code: string; name: string; provinces: Province[]; } interface MiscState { countries: Country[]; isLoading: boolean; error: string | null; fetchCountries: () =\u0026gt; Promise\u0026lt;void\u0026gt;; } export const useMiscStore = create\u0026lt;MiscState\u0026gt;((set) =\u0026gt; ({ countries: [], isLoading: false, error: null, fetchCountries: async () =\u0026gt; { set({ isLoading: true }); try { const { data } = await axios.get(`${process.env.NEXT_PUBLIC_SYLIUS_API_URL}/api/v2/shop/countries`, { headers: { \u0026#39;Accept\u0026#39;: \u0026#39;application/ld+json\u0026#39; } }); const countries = data[\u0026#39;hydra:member\u0026#39;].map((country: any) =\u0026gt; ({ code: country.code, name: country.name, provinces: country.provinces.map((province: any) =\u0026gt; ({ code: province.code, name: province.name })) })); set({ countries, isLoading: false, error: null }); } catch { set({ error: \u0026#39;Error fetching countries\u0026#39;, isLoading: false }); } } })); Un ≈ìil aguerri et exp√©riment√© verrait plein de pistes d\u0026rsquo;am√©lioration et de probl√©matiques amenuisant la maintenabilit√© de ce code. Entre autres : gestion des √©tats transitifs standard et non-atomis√©e, requ√™tes faites avec axios quand fetch aurait fait le job, les interfaces pourraient √™tre d√©finies dans des typings, utilisation de any faute de contexte, etc.\nL\u0026rsquo;utilisation de zustand a √©t√© impos√©e par moi. Sans cela, le syst√®me aurait opt√© pour une approche sous-optimale, possiblement rien pour g√©rer les √©tats globaux de l\u0026rsquo;app.\nUn angle mort, un hack D√®s la premi√®re mise en prod la base de donn√©es a √©t√© hack√©e\u0026hellip; Un angle mort induit par l\u0026rsquo;IA et pour lequel j\u0026rsquo;avais manqu√© de vigilance. Heureusement nous en √©tions qu\u0026rsquo;√† la pr√©misse de la mise en prod, donc sans donn√©es.\nLa raison est simple : un port ouvert par le stack Docker du projet backend Sylius quand bien m√™me ufw n\u0026rsquo;ouvrait que les ports n√©cessaires √† la plublication du site. Ce port √©tait le 3306 pour mysql. Une routine de je-ne-sais-o√π a trouv√© le serveur, d√©couvert ce port ouvert, a test√© les acc√®s possible √† la BDD (nom d\u0026rsquo;utilisateur root et mot de passe , oui, rien), et a simplement √©cras√© la BDD du service.\nHack de la BDD de serjaq.fr - Avec un message sympatoche\nCela est la r√©sultante d\u0026rsquo;un manque de vigilance de ce que peut produire le LLM : ouverture du port 3306 non-n√©cessaire, absence d\u0026rsquo;ajout de mot de passe pour l\u0026rsquo;acc√®s √† la BDD.\nPlus c\u0026rsquo;est gros, moins √ßa passe Plus un projet grossit, plus le contexte se complexifie. Plus le contexte se complexifie, plus le LLM peut produire de la redondances non-n√©cessaire, grossissant d\u0026rsquo;avantage le projet\u0026hellip;\nAfin d\u0026rsquo;√™tre bon, un LLM a besoin de contexte, le plus pr√©cis possible pour √©viter toute hallucination. Mais cela est limit√© par sa capacit√© de \u0026ldquo;m√©moire\u0026rdquo; (dits \u0026ldquo;tokens\u0026rdquo;), √ßa ne peut √™tre infini, et en r√©alit√© c\u0026rsquo;est limit√© compte tenu de la quantit√© de code qu\u0026rsquo;un projet peut avoir.\nPar exemple le mod√®le Claude 3.7 √©choue √† interpr√©ter un fichier de 400 lignes\nJ\u0026rsquo;ai eu une discussion √† ce sujet sur LinkedIn\nConversation sur la g√©n√©ration de code avec LLM\nDans cette discussion, je souligne que le d√©veloppement \u0026ldquo;full native\u0026rdquo; sans cadre structurant peut rapidement devenir chaotique, aussi bien pour les humains que pour les intelligences artificielles. M√™me si, en th√©orie, il est possible d‚Äôorganiser du code natif de fa√ßon propre, la r√©alit√© montre que l‚Äôabsence de conventions ou de structures impos√©es par un framework conduit souvent √† une accumulation de code difficile √† maintenir et √† contextualiser. J‚Äôai pris l‚Äôexemple du JavaScript natif face √† React‚ÄØ: derri√®re la lisibilit√© et la modularit√© d‚Äôun composant React, le code natif sous-jacent peut vite devenir confus, sans s√©paration claire des responsabilit√©s.\nLe fait que cette complexit√© n‚Äôest pas seulement un probl√®me pour les d√©veloppeurs humains‚ÄØ: les LLMs, entra√Æn√©s sur des donn√©es humaines, rencontrent les m√™mes difficult√©s √† comprendre et √† manipuler un code peu structur√©. Pour pallier ce manque de structure, on finit souvent par r√©inventer des frameworks ou des biblioth√®ques, ce qui annule l‚Äôavantage initial du \u0026ldquo;full native\u0026rdquo;.\n√Ä mesure que les LLMs progressent, ils pourraient g√©n√©rer leurs propres \u0026ldquo;frameworks\u0026rdquo; internes, potentiellement opaques pour les humains, ce qui risquerait de nous faire perdre la ma√Ætrise et la compr√©hension du code produit et ex√©cut√©. La structuration du code reste donc essentielle, autant pour la maintenabilit√© humaine que pour l‚Äôefficacit√© de la collaboration avec l‚ÄôIA.\nC\u0026rsquo;est une symphonie homme-machine Et chef d\u0026rsquo;orchestre nous pourrions devenir\u0026hellip; L\u0026rsquo;aventure serjaq.fr est pour moi la preuve tangible que le \u0026ldquo;Vibe Coding\u0026rdquo; n\u0026rsquo;est pas un simple buzzword, mais une v√©ritable r√©volution dans notre mani√®re de concevoir et de construire des logiciels. La capacit√© √† mat√©rialiser une id√©e complexe en un temps record ouvre des perspectives incroyables, notamment pour les startups, les PME ou les d√©veloppeurs ind√©pendants qui souhaitent tester rapidement des concepts sans mobiliser des ressources financi√®res et humaines colossales.\nN√©anmoins, cette nouvelle √®re du d√©veloppement logiciel exige une vigilance accrue et une solide expertise technique. Les LLMs sont des partenaires de code surpuissants, mais ils n√©cessitent un pilote exp√©riment√© pour naviguer entre les promesses d\u0026rsquo;une productivit√© d√©cupl√©e et les r√©cifs des hallucinations et de la dette technique.\nLe futur du software engineering passera sans doute par une collaboration de plus en plus √©troite entre l\u0026rsquo;intelligence humaine et l\u0026rsquo;intelligence artificielle. Apprendre √† \u0026ldquo;viber\u0026rdquo; avec ces nouveaux outils, c\u0026rsquo;est se donner les moyens de construire plus vite, plus intelligemment, et peut-√™tre m√™me, avec plus de plaisir et humilit√©.\nCet article a √©t√© r√©dig√© √† 90% par des LLMs. M√™me l√† ce qui devait me prendre une demi-journ√©e m\u0026rsquo;en a demand√© 2h. Cependant, les LLMs ne feront pas les pots üè∫\n","description":"Retour d'exp√©rience sur le 'Vibe Coding', une nouvelle approche de d√©veloppement logiciel assist√©e par l'IA. J'ai pu livrer serjaq.fr, un projet estim√© √† 30 000‚Ç¨ et 2 mois de travail, en seulement 50 heures. Explications, outils, avantages et mises en garde.","id":0,"section":"blog","tags":["vibe coding","intelligence artificielle","d√©veloppement logiciel","llm","gpt","claude","cursor","nextjs","sylius","productivit√©","serjaq.fr","devops","tailwindcss"],"title":"Le Vibe Coding : Comment j'ai compress√© 2 mois de d√©veloppement en 50 heures pour serjaq.fr gr√¢ce √† l'IA","uri":"https://blocs.fr/blog/comment-le-vibe-coding-fait-gagner-du-temps-et-de-largent/"},{"content":"Lorsque nous payons avec Bitcoin nous signons un contrat. Plus sp√©cifiquement nous produisons une signature cryptographique pour un programme qui fait office de contrat : c\u0026rsquo;est ce qui a √©t√© nomm√© \u0026ldquo;Contrat Intelligent\u0026rdquo; par Nick Szabo en 1997, 11 ans avant que le concept Bitcoin √©merge.\nL\u0026rsquo;id√©e principielle du contrat intelligent tend √† r√©pondre √† trois qualit√©s fondamentales d\u0026rsquo;un contrat (ce que l\u0026rsquo;on a pour habitude de signer avec notre plus belle esquisse) par l\u0026rsquo;usage de solutions digitales :\nObservabilit√© par principe : un contrat doit avoir une histoire que l\u0026rsquo;on doit conna√Ætre, sa date de cr√©ation, son expriation √©ventuelle, le ou les parti(s) engag√©s, etc. V√©rifiable par une tierce partie : il doit √™tre possible de v√©rifier l\u0026rsquo;authenticit√© d\u0026rsquo;un contrat ainsi que l\u0026rsquo;authenticit√© des signatures. Effet relatif du contrat : un contrat ne doit engager que les partis concern√©s par ce dernier. Aucun tiers ne peut √™tre engag√© par un contrat. En 1997 il n\u0026rsquo;y avait pas de solution parfaite pour permettre le contrat intelligent. On avait d√©j√† les signatures cryptographiques qui permettaient une v√©rifiabilit√©. On avait les outils de t√©l√©communication pour l\u0026rsquo;observabilit√©. Mais il n\u0026rsquo;existait rien qui combinait les diff√©rents outils pour avoir un service totalement digital r√©pondant aux fondamentaux d\u0026rsquo;un contrat.\nC\u0026rsquo;√©tait en 1997, nous sommes en 2022 √† l\u0026rsquo;heure o√π j\u0026rsquo;√©cris cet article, et il y a 14 ans une solution devient la cl√© de la bo√Æte de Pandore du contrat intelligent (c\u0026rsquo;est Bitcoin bien √©videmment).\nBitcoin, une chose prot√©iforme ? Cet article va parler d\u0026rsquo;un sujet technique en vue de pr√©ciser un √©l√©ment central √† Bitcoin (et les techno. Blockchain), mais en pr√©ambule je vais m\u0026rsquo;arr√™ter sur ce qu\u0026rsquo;est Bitcoin, au fond.\nOn entend √ßa et l√† que Bitcoin est une cryptomonnaie, oui, possible. On entend que Bitcoin est une Blockchain, √©ventuellement, d√©pend de ce qu\u0026rsquo;on veut dire. On entend que Bitcoin est un protocole pair-√†-pair (P2P), certainement. C\u0026rsquo;est un peu de tout √ßa. De la m√™me fa√ßon que l\u0026rsquo;humain n\u0026rsquo;est ni une t√™te, ni deux bras, ni deux jambes (mais bien un gallinac√© sans plumes).\nSi Bitcoin est qualifi√© de (crypto)monnaie, c\u0026rsquo;est parce qu\u0026rsquo;il le permet. Si Bitcoin est qualifi√© de Blockchain, c\u0026rsquo;est parce qu\u0026rsquo;il en a besoin et le produit. Si Bitcoin est qualifi√© de protocole, c\u0026rsquo;est parce qu\u0026rsquo;il y en a un.\nFinalement, c\u0026rsquo;est une chose √† l\u0026rsquo;apparence prot√©iforme. Dire ce qu\u0026rsquo;est Bitcoin n\u0026rsquo;est fonci√®rement pas l\u0026rsquo;exercice le plus simple si la volont√© est d\u0026rsquo;apporter une information compl√®te (et ni le plus int√©ressant). C\u0026rsquo;est ce que √ßa permet qui compte, et ce que √ßa permet : ce sont les contrats intelligents.\nL\u0026rsquo;objet de cet article c\u0026rsquo;est de voir la tronche qu\u0026rsquo;ont ces fameux contrats, c\u0026rsquo;est juste en dessous !\nVous aurez bien cern√© qu\u0026rsquo;ici nous allons parler du corps des contrats, ce qu\u0026rsquo;ils sont mat√©riellement. Ce qu\u0026rsquo;ils sont m√©caniquement n√©cessite de parler d\u0026rsquo;autres parties qui composent Bitcoin, en l\u0026rsquo;occurence la preuve de travail, les transactions et leur timestamp, le protocole P2P, etc.\nInitiation aux contrats intelligents Un contrat intelligent sur Bitcoin est compos√© de plusieurs parties.\nPrenons le temps de souligner que ce que nous allons voir concerne Bitcoin mais que le concept de ces objets est r√©current dans nombreuses autres technologies Blockchain comme Ethereum.\nAu commencement √©tait le verbe : Le SCRIPT et les OP CODE Un contrat tacite est inscrit, et pour l\u0026rsquo;inscrire il faut une langue. Sur Bitcoin la langue utilis√©e est le SCRIPT. Les phrases en SCRIPT sont construites avec des OP CODE.\nLe SCRIPT est donc un groupe d\u0026rsquo;op√©rations empil√©es et interpr√©t√©es de haut en bas, c\u0026rsquo;est ce qui consistue in fine le contrat intelligent.\nMettons, il existe un OP CODE d\u0026rsquo;addition appel√© OP_ADD, un SCRIPT permettant d\u0026rsquo;additionner 4 + 2 ressemblerait √† ceci :\nSCRIPT: 4 2 OP_ADD La pile est interpr√©t√©e de haut en bas. La premi√®re valeur est 4, c\u0026rsquo;est ce qu\u0026rsquo;on appelle une valeur constante, ce n\u0026rsquo;est pas un OP_CODE. Cette valeur constante est m√©moris√©e dans une autre pile MEMOIRE :\nSCRIPT: | MEMOIRE: 2 | 4 OP_ADD | Derechef, la valeur constante 2 est interpr√©t√©e :\nSCRIPT: | MEMOIRE: OP_ADD | 4 | 2 Et enfin, le premier OP_CODE de la pile, l\u0026rsquo;addition. C\u0026rsquo;est un code d\u0026rsquo;op√©ration qui a un comportement d√©fini par le protocole. En l\u0026rsquo;occurence OP_ADD prend les 2 valeurs derni√®rement ajout√©es √† la pile MEMOIRE, ce qui nous donne :\nSCRIPT: | MEMOIRE: | 6 La valeur finale est ce qu\u0026rsquo;on appelle commun√©ment l\u0026rsquo;OUTPUT (la sortie). Et la pile SCRIPT est d√©nomm√©e INPUT (l\u0026rsquo;entr√©e).\nLe concept du OP CODE (code op√©ration) est apparu avec l\u0026rsquo;√©mergence des processeurs. Les processeurs prennent en entr√©e des valeurs binaires (des 1 ou des 0). Regroup√©es par 8 ces valeurs binaires forment des octets (ou bytes). Un OP CODE est un octet particulier quit peut √™tre utilis√© pour d√©crire une op√©ration particulier : c\u0026rsquo;est l\u0026rsquo;OP CODE. En programmation l\u0026rsquo;OP CODE permet de d√©finir universellement des op√©rations au sein d\u0026rsquo;un protocole, car toutes les machines peuvent interpr√©ter des octets.\nC\u0026rsquo;est bien sympa tout √ßa, c\u0026rsquo;est plut√¥t archa√Øque, vous ne trouvez pas ? Je vous rassure, c\u0026rsquo;est bien le cas. C\u0026rsquo;est une logique qui est appliqu√©e en bas niveau, au plus proche des processeurs des machines. Au plus c\u0026rsquo;est bas niveau, au plus c\u0026rsquo;est logiquement simple\u0026hellip; Mais √ßa devient vite illisible pour l\u0026rsquo;humain adepte de la s√©mantique.\nOn n\u0026rsquo;a pas encore parl√© de signature\u0026hellip; Or, le contrat concerne tout de m√™me une ou plusieurs parties signataires ! Il est temps de voir le scriptSig et le scriptPubKey.\nSign√© c\u0026rsquo;est pes√© : le scriptSig et le scriptPubKey D\u0026rsquo;un point de vue purement SCRIPT le scriptSig et le scriptPubKey forment √† eux deux un SCRIPT\u0026hellip; Rien de nouveau.\nCependant, ces deux √©l√©ments am√®nent √† s\u0026rsquo;int√©resser √† un concept du contrat intelligent qui d√©passe le simple cadre du langage et son interpr√©tation.\nPour revenir un peu sur le sujet d\u0026rsquo;un contrat, c\u0026rsquo;est un corpus qui implique un ou des parties. Un contrat est observ√© et v√©rifi√© par une tierce partie.\nDans le cadre d\u0026rsquo;un contrat intelligent, il peut √™tre en suspens lorsqu\u0026rsquo;il n\u0026rsquo;est pas sign√© par un ou plusieurs partis : cela est r√©gi par le script de verrouillage (ou locking script), c\u0026rsquo;est le scriptPubKey. Cette suspension est d√©bloqu√©e gr√¢ce au script de d√©verrouillage (ou unlocking script), c\u0026rsquo;est le scriptSig. Dans ce cadre, ce qui ex√©cute le d√©verrouillage d\u0026rsquo;un contrat intelligent est le protocole Bitcoin (si le scriptSig est valide √©videmment, c\u0026rsquo;est tout le jeu de l\u0026rsquo;observabilit√© et de la v√©rification). Le protocole Bitcoin a alors le r√¥le de tierce parti arbitrant le contrat qui implique un ou des parties.\nOK super\u0026hellip; Mais c\u0026rsquo;est quoi au fond le scriptSig et le scriptPubKey ?\nLe scriptSig peut √™tre essentiellement n\u0026rsquo;importe quoi servant de cl√© √† l\u0026rsquo;ex√©cution du contrat intelligent. C\u0026rsquo;est aucune, une ou plusieurs valeur(s), qui sont directement ajout√©es sur le dessus de la pile INPUT du SCRIPT.\nLe scriptPubKey est le SCRIPT qui servira √† d√©terminer si le scriptSig est valide ou non.\nOn notera deux choses int√©ressantes. La premi√®re c\u0026rsquo;est qu\u0026rsquo;un scriptSig vide et valide signifie que le contrat n√©cessite de rien pour √™tre valide. La seconde c\u0026rsquo;est qu\u0026rsquo;un scriptPubKey peut tr√®s bien √™tre un SCRIPT qui sera toujours invalide peu importe le scriptSig, ce qui correspond √† un contrat corrompu\u0026hellip; Et cela peut avoir une utilit√©.\nPour illustrer tout cela, prenons un SCRIPT qui valide si une addition est juste, si elle est juste le contrat intelligent est alors valide.\nscriptSig: 4 2 scriptPubKey: 6 OP_ADD OP_EQUALVERIFY SCRIPT(INPUT): MEMOIRE(OUTPUT): 4 | 2 | OP_ADD | 6 | OP_EQUALVERIFY | Le scriptSig est ajout√© en haut de la pile INPUT, puis suit le scriptPubKey. OP_EQUALVERIFY est un nouvel OP CODE. Ce dernier va simplement v√©rifier sur les deux derni√®res valeurs de la pile OUTPUT sont √©gales.\nEx√©cutons l\u0026rsquo;enti√®ret√© du SCRIPT :\ncycle 1 -- SCRIPT(INPUT): MEMOIRE(OUTPUT): 2 | 4 OP_ADD | 6 | OP_EQUALVERIFY | cycle 2: -- SCRIPT(INPUT): MEMOIRE(OUTPUT): OP_ADD | 4 6 | 2 OP_EQUALVERIFY | cycle 3: -- SCRIPT(INPUT): MEMOIRE(OUTPUT): 6 | 6 OP_EQUALVERIFY | cycle 4: -- SCRIPT(INPUT): MEMOIRE(OUTPUT): OP_EQUALVERIFY | 6 | 6 cycle 5: -- SCRIPT(INPUT): MEMOIRE(OUTPUT): | True La derni√®re valeur est True, valeur usuelle comprise comme Vraie. Cela signifie que le scriptSig = 4 2 v√©rifie bien le SCRIPT 6 OP_ADD OP_EQUALVERIFY. Dit autrement 4 + 2 est bien √©gale √† 6.\nDu coup 4 + 2 c\u0026rsquo;est une signature ? Et bien, je vais devoir avouer que le terme \u0026ldquo;intelligent\u0026rdquo; n\u0026rsquo;est peut-√™tre pas le mot le plus idoine. Mais pour √ßa c\u0026rsquo;est Nick Szabo qu\u0026rsquo;il faut aller voir.\nHormis les cas bien particuliers, un contrat demande un scriptSig prouvant que la personne est l\u0026rsquo;unique personne √©tant capable de fournir la bonne valeur. C\u0026rsquo;est ici que se trouve la signature cryptographique. Nous allons le voir des exemples avec des cas r√©els ci-dessous.\nP2PK : Premi√®re version de paiement (obsol√®te) Le P2PK fait parti des premiers SCRIPT Bitcoin existant sur Bitcoin Core. Sa fonction est de contr√¥ler qu\u0026rsquo;un signataire est bien possesseur de la cl√© attendue dans le scriptPubKey.\nCe SCRIPT comporte un d√©faut - raison pour laquelle il est obsol√®te (mais toujours actif). Ce dernier n√©cessite de faire conna√Ætre la cl√© publique du signataire attendu dans le scriptPubKey. C\u0026rsquo;est un d√©faut pouvant compromettre la s√©curit√©, √©videmment avec cette seule information le syst√®me reste s√©curis√©, cependant il existe des approches permettant de ne pas d√©voiler la cl√© publique (voir P2PKH juste en dessous).\nAnimation d\u0026#39;ex√©cution de P2PK scriptSig: \u0026lt;signature=304...0ef\u0026gt; scriptPubKey: \u0026lt;pubKey=038...f7d\u0026gt; OP_CHECKSIG On remarque que l\u0026rsquo;OP CODE OP_CHECKSIG est ce qui va contr√¥ler la signature. Ce contr√¥le repose sur la signature fournie via scriptSig avec l\u0026rsquo;algorithme ECDSA (signature cryptographique sur courbe elliptique). Ce sujet m√©riterait des articles √† part tant il y a de choses √† en dire. Ce qu\u0026rsquo;on peut noter surtout, c\u0026rsquo;est que le principe de l\u0026rsquo;OP CODE offre une certaine modularit√©. Si un jour on voulait ajouter un nouvel algorithme pour signer les transactions, un nouvel OP CODE pourrait faire l\u0026rsquo;affaire.\nP2PKH : The Paiement P2PKH est probablement le SCRIPT le plus populaire. Il est le Super Cousin de P2PK, o√π le \u0026ldquo;H\u0026rdquo; ajoute une propri√©t√© de hachage afin de ne pas divulguer la cl√© publique du signataire dans le scriptPubKey. Voyez par vous-m√™me et comparez le avec le P2PK, ce qui est lisible dans le scriptPubKey c\u0026rsquo;est le hash de la cl√© publique.\nAnimation d\u0026#39;ex√©cution de P2PKH scriptSig: \u0026lt;signature=304...667\u0026gt; \u0026lt;pubKey=03e...ba7\u0026gt; scriptPubKey: OP_DUP OP_HASH160 \u0026lt;pubKeyHash=bb2...e3e\u0026gt; OP_EQUALVERIFY OP_CHECKSIG OP_HASH160 applique un hash avec RIPEMD160\nG√®le temporaire d\u0026rsquo;une transaction Geler des fonds pour un temps donn√© ? Et oui c\u0026rsquo;est possible avec la carte\u0026hellip; Bitcoin.\nAnimation d\u0026#39;ex√©cution de freeze de transaction scriptSig: \u0026lt;signature=304...488\u0026gt; \u0026lt;pubKey=023...da2\u0026gt; scriptPubKey: \u0026lt;expiryTime=2000\u0026gt; OP_CHECKLOCKTIMEVERIFY OP_DROP OP_DUP OP_HASH160 \u0026lt;pubKeyHash=909...5e8\u0026gt; OP_EQUALVERIFY OP_CHECKSIG OP_CHECKLOCKTIMEVERIFY est un OP CODE particulier. Cette op√©ration va chercher une valeur disponible dans la transaction, c\u0026rsquo;est le nLockTime. Dit simplement, le nLockTime est une information sp√©cifiant √† quel moment la transaction peut √™tre incluse dans un bloc, et donc inscrite dans la blockchain. Notez par ailleurs que quand bien m√™me le nLockTime peut √™tre une information de temps, le protocole ne peut jamais assurer que la transaction soit inscrite √† ce temps donn√©. On doit consid√©rer qu\u0026rsquo;elle le sera une fois que ce temps soit pass√©. Cela est d√ª au principe de la preuve de travail et de la validation moyenne des blocs toutes les 10 minutes.\nPuzzle Bitcoin Gagnez des milliards si vous trouvez le mot secret. C\u0026rsquo;est le but de ce SCRIPT (pas celui-ci, enfin il n\u0026rsquo;y a pas des milliards √† remporter d√©sol√©).\nAnimation d\u0026#39;ex√©cution d\u0026#39;un Puzzle Bitcoin scriptSig: \u0026lt;data=satoshi\u0026gt; scriptPubKey: OP_HASH256 \u0026lt;hash=da2...26f\u0026gt; OP_EQUAL Conclusion Les OP CODE et le SCRIPT offrent pas mal de possibilit√©s pour exploiter l\u0026rsquo;autonomie du r√©seau et l\u0026rsquo;ex√©cution des SCRIPTs. Avec par exemple OP_CHECKLOCKTIMEVERIFY qui lit une information dans la transaction. En r√©alit√© c\u0026rsquo;est une partie hautement modulaire du protocole Bitcoin propice √† l\u0026rsquo;√©volution du protocole\u0026hellip; Qui ne se fait jamais sans discussions autour des contributeurs de Bitcoin.\nNous avons ici uniquement la partie SCRIPT, sachez que c\u0026rsquo;est qu\u0026rsquo;un petit morceau de ce qu\u0026rsquo;est une transaction. Disons que nous venons de voir le cerveau de la transaction.\nLes vid√©os que vous voyez ont √©t√© g√©n√©r√©es avec Manim. Le code source est disponible ici https://github.com/Chaine-de-Blocs/bitcoin-manim.\n","description":"Lorsque nous payons avec Bitcoin nous signons un contrat. Plus sp√©cifiquement nous produisons une signature cryptographique pour un programme qui fait office de contrat : c'est ce qui a √©t√© nomm√© Contrat Intelligent par Nick Szabo en 1997, 11 ans avant que le concept Bitcoin √©merge.","id":1,"section":"blog","tags":["bitcoin","script","op code","checklocktimeverify"],"title":"Bitcoin SCRIPT en vid√©o","uri":"https://blocs.fr/blog/bitcoin-script/"},{"content":"Lecture du chapitre 1 de Mastering the Lightning Network Bienvenue dans Mastering the Lightning Network !\nLe Lightning Network (souvent abr√©g√© en LN) change la fa√ßon dont les gens √©changent de la valeur en ligne, et c\u0026rsquo;est l\u0026rsquo;une des avanc√©es les plus excitantes de l\u0026rsquo;histoire de Bitcoin. Le Lightning Network en est encore √† ses balbutiements. Le Lightning Network est un protocole permettant d\u0026rsquo;utiliser Bitcoin de mani√®re intelligente. Il s\u0026rsquo;agit d\u0026rsquo;une technologie de deuxi√®me couche sur Bitcoin.\nLe concept du Lightning Network a √©t√© propos√© en 2015, et la premi√®re impl√©mentation a √©t√© lanc√©e en 2018. √Ä partir de 2021, nous commen√ßons seulement √† voir les opportunit√©s que le Lightning Network offre √† Bitcoin, y compris l\u0026rsquo;am√©lioration de la confidentialit√©, de la vitesse et de l\u0026rsquo;√©chelle. Avec une connaissance de base du Lightning Network, vous pouvez aider √† fa√ßonner l\u0026rsquo;avenir du r√©seau tout en cr√©ant des opportunit√©s pour vous-m√™me.\nIl est suppos√© que vous avez d√©j√† quelques connaissances de base sur Bitcoin, mais si ce n\u0026rsquo;est pas le cas, ne vous inqui√©tez pas, les concepts Bitcoin les plus importants sont expliqu√©s. Si vous voulez en savoir plus sur Bitcoin, vous pouvez lire Mastering Bitcoin, 2e √©dition, par Andreas M. Antonopoulos (O\u0026rsquo;Reilly), disponible gratuitement en ligne.\nAlors que la majeure partie de ce livre est √©crite pour les programmeurs, les premiers chapitres sont √©crits pour √™tre accessibles √† tous, quelle que soit leur exp√©rience technique. Dans ce chapitre, nous commencerons par un peu de terminologie, puis nous examinerons la confiance et son application dans ces syst√®mes, et enfin nous discuterons de l\u0026rsquo;histoire et de l\u0026rsquo;avenir du Lightning Network.\n","description":"Introduction √† Lightning Network et Bitcoin. Comment le protocole int√®gre un protocole d'√©quilibre permettant √† des acteurs du r√©seau Lightning Network de se faire confiance.","id":2,"section":"blog","tags":["bitcoin","lightning network","mastering the lightning network","live"],"title":"1 - Mastering the Lightning Network - Comprendre Bitcoin et le Lightning Network","uri":"https://blocs.fr/blog/mastering-the-lightning-network-1/"},{"content":"Lecture des chapitre 13 et 14 de Mastering the Lightning Network Wire Protocol Dans ce chapitre, nous plongeons dans le protocole filaire du Lightning Network et couvrons √©galement tous les diff√©rents leviers d\u0026rsquo;extensibilit√© qui ont √©t√© int√©gr√©s au protocole. √Ä la fin de ce chapitre, un lecteur ambitieux devrait √™tre capable d\u0026rsquo;√©crire son propre analyseur de protocole filaire pour le Lightning Network. En plus d\u0026rsquo;√™tre capable d\u0026rsquo;√©crire un analyseur de protocole filaire personnalis√©, un lecteur de ce chapitre acquerra une compr√©hension approfondie des divers m√©canismes de mise √† niveau qui ont √©t√© int√©gr√©s au protocole.\nChiffrement bout √† bout Dans ce chapitre, nous examinerons le transport de messages crypt√©s du Lightning Network, parfois appel√© protocole Brontide, qui permet aux pairs d\u0026rsquo;√©tablir une communication crypt√©e de bout en bout, une authentification et une v√©rification de l\u0026rsquo;int√©grit√©.\nUne partie de ce chapitre comprend des d√©tails hautement techniques sur le protocole de chiffrement et les algorithmes de chiffrement utilis√©s dans le transport chiffr√© Lightning. Vous pouvez d√©cider de sauter cette section si vous n\u0026rsquo;√™tes pas int√©ress√© par ces d√©tails.\n","description":"On lit le livre Mastering the Lightning Network (LN) en Direct ! Chapitre 13 - Wire Protocol; Chapitre 14 - Chiffrement bout √† bout","id":3,"section":"blog","tags":["bitcoin","lightning network","mastering the lightning network","live"],"title":"10 - Mastering the Lightning Network - Les messages sur Lightning Network (TLV, e2e encryption)","uri":"https://blocs.fr/blog/mastering-the-lightning-network-10/"},{"content":"Lecture des chapitre 15 et 16 de Mastering the Lightning Network Requ√™te de paiement Dans ce chapitre, nous examinerons les demandes de paiement Lightning, ou, comme on les appelle plus commun√©ment, les factures Lightning.\nVie priv√©e avec LN Dans ce chapitre, nous examinons certains des probl√®mes les plus importants li√©s √† la s√©curit√© et √† la confidentialit√© du Lightning Network. Tout d\u0026rsquo;abord, nous examinerons la confidentialit√©, ce que cela signifie, comment l\u0026rsquo;√©valuer et certaines choses que vous pouvez faire pour prot√©ger votre propre confidentialit√© lorsque vous utilisez le Lightning Network. Ensuite, nous explorerons certaines attaques courantes et techniques d\u0026rsquo;att√©nuation.\n","description":"On lit le livre Mastering the Lightning Network (LN) en Direct ! Chapitre 15 - Requ√™te de paiement; Chapitre 16 - Vie priv√©e avec LN","id":4,"section":"blog","tags":["bitcoin","lightning network","mastering the lightning network","live"],"title":"11 - Mastering the Lightning Network - Informations Paiement et vie priv√©e en vid√©o","uri":"https://blocs.fr/blog/mastering-the-lightning-network-11/"},{"content":"Chapitre final de Mastering the Lightning Network en vid√©o En quelques ann√©es seulement, le Lightning Network est pass√© d\u0026rsquo;un livre blanc √† un r√©seau mondial en pleine croissance. En tant que deuxi√®me couche de Bitcoin, il a tenu sa promesse de paiements rapides, peu co√ªteux et priv√©s. De plus, il a d√©clench√© un tsunami d\u0026rsquo;innovation, car il lib√®re les d√©veloppeurs des contraintes de consensus qui existent dans le d√©veloppement de Bitcoin.\nL\u0026rsquo;innovation dans le Lightning Network se produit √† plusieurs niveaux :\nAu niveau du protocole principal de Bitcoin, fournir l\u0026rsquo;utilisation et la demande de nouveaux opcodes Bitcoin Script, d\u0026rsquo;algorithmes de signature et d\u0026rsquo;optimisations Au niveau du protocole Lightning, avec de nouvelles fonctionnalit√©s d√©ploy√©es rapidement sur l\u0026rsquo;ensemble du r√©seau Au niveau du canal de paiement, avec de nouvelles constructions de canaux et des am√©liorations En tant que fonctionnalit√©s opt-in distinctes d√©ploy√©es de bout en bout par des impl√©mentations ind√©pendantes que les exp√©diteurs et les destinataires peuvent utiliser s\u0026rsquo;ils le souhaitent Avec de nouvelles et passionnantes applications Lightning (LApps) construites au-dessus des clients et des protocoles Voyons comment ces innovations changent Lightning maintenant et dans un avenir proche.\n","description":"Fin du livre et setup d'un serveur Bitcon et Lightning Network avec getumbrel","id":5,"section":"blog","tags":["bitcoin","lightning network","mastering the lightning network","live"],"title":"12 - Mastering the Lightning Network - Chapitre final en vid√©o","uri":"https://blocs.fr/blog/mastering-the-lightning-network-12/"},{"content":"Lecture du chapitre 2 de Mastering the Lightning Network Dans ce chapitre, nous commencerons l√† o√π la plupart des gens commencent lorsqu\u0026rsquo;ils rencontrent le Lightning Network pour la premi√®re fois : choisir un logiciel pour participer √† l\u0026rsquo;√©conomie LN. Nous examinerons les choix de deux utilisateurs qui repr√©sentent un cas d\u0026rsquo;utilisation courant pour le Lightning Network et apprendrons par l\u0026rsquo;exemple. Alice, cliente d\u0026rsquo;un caf√©, utilisera un portefeuille Lightning sur son appareil mobile pour acheter du caf√© au Bob\u0026rsquo;s Cafe. Bob, un commer√ßant, utilisera un n≈ìud Lightning et un portefeuille pour ex√©cuter un syst√®me de point de vente dans son caf√©, afin qu\u0026rsquo;il puisse accepter les paiements sur le Lightning Network.\n","description":"On lit le livre Mastering the Lightning Network (LN) en Direct ! Chapitre 2 - Le commencement","id":6,"section":"blog","tags":["bitcoin","lightning network","mastering the lightning network","live"],"title":"2 - Mastering the Lightning Network - Paiement avec Bitcoin et Lightning Network","uri":"https://blocs.fr/blog/mastering-the-lightning-network-2/"},{"content":"Lecture du chapitre 3 de Mastering the Lightning Network Maintenant que nous avons suivi Alice alors qu\u0026rsquo;elle installait un portefeuille Lightning et achetait un caf√© √† Bob, nous allons regarder sous le capot et d√©baller les diff√©rents composants du Lightning Network impliqu√©s dans ce processus. Ce chapitre donnera une vue d\u0026rsquo;ensemble de haut niveau et n\u0026rsquo;abordera pas tous les d√©tails techniques. Le but est plut√¥t de vous aider √† prendre conscience des concepts et briques de base les plus importants du Lightning Network.\nSi vous avez de l\u0026rsquo;exp√©rience en informatique, en cryptographie, en Bitcoin et en d√©veloppement de protocoles, ce chapitre devrait vous suffire pour pouvoir remplir vous-m√™me les d√©tails de connexion. Si vous √™tes moins exp√©riment√©, ce chapitre vous donnera une vue d\u0026rsquo;ensemble suffisante pour que vous compreniez plus facilement les sp√©cifications formelles du protocole, connues sous le nom de BOLT (Basis of Lightning Technology). Si vous √™tes d√©butant, ce chapitre vous aidera √† mieux comprendre les chapitres techniques du livre.\nNous commencerons par une d√©finition en une phrase de ce qu\u0026rsquo;est le Lightning Network et nous le d√©taillerons dans le reste de ce chapitre.\nLe Lightning Network est un r√©seau peer-to-peer de canaux de paiement mis en ≈ìuvre sous forme de contrats intelligents sur la blockchain Bitcoin ainsi qu\u0026rsquo;un protocole de communication qui d√©finit la mani√®re dont les participants configurent et ex√©cutent ces contrats intelligents.\n","description":"On lit le livre Mastering the Lightning Network (LN) en Direct ! Chapitre 3 - Comment le Lightning Network fonctionne","id":7,"section":"blog","tags":["bitcoin","lightning network","mastering the lightning network","live"],"title":"3 - Mastering the Lightning Network - Transaction d'engagement (commitment tx)","uri":"https://blocs.fr/blog/mastering-the-lightning-network-3/"},{"content":"Lecture du chapitre 4 de Mastering the Lightning Network Comme nous l\u0026rsquo;avons vu dans les chapitres pr√©c√©dents, un n≈ìud Lightning est un syst√®me informatique qui participe au Lightning Network. Le Lightning Network n\u0026rsquo;est pas un produit ou une entreprise ; il s\u0026rsquo;agit d\u0026rsquo;un ensemble de normes ouvertes qui d√©finissent une base d\u0026rsquo;interop√©rabilit√©. En tant que tel, le logiciel de n≈ìud Lightning a √©t√© cr√©√© par diverses entreprises et groupes communautaires. La grande majorit√© des logiciels Lightning sont open source, ce qui signifie que le code source est ouvert et sous licence de mani√®re √† permettre la collaboration, le partage et la participation de la communaut√© au processus de d√©veloppement. De m√™me, les impl√©mentations de n≈ìuds Lightning que nous pr√©senterons dans ce chapitre sont toutes open source et sont d√©velopp√©es en collaboration.\nContrairement √† Bitcoin, o√π la norme est d√©finie par une impl√©mentation de r√©f√©rence dans un logiciel (Bitcoin Core), dans Lightning, la norme est d√©finie par une s√©rie de documents de normes appel√©s Basis of Lightning Technology (BOLT), trouv√©s dans le r√©f√©rentiel lightning-rfc.\nIl n\u0026rsquo;y a pas d\u0026rsquo;impl√©mentation de r√©f√©rence du Lightning Network, mais il existe plusieurs impl√©mentations concurrentes, compatibles BOLT et interop√©rables d√©velopp√©es par diff√©rentes √©quipes et organisations. Les √©quipes qui d√©veloppent des logiciels pour le Lightning Network contribuent √©galement au d√©veloppement et √† l\u0026rsquo;√©volution des normes BOLT.\nUne autre diff√©rence majeure entre le logiciel de n≈ìud Lightning et le logiciel de n≈ìud Bitcoin est que les n≈ìuds Lightning n\u0026rsquo;ont pas besoin de fonctionner en parall√®le avec des r√®gles de consensus et peuvent avoir des fonctionnalit√©s √©tendues au-del√† de la ligne de base des BOLT. Par cons√©quent, diff√©rentes √©quipes peuvent poursuivre diverses fonctionnalit√©s exp√©rimentales qui, si elles r√©ussissent et sont largement d√©ploy√©es, peuvent faire partie des BOLT plus tard.\nDans ce chapitre, vous apprendrez √† configurer chacun des packages logiciels pour les impl√©mentations de n≈ìuds Lightning les plus courantes. Nous les avons pr√©sent√©s par ordre alphab√©tique pour souligner que nous ne pr√©f√©rons ou n\u0026rsquo;approuvons g√©n√©ralement pas l\u0026rsquo;un par rapport √† l\u0026rsquo;autre. Chacun a ses forces et ses faiblesses, et le choix d√©pendra de divers facteurs. Puisqu\u0026rsquo;ils sont d√©velopp√©s dans diff√©rents langages de programmation (par exemple, Go, C, etc.), votre choix peut √©galement d√©pendre de votre niveau de familiarit√© et d\u0026rsquo;expertise avec un langage sp√©cifique et un ensemble d\u0026rsquo;outils de d√©veloppement.\n","description":"On lit le livre Mastering the Lightning Network (LN) en Direct ! Chapitre 4 - Les clients Lightning Network","id":8,"section":"blog","tags":["bitcoin","lightning network","mastering the lightning network","live"],"title":"4 - Mastering the Lightning Network - Cr√©er un r√©seau de n≈ìud Lightning Network","uri":"https://blocs.fr/blog/mastering-the-lightning-network-4/"},{"content":"Lecture du chapitre 5 de Mastering the Lightning Network Apr√®s avoir lu jusqu\u0026rsquo;ici, vous avez probablement configur√© un portefeuille Lightning. Dans ce chapitre, nous allons aller plus loin et configurer un n≈ìud Lightning complet. En plus d\u0026rsquo;en installer un, nous apprendrons √† le faire fonctionner et √† l\u0026rsquo;entretenir dans le temps.\nIl existe de nombreuses raisons pour lesquelles vous pourriez vouloir configurer votre propre n≈ìud Lightning. Ils incluent:\n√ätre un participant actif √† part enti√®re du Lightning Network, et pas seulement un utilisateur final Pour g√©rer une boutique en ligne ou recevoir des revenus via les paiements Lightning Pour gagner des revenus gr√¢ce aux frais de routage Lightning ou en louant la liquidit√© du canal Pour d√©velopper de nouveaux services, applications ou plug-ins pour le Lightning Network Pour augmenter votre confidentialit√© financi√®re tout en utilisant Lightning Pour utiliser certaines applications con√ßues sur Lightning, telles que les applications de messagerie instantan√©e aliment√©es par Lightning Pour la libert√© financi√®re, l\u0026rsquo;ind√©pendance et la souverainet√© Il y a des co√ªts associ√©s √† l\u0026rsquo;ex√©cution d\u0026rsquo;un n≈ìud LN. Vous avez besoin d\u0026rsquo;un ordinateur, d\u0026rsquo;une connexion Internet permanente, de beaucoup d\u0026rsquo;espace disque et de beaucoup de temps ! Les co√ªts d\u0026rsquo;exploitation comprendront les d√©penses d\u0026rsquo;√©lectricit√©.\nMais les comp√©tences que vous apprendrez de cette exp√©rience sont pr√©cieuses et peuvent √©galement √™tre appliqu√©es √† une vari√©t√© d\u0026rsquo;autres t√¢ches.\n","description":"On lit le livre Mastering the Lightning Network (LN) en Direct ! Chapitre 5 - Op√©rer un serveur Lightning Network","id":9,"section":"blog","tags":["bitcoin","lightning network","mastering the lightning network","live"],"title":"5 - Mastering the Lightning Network - Installer un serveur Bitcoin et LN","uri":"https://blocs.fr/blog/mastering-the-lightning-network-5/"},{"content":"Lecture des chapitres 6 et 7 de Mastering the Lightning Network Dans ce chapitre, nous allons plonger dans les canaux de paiement et voir comment ils sont construits. Nous commencerons par le n≈ìud d\u0026rsquo;Alice ouvrant un canal vers le n≈ìud de Bob, en nous appuyant sur les exemples pr√©sent√©s au d√©but de ce livre.\nLes messages √©chang√©s par les n≈ìuds d\u0026rsquo;Alice et de Bob sont d√©finis dans \u0026ldquo;BOLT #2¬†: Peer Protocol for Channel Management\u0026rdquo;. Les transactions cr√©√©es par les n≈ìuds d\u0026rsquo;Alice et de Bob sont d√©finies dans \u0026ldquo;BOLT #3 : Bitcoin Transaction and Script Formats\u0026rdquo;. Dans ce chapitre, nous nous concentrons sur les parties \u0026ldquo;Channel open and close\u0026rdquo; et \u0026ldquo;Channel state machine\u0026rdquo; de l\u0026rsquo;architecture du protocole Lightning, mises en √©vidence par un aper√ßu au centre (couche peer-to-peer) des canaux de paiement dans la suite de protocoles Lightning .\n","description":"On lit le livre Mastering the Lightning Network (LN) en Direct ! Chapitre 6 - Architecture Lightning Network; Chapitre 7 - Les canaux de paiement","id":10,"section":"blog","tags":["bitcoin","lightning network","mastering the lightning network","live"],"title":"6 - Mastering the Lightning Network - Comprendre la commitment transaction","uri":"https://blocs.fr/blog/mastering-the-lightning-network-6/"},{"content":"Lecture du Chapitre 8 de Mastering the Lightning Network Dans ce chapitre, nous verrons enfin comment les canaux de paiement peuvent √™tre connect√©s pour former un r√©seau de canaux de paiement via un processus appel√© routage. Plus pr√©cis√©ment, nous nous int√©resserons √† la premi√®re partie de la couche de routage, le protocole \u0026ldquo;Atomic and trustless multihop contracts\u0026rdquo;. Ceci est mis en √©vidence par un aper√ßu dans la suite de protocoles, illustr√© dans Routage de paiement Atomic dans la suite de protocoles Lightning.\n","description":"On lit le livre Mastering the Lightning Network (LN) en Direct ! Chapitre 8 - Routage dans le canaux de paiment","id":11,"section":"blog","tags":["bitcoin","lightning network","mastering the lightning network","live"],"title":"7 - Mastering the Lightning Network - Routage, secret de paiement et HTLC sur LN","uri":"https://blocs.fr/blog/mastering-the-lightning-network-7/"},{"content":"Lecture des chapitre 10, 11 et 12 de Mastering the Lightning Network Routage en oignon Dans ce chapitre, nous d√©crirons le m√©canisme de routage en oignon du Lightning Network. L\u0026rsquo;invention du routage en oignon pr√©c√®de le Lightning Network de 25 ans ! Le routage en oignon a √©t√© invent√© par des chercheurs de la marine am√©ricaine en tant que protocole de s√©curit√© des communications. Le routage en oignon est le plus c√©l√®bre utilis√© par Tor, la superposition Internet rout√©e en oignon qui permet aux chercheurs, aux militants, aux agents de renseignement et √† tout le monde d\u0026rsquo;utiliser Internet de mani√®re priv√©e et anonyme.\nDans ce chapitre, nous nous int√©ressons √† la partie \u0026ldquo;Source-based onion routing (SPHINX)\u0026rdquo; de l\u0026rsquo;architecture du protocole Lightning, mise en √©vidence par un aper√ßu au centre (couche de routage) du routage Onion dans la suite de protocoles Lightning.\nProtocole de Gossip Dans ce chapitre, nous d√©crirons le protocole de potins du Lightning Network et comment il est utilis√© par les n≈ìuds pour construire et maintenir un graphe de canal. Nous passerons √©galement en revue le m√©canisme d\u0026rsquo;amor√ßage DNS utilis√© pour trouver des pairs avec lesquels \u0026ldquo;comm√©rer\u0026rdquo;.\nLa section \u0026ldquo;Frais de routage et relais Gossip\u0026rdquo; est mise en √©vidence par un aper√ßu couvrant la couche de routage et la couche peer-to-peer du protocole Gossip dans la suite de protocoles Lightning.\nPath Finding La livraison des paiements sur le Lightning Network d√©pend de la recherche d\u0026rsquo;un chemin de l\u0026rsquo;exp√©diteur au destinataire, un processus appel√© recherche de chemin. √âtant donn√© que le routage est effectu√© par l\u0026rsquo;exp√©diteur, l\u0026rsquo;exp√©diteur doit trouver un chemin appropri√© pour atteindre la destination. Ce chemin est ensuite encod√© dans un oignon.\nDans ce chapitre, nous examinerons le probl√®me de la recherche de chemin, comprendrons comment l\u0026rsquo;incertitude sur les √©quilibres des canaux complique ce probl√®me et examinerons comment une impl√©mentation typique de la recherche de chemin tente de le r√©soudre.\n","description":"On lit le livre Mastering the Lightning Network (LN) en Direct ! Chapitre 10 - Routage en oignon; Chapitre 11 - Protocole de Gossip; Chapitre 12 - Path Finding","id":12,"section":"blog","tags":["bitcoin","lightning network","mastering the lightning network","live"],"title":"9 - Mastering the Lightning Network - Onion routing, Gossip protocol et Path Finding","uri":"https://blocs.fr/blog/mastering-the-lightning-network-9/"},{"content":"La cryptomonnaie, la technologie Blockchain, √ßa fait beaucoup parler. Plus rarement pour l\u0026rsquo;innovation technique que la technologie apporte que pour son actualit√© sur les march√©s. Les deux aspects ne sont pas inint√©ressants, d\u0026rsquo;ailleurs l\u0026rsquo;int√©r√™t financier pour la technologie permet aussi de susciter un vif int√©r√™t pour la faire √©voluer. Et la technologie Blockchain √©volue vite.\nC\u0026rsquo;est aujourd\u0026rsquo;hui une manne financi√®re qui s\u0026rsquo;auto-finance. Avec toujours une demande d\u0026rsquo;innovation croissante allant de la DeFi (Decentralized Finance) aux NFTs (jetons non fongibles) qui ont maintenant le vent en poupe.\nVous avez un int√©r√™t pour la technique, alors c\u0026rsquo;est le moment le plus opportun pour se lancer. Nous allons voir dans cet article tous les √©l√©ments importants pour s\u0026rsquo;initier au d√©veloppement Blockchain. C\u0026rsquo;est parti ?\nAfin de faciliter la lecture je vais utiliser le terme \u0026ldquo;Blockchain\u0026rdquo; pour √©voquer toute l\u0026rsquo;innovation autour de la technologie Blockchain.\nL\u0026rsquo;int√©r√™t de l\u0026rsquo;innovation Blockchain Il y a encore quelques ann√©es, et √ßa semble √™tre un poncif de plus en plus surann√©, nous parlions souvent de \u0026ldquo;Blockchain Bullshit\u0026rdquo;. Cette formulation peu racoleuse et √† charge √©mergeait beaucoup avec l\u0026rsquo;arriv√©e de Ethereum dans l\u0026rsquo;√©cosyst√®me en 2015.\nEthereum, l\u0026rsquo;enfant spirituel de Bitcoin et des projets connexes comme Colored Coins (parmi les premiers jets du NFT).\nAujourd\u0026rsquo;hui, les galimatias des gardiens du temple sont moins audibles. De mani√®re concr√®te la Blockchain propose des approches nouvelles voire diruptives si on s\u0026rsquo;int√©resse de pr√®s √† la DeFi par exemple. Selon moi, la disruption √©tait d√©j√† l√† avec Bitcoin, j\u0026rsquo;aime parler d\u0026rsquo;une bo√Æte de Pandore savamment ouverte.\nLa disruption, concept fort usit√© pour √©voquer le n√©ant parfois mais aussi pour soulever l\u0026rsquo;impact fondamental d\u0026rsquo;une innovation. Si la Blockchain a bien disrupt√© un domaine, on pourrait l\u0026rsquo;appeler \u0026ldquo;des contrats et de la confiance\u0026rdquo;.\nVaste monde qui comporte une multitude de cases comme les interactions entre agents √©conomiques, ou la juridiction et la loi. Concr√®tement, l\u0026rsquo;innovation Blockchain apporte un moyen de cr√©er la confiance autour de contrats.\nCela semble bien peu ludique, √ßa manque de fun ! Mais rassurez-vous, on touche √† des couches si profondes que les applications sont encore √† d√©couvrir ou √† approfondir : allant de la cr√©ation d\u0026rsquo;un circuit √©conomique entre le monde r√©el et un jeux vid√©o √† la collection de cartes, √† titre d\u0026rsquo;id√©es.\nDu Web √† la Blockchain, le frontend Entrons maintenant dans ce qui nous int√©resse, la technique.\nEt pour commencer, rien de mieux qu\u0026rsquo;introduire la partie la plus √©vidente et la plus accessible.\nLorsqu\u0026rsquo;on parle de d√©veloppement Blockchain vous allez - quasiment - toujours retrouver une partie visible de l\u0026rsquo;iceberg : le frontend.\nPar exemple il va s\u0026rsquo;agir de faire une interface pour un portefeuille, ou une page pour suivre des transactions. Ou encore mieux, une page pour r√©aliser des contrats !\nToutes ces couches sont largement d√©velopp√©es avec les langages Web (JavaScript / TypeScript / Dart, HTML, CSS).\nM√™me pour faire des applications de bureau ou mobile : Electron pour l\u0026rsquo;application bureau, React Native ou Flutter pour de l\u0026rsquo;application mobile.\nWeb3JS, un premier pas Web3JS, doux nom\u0026hellip; Vous connaissez le Web 2.0, c\u0026rsquo;est celui que vous utilisez tous les jours, c\u0026rsquo;est le Web dynamique avec des sites comme Amazon ou Backmarket pour faire des achats. La Blockchain apporte le Web 3.0, bon c\u0026rsquo;est juste du bab√©lisme technico-commercial. L\u0026rsquo;Internet de la valeur,\n√ßa a plus de caract√®re.\nJe vous parle de Web3JS, c\u0026rsquo;est une solution pour JavaScript (et adapt√©e √† d\u0026rsquo;autres langages).\nCette derni√®re a l\u0026rsquo;int√©r√™t d\u0026rsquo;√™tre largement document√©e et usit√©e.\nSi vous ne savez pas par quoi commencer, Web3JS est votre go to.\nWeb3JS est lab√©lis√©e comme la solution pour les APIs Ethereum. Dans les faits cette librairie peut aller bien au-del√† de Ethereum. C\u0026rsquo;est ce qui va vous permettre de cr√©er le lien entre ce qui se passe dans une blockchain et l\u0026rsquo;affichage sur un site ou une application.\nVoil√† √† quoi ressemble du code avec Web3JS :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 // Connecte Web3 avec un provider par d√©faut. // Un provider est un logiciel qui permet de faire l\u0026#39;interfa√ßage entre le Web3 et // le r√©seau Blockchain (mainnet, testnet, autre...). // En g√©n√©ral le \u0026#34;givenProvider\u0026#34; sera Metamask. Metamask est une extension install√©e // sur le navigateur de l\u0026#39;utilisateur qui joue le r√¥le √† la fois de portefeuille // et de gestionnaire de providers let web3 = new Web3(Web3.givenProvider); // Exemple de cr√©ation et d\u0026#39;envoi d\u0026#39;une transaction web3.eth.sendTransaction({ from: \u0026#39;0xDD135B5D7AC09183C3A975e989a57D65f6c8B54B\u0026#39;, // Adresse vers laquelle envoyer des jetons value: Web3.utils.toWei(1), // Transforme la valeur 1 en unit√© Wei }) .once(\u0026#39;sending\u0026#39;, function(payload){ /* La transaction est en cours d\u0026#39;envoi */ }) .once(\u0026#39;sent\u0026#39;, function(payload){ /* La transaction a √©t√© envoy√©e au provider */ }) .once(\u0026#39;transactionHash\u0026#39;, function(hash){ /* Le provider a re√ßu la transaction et a renvoy√© son identifiant */ }) .once(\u0026#39;receipt\u0026#39;, function(receipt){ /* Re√ßu de la transaction, cela signifie qu\u0026#39;elle est consid√©r√©e par le r√©seau en but de la publier dans la blockchain */ }) .on(\u0026#39;confirmation\u0026#39;, function(confNumber, receipt, latestBlockHash){ /** La transaction est maintenant inscrite dans la blockchain. La confirmation est d√©clench√©e pour chaque nouveau bloc publi√© apr√®s le bloc comportant cette transaction **/ }) .on(\u0026#39;error\u0026#39;, function(error){ /* Oops, y\u0026#39;a eu une erreur */ }) .then(function(receipt){ /* La transaction est maintenant inscrite dans la blockchain */ }); Binance Smart Chain (BSC) est un r√©seau lanc√© par la fameuse\nplateforme Binance. Ce dernier √©tant repris de Ethereum peut fonctionner avec Web3JS.\nWeb3 de mani√®re g√©n√©rale est une librairie qui permet de faire le dialogue entre une blockchain\net une application, qu\u0026rsquo;elle soit un client ou un serveur.\nPar o√π commencer ? Si vous n\u0026rsquo;avez aucune notion du d√©veloppement Web, alors commencez par l√† ! Vouloir directement faire du d√©veloppement Blockchain en frontend va cr√©er une confusion qui vous ralentira.\nUne excellente ressource fran√ßaise sont les cours gratuits de OpenClassroom.\nPour s\u0026rsquo;initier concr√®tement lancez-vous sur un projet faisant usage de la Blockchain, par exemple une page qui permet de faire des transactions. Pour faire cela vous n\u0026rsquo;aurez pas besoin de faire autre chose que du d√©veloppement frontend. Web3JS et Metamask seront vos outils principaux.\nL\u0026rsquo;arri√®re sc√®ne de la Blockchain, le backend Initialement, l\u0026rsquo;innovation Blockchain arriv√©e avec Bitcoin est un projet majoritairement backend. Le gros du travail sur Bitcoin est son protocole pair-√†-pair. La petite partie frontend est le portefeuille Bitcoin Core d√©velopp√© en C++ avec Qt (Bitcoin Qt √©tait son nom encore en 2013).\nEthereum est aussi un projet o√π la composante dominante est le protocole et sa machine virtuelle (EVM). Ethereum a cependant apport√© un nouveau pan qui peinait √† √©merger avec Bitcoin pour des raisons techniques.\nLa partie backend dans le d√©veloppement Blockchain touche √† plusieurs couches fondamentalement diff√©rentes.\nChoix 1 : Le d√©veloppement de protocole On va s\u0026rsquo;astreindre de reprendre la d√©finition m√™me de \u0026ldquo;protocole\u0026rdquo;. C\u0026rsquo;est plus int√©ressant de se borner √† ce qu\u0026rsquo;est un protocole autour de la technologie Blockchain.\nD√©velopper un protocole revient √† d√©velopper sa Blockchain. C\u0026rsquo;est l\u0026rsquo;acte de d√©finir des r√®gles de comportements dans un r√©seau d√©centralis√©. C\u0026rsquo;est la partie la moins √©vidente, pour cause faire un protocole demande une ing√©nierie pouss√©e. C\u0026rsquo;est un long travail de conception.\nC\u0026rsquo;est un domaine d\u0026rsquo;expertise qui a relativement peu de demande, d√©velopper son propre protocole demande un investissement cons√©quent pour un gain mod√©r√©. D\u0026rsquo;autres approches sont souvent plus abordables. Elles sont √©voqu√©es plus bas.\nPar o√π commencer ? Pour s\u0026rsquo;initier √† cette partie il est primordial d\u0026rsquo;avoir une bonne exp√©rience sur un langage compil√© comme Rust, C++ ou Golang, pas de chapelle ce n\u0026rsquo;est qu\u0026rsquo;une liste non exhaustive.\nIl est possible de faire un protocole Blockchain avec un langage interpr√©t√© comme JavaScript et le soft NodeJS. Lisk l\u0026rsquo;ont fait par exemple.\nVous pouvez aussi reprendre la source d\u0026rsquo;un protocole d√©j√† d√©velopp√©, changer quelques r√®gles dans le code source, et le publier. On parle √† ce moment de fork. C\u0026rsquo;est ce que BCH ont fait avec Bitcoin Core, ou Dogecoin avec Litecoin qui lui est un fork de Bitcoin Core, ou Binance Smart Chain avec Ethereum.\nChoix 2 : Le d√©veloppement de contrats intelligents L√† on commence √† entrer dans ce qui est fortement demand√© dans le march√© des comp√©tences en d√©veloppement Blockchain.\nJe vous √©voquais plus t√¥t que l√† o√π la technologie Blockchain est disruptive, c\u0026rsquo;est autour des contrats et de la confiance entre agents √©conomiques. Eh bien\u0026hellip; L\u0026rsquo;innovation Blockchain va avec les contrats intelligents.\nSimplement dit, le contrat intelligent est un programme dont l\u0026rsquo;ex√©cution est connue et autonome. Elle est Connue car c\u0026rsquo;est un programme dont le code source est accessible √† quiconque.\nImaginez deux acteurs dans une op√©ration immobili√®re. Le cessionnaire Tom, et l\u0026rsquo;acqu√©reuse Ad√®le. Les deux associent leur √©change √† un contrat intelligent. √Ä la signature par les deux acteurs, le contrat ex√©cute une passation de la propri√©t√© √† Ad√®le et un envoi des fonds √† Tom est automatiquement ex√©cut√©. Sans ces deux signatures, rien ne se passe. On pourrait √©tendre avec\nune histoire de d√©lai avant mise √† terme, etc. Vous avez saisi l\u0026rsquo;id√©e.\nLes possibilit√©s d\u0026rsquo;un contrat intelligent sont ind√©nombrables puisque c\u0026rsquo;est un programme que vous d√©veloppez. En g√©n√©ral, n\u0026rsquo;importe quel secteur impliquant plusieurs acteurs qui ont besoin de confiance pourraient trouver un int√©r√™t dans le contrat intelligent.\nC√¥t√© d√©veloppement il existe tout un univers mais une solution se d√©gage largement aujourd\u0026rsquo;hui. C\u0026rsquo;est Ethereum avec son langage Solidity.\nSolidity est un langage qui permet simplement de d√©velopper des contrats intelligents. C\u0026rsquo;est un langage typ√© qui reprend des principes de la programmation orient√©e objet comme Java.\nPar o√π commencer ? Vous pouvez d√®s maintenant vous amuser √† faire des contrats intelligent avec l\u0026rsquo;√©diteur Web Remix. Cela peut √™tre d√©routant au premier abord, en s\u0026rsquo;appuyant avec la documentation Remix et Solidity vous pouvez commencer √† d√©couvrir.\nUn √©minent livre complet a √©t√© √©crit par l\u0026rsquo;in√©narrable Andreas M. Antonopoulos avec Gavin Wood : Mastering Ethereum.\nCe livre est en prix libre mais sa version fran√ßaise n\u0026rsquo;est pas trouvable sur le Web. C\u0026rsquo;est un contenu parfait pour cerner les tenants et les aboutissants d\u0026rsquo;Ethereum, n√©anmoins il manque en pragmatisme pour gagner en comp√©tences rapidement.\nChoix 3 : Le d√©veloppement de services connect√©s √† un r√©seau Blockchain C\u0026rsquo;est l\u0026rsquo;un des moins √©voqu√©s pourtant la demande pour ce genre de comp√©tences est aussi importante que le d√©veloppement de contrats. Ce genre de d√©veloppement est plus proche des solutions classiques comme faire une API pour un service.\nDans un r√©seau Blockchain beaucoup d\u0026rsquo;informations circulent, elles sont toutes publiques par d√©finition, si on se tient √† une Blockchain publique.\nDes services peuvent avoir un besoin d\u0026rsquo;exploiter ces informations dans leur infrastructure. Par exemple, le cas typique sont les places de march√© dans la cryptomonnaie. Ces derni√®res g√®rent des flux de transactions sur diff√©rentes cryptomonnaies. Pour chaque, le serveur de ces places de march√© ont un service qui consulte les informations sur les diff√©rentes\nblockchains.\nCette partie est souvent associ√©e au d√©veloppement de contrats intelligents. Dans la grande majorit√© des cas, apr√®s le d√©veloppement d\u0026rsquo;un contrat intelligent, on souhaite tracer dans un serveur certaines informations pour avoir un suivi. Par exemple, il est possible de d√©clencher une action en temps r√©el lorsqu\u0026rsquo;une transaction est ex√©cut√©e dans le r√©seau Blockchain avec WebSocket.\nJe vous √©voquais que Web3JS poss√®de des librairies aussi pour d\u0026rsquo;autres langages dans le but lire des informations sur Ethereum.\nJe vous montre un exemple de code comment√© sur Golang avec go-web3 :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 package main import ( \u0026#34;fmt\u0026#34; \u0026#34;github.com/umbracle/go-web3/wallet\u0026#34; web3 \u0026#34;github.com/umbracle/go-web3\u0026#34; \u0026#34;github.com/umbracle/go-web3/jsonrpc\u0026#34; \u0026#34;math/big\u0026#34; ) func main() { // Connexion √† un r√©seau blockchain local // Ici localhost:7545 est un provider JSONRPC client, err := jsonrpc.NewClient(\u0026#34;http://localhost:7545\u0026#34;) if err != nil { panic(err) } // On g√©n√®re un nouveau portefeuille, la cl√© est une cl√© priv√©e key, _ := wallet.GenerateKey() to := web3.Address{0x1} transferVal := web3.Ether(1) // Envoi de 1 Ether vers l\u0026#39;adresse 0x1 txn := \u0026amp;web3.Transaction{ To: \u0026amp;to, Value: transferVal, Gas: 100000, } // Signature de la transaction signer := wallet.NewEIP155Signer(chainID) txn, _ = signer.SignTx(txn, key) // Envoi de la transaction data := txn.MarshalRLP() hash, _ := c.Eth().SendRawTransaction(data) } Par o√π commencer ? Le plus simple est de lancer votre projet et exploiter Ethereum qui a un nombre cons√©quent de librairies. Web3 est s√ªrement disponible pour votre langage favoris.\nCommencez par lancer votre Blockchain Ethereum locale avec Geth ou Ganache. Avec cette derni√®re, vous serez capable de faire une API qui r√©cup√®re les informations.\nPar exemple, vous pouvez faire un service qui se connecte √† votre Blockchain locale puis qui r√©agit √† chaque transaction via le WebSocket.\nConclusion Vous aurez compris, j\u0026rsquo;axe l\u0026rsquo;article vers le plus pratique et le plus probant dans la qu√™te de travailler dans ce domaine et cr√©er de la valeur.\nEn plus de d√©velopper des comp√©tences pour r√©aliser vos projets Blockchain, un tel bagage ouvre des portes √† des m√©tiers divers. Cela peut passer par de l\u0026rsquo;encadrement de projets pour des entreprises n√©cessitant d\u0026rsquo;une expertise √† de l\u0026rsquo;audit de projets Blockchain.\nOn pourrait faire le tour de l\u0026rsquo;√©cosyst√®me, √©voquer plus en profondeur les projets tout autant int√©ressants comme Bitcoin, Cardano ou Algorand. Le bestiaire est incommensurable et c\u0026rsquo;est preuve de bonne sant√©, la vie grouille.\nEthereum est donc aujourd\u0026rsquo;hui l\u0026rsquo;√©cosyst√®me le plus complet avec un historique fort. On compte parmi les grands tournants : les ICO avec ERC20, CryptoKitties et les NFT, ou encore la DeFi avec Uniswap.\n","description":"La cryptomonnaie, la technologie Blockchain, √ßa fait beaucoup parler. Plus rarement pour l'innovation technique que la technologie apporte que pour son actualit√© sur les march√©s. Les deux aspects ne sont pas inint√©ressants, d'ailleurs l'int√©r√™t financier pour la technologie permet aussi de susciter un vif int√©r√™t pour la faire √©voluer. Et la technologie Blockchain √©volue vite.","id":13,"section":"blog","tags":["bitcoin","lightning network","mastering the lightning network","live"],"title":"Le d√©veloppement Blockchain, par o√π commencer ?","uri":"https://blocs.fr/blog/le-developpement-blockchain-par-ou-commencer/"},{"content":"Vous avez un n≈ìud Bitcoin et Lightning Network, vous participez √† la d√©centralisation du r√©seau, bravo ! Cependant il r√©side un point noir, en particulier si votre noeud est localis√© chez vous ou votre bureau\u0026hellip; En connaissant votre adresse IP, publi√©e par le n≈ìud, il est possible de vous localiser. C\u0026rsquo;est sensible dans le cas o√π vous y mettez pour l\u0026rsquo;√©quivalent de milliers d\u0026rsquo;euros en bitcoins, une personne mal intentionn√©e pourrait vous pirater voire vous cambrioler. Heureusement, gr√¢ce √† Tor vous allez pouvoir cacher tout cela en un temps record\nCe guide est bas√© sur une installation avec bitcoind et lnd sur un Debian 9 Stretch Lite, sur n\u0026rsquo;importe quelle version Debian 9 ce guide sera fonctionnel.\nQu\u0026rsquo;est ce que Tor ? Pourquoi Tor ? Vous connaissez peut-√™tre Tor indirectement en citant le ¬´ Deep Web ¬ª, mais c\u0026rsquo;est bien plus que cela. Tor est un logiciel libre qui permet de brouiller les communications Internet (TCP) en construisant un circuit de routage IP. En d\u0026rsquo;autres termes un √©metteur communique avec un r√©cepteur en passant par un chemin incompr√©hensible, la communication devient intra√ßable d\u0026rsquo;un point de vue ext√©rieur.\nAutant vous dire que Tor est la solution propice √† anonymiser les communications de votre n≈ìud Bitcoin.\nTor tord le chemin.\nInstaller et activer Tor On va travailler avec le terminale de commandes, si vous avez la version Lite, vous n\u0026rsquo;avez que cela sous la main en principe.\nInstaller Tor se fait avec la commande apt update \u0026amp;\u0026amp; apt install tor, on met √† jour apt pour √™tre s√ªr de t√©l√©charger la derni√®re version des d√©pendances.\nUne fois install√© activez le service en tapant systemctl enable tor et systemctl start tor.\nConfigurer Tor On a install√© Tor, nous allons le configurer en pr√©vision des usages avec lnd et bitcoind.\nLa configuration de Tor se trouve dans le chemin /etc/tor/torrc o√π torrc est un fichier de configuration. Connectez-vous en root pour le modifier avec su root, puis tapez vim /etc/tor/torrc ou nano /etc/tor/torrc si vous pr√©f√©rez nano pour √©diter un fichier. Je vous montre les configurations √† d√©commenter (en retirant le # au d√©but de chaque ligne concern√©e).\n1 2 3 4 5 6 7 ControlPort 9051 CookieAuthentication 1 HiddenServiceDir /var/lib/tor/bitcoin/ # Emplacement du dossier de votre routage HiddenServicePort 8333 127.0.0.1:8333 # Routage bitcoin (8333 est le port mainnet de Bitcoin) HiddenServicePort 8332 [::1]:8332 # Routage bitcoin ipv6 Modifications faites, tapez systemctl restart tor pour red√©marrer Tor afin qu\u0026rsquo;il prenne en compte vos modifications.\nEt enfin pour voir si Tor est fonctionnel, observez le avec la commande systemctl status tor@default, vous devriez avec quelque chose comme suit :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 root@raspberry:~ $ systemctl status tor ‚óè tor@default.service - Anonymizing overlay network for TCP Loaded: loaded (/lib/systemd/system/tor@default.service; static; vendor preset: enabled) Active: active (running) since Wed 2020-01-01 10:09:09 UTC; 7h ago Process: 1805 ExecReload=/bin/kill -HUP ${MAINPID} (code=exited, status=0/SUCCESS) Process: 2259 ExecStartPre=/usr/bin/tor --defaults-torrc /usr/share/tor/tor-service-defaults-torrc -f /etc/tor/torrc --RunAsDaemon 0 --verify-config (code=exited, status=0/SUCCESS Process: 2257 ExecStartPre=/usr/bin/install -Z -m 02755 -o debian-tor -g debian-tor -d /var/run/tor (code=exited, status=0/SUCCESS) Main PID: 2262 (tor) CGroup: /system.slice/system-tor.slice/tor@default.service ‚îî‚îÄ2262 /usr/bin/tor --defaults-torrc /usr/share/tor/tor-service-defaults-torrc -f /etc/tor/torrc --RunAsDaemon 0 Jan 01 10:09:05 raspberrypi tor[2259]: Jan 01 10:09:05.113 [notice] Read configuration file /usr/share/tor/tor-service-defaults-torrc. Jan 01 10:09:05 raspberrypi tor[2259]: Jan 01 10:09:05.113 [notice] Read configuration file /etc/tor/torrc. Jan 01 10:09:05 raspberrypi tor[2259]: Configuration was valid Jan 01 10:09:05 raspberrypi tor[2262]: Jan 01 10:09:05.979 [notice] Tor 0.2.9.16 (git-9ef571339967c1e5) running on Linux with Libevent 2.0.21-stable, OpenSSL 1.1.0j and Zlib 1.2.8. Jan 01 10:09:05 raspberrypi tor[2262]: Jan 01 10:09:05.979 [notice] Tor can\u0026#39;t help you if you use it wrong! Learn how to be safe at https://www.torproject.org/download/download#warn Jan 01 10:09:05 raspberrypi tor[2262]: Jan 01 10:09:05.979 [notice] Read configuration file /usr/share/tor/tor-service-defaults-torrc. Jan 01 10:09:05 raspberrypi tor[2262]: Jan 01 10:09:05.979 [notice] Read configuration file /etc/tor/torrc. Jan 01 10:09:05 raspberrypi tor[2262]: Jan 01 10:09:05.995 [notice] Opening Socks listener on 127.0.0.1:9050 Jan 01 10:09:05 raspberrypi tor[2262]: Jan 01 10:09:05.995 [notice] Opening Control listener on 127.0.0.1:9051 Jan 01 10:09:09 raspberrypi systemd[1]: Started Anonymizing overlay network for TCP. Si votre service Tor n\u0026rsquo;est pas actif, vous trouverez des informations en tapant journalctl -u tor@default.\nConnecter votre Bitcoin √† Tor Cette configuration fonctionne avec bitcoind en version 0.19.0.1, dans mon n≈ìud j\u0026rsquo;utilise l\u0026rsquo;utilisateur bitcoin pour g√©rer ce service, je vous d√©conseille d\u0026rsquo;utiliser root.\nAvant de commencer vous allez devoir chercher votre nom de domaine Tor en tapant ce qui suit :\n1 2 bitcoin@raspberry:~ $ cat /var/lib/tor/bitcoin/hostname blocsiq5epwbye47.onion blocsiq5epwbye47.onion est mon nom de domaine (hostname).\nSi vous voulez savoir comment avoir un domaine qui commence par un mot ou pseudo comme ici \u0026ldquo;blocs\u0026rdquo;, laissez un commentaire plus bas.\nPour configurer Bitcoin vous allez modifier .bitcoin/bitcoin.conf avec les informations suivantes :\n# Vos configurations # ... # Ajoutez ou modifiez ce qui suit proxy=127.0.0.1:9050 # Proxy sur le service Tor externalip=blocsiq5epwbye47.onion # √† remplacer par votre hostname, c\u0026#39;est l\u0026#39;adresse affich√©e aux autres n≈ìuds du r√©seau Red√©marrez Bitcoin en tapant bitcoin-cli stop \u0026amp;\u0026amp; bitcoind.\nF√©licitations votre n≈ìud est d√©sormais sur le r√©seau Tor. Il ne vous reste plus qu\u0026rsquo;√† faire de m√™me sur LND afin d\u0026rsquo;anonymiser nos √©changes sur le r√©seau Lightning Network.\nConnecter votre Lightning √† Tor La configuration de lnd est un peu diff√©rente de Bitcoin. Sans plus attendre ouvrez .lnd/lnd.conf et ajoutez ces diff√©rentes configurations :\n# Vos configurations # ... # Ajoutez ou modifiez ce qui suit listen=localhost # Important pour √©viter d\u0026#39;ouvrir votre IP externalip=blocsiq5epwbye47.onion # Votre hostname Tor nat=false # A d√©sactiver pour √©viter d\u0026#39;associer votre adresse IP √† votre n≈ìud [tor] tor.active=1 tor.socks=9050 tor.privatekeypath=/var/lib/tor/bitcoin/private_key Red√©marrez votre lnd en tapant lncli stop et lnd pour lancer le service.\nIl se peut que vous ayez une erreur de droit relative √† Tor. Dans la partie suivante on voit comment la solutionner.\nG√©rer les droits avec Tor Vous devez donner acc√®s √† diff√©rents fichiers de Tor √† l\u0026rsquo;utilisateur qui g√®re votre lnd, dans mon cas mon utilisateur est bitcoin.\nTapez la commande chmod -R 0750 /var/lib/tor. Cela va donner acc√®s en lecture au groupe debian-tor sur le dossier /var/lib/tor.\nMaintenant ajoutez l\u0026rsquo;utilisateur bitcoin au groupe debian-tor en tapant usermod -a -G debian-tor bitcoin en √©tant connect√© sur su root.\nTor est bien con√ßu, il ne nous permet pas d\u0026rsquo;appliquer les droits qu\u0026rsquo;on veut √† ses dossiers pour limiter de trop les ouvrir. Tapez journalctl -u tor@default, si les derni√®res lignes parlent d\u0026rsquo;une erreur, cela signifie que votre Tor n\u0026rsquo;est plus en route. C\u0026rsquo;est un g√©n√©ral d√ª √† une mauvaise configuration (mauvais droits sur les dossiers relatifs √† Tor, mauvaises configuration dans torrc, etc.)\nA partir d\u0026rsquo;ici votre n≈ìud est connect√© au r√©seau en passant par Tor ! Il est toujours int√©ressant d\u0026rsquo;observer si tout est bien cadr√© par Tor afin de ne pas avoir de fuite d\u0026rsquo;IP. Tapez la commande du terminal ci-dessous :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 root@raspberry:~ $ netstat -tulpn (Not all processes could be identified, non-owned process info will not be shown, you would have to be root to see it all.) Active Internet connections (only servers) Proto Recv-Q Send-Q Local Address Foreign Address State PID/Program name tcp 0 0 127.0.0.1:9735 0.0.0.0:* LISTEN 2043/lnd tcp 0 0 127.0.0.1:28332 0.0.0.0:* LISTEN 653/bitcoind tcp 0 0 127.0.0.1:8332 0.0.0.0:* LISTEN 653/bitcoind tcp 0 0 127.0.0.1:8333 0.0.0.0:* LISTEN 653/bitcoind tcp 0 0 127.0.0.1:28333 0.0.0.0:* LISTEN 653/bitcoind tcp 0 0 127.0.0.1:8080 0.0.0.0:* LISTEN 2043/lnd tcp 0 0 0.0.0.0:22 0.0.0.0:* LISTEN - tcp 0 0 127.0.0.1:10009 0.0.0.0:* LISTEN 2043/lnd tcp 0 0 127.0.0.1:9050 0.0.0.0:* LISTEN - tcp 0 0 127.0.0.1:9051 0.0.0.0:* LISTEN - tcp6 0 0 ::1:8332 :::* LISTEN 653/bitcoind tcp6 0 0 :::80 :::* LISTEN - tcp6 0 0 :::22 :::* LISTEN - udp 0 0 0.0.0.0:48138 0.0.0.0:* - udp 0 0 0.0.0.0:68 0.0.0.0:* - udp 0 0 0.0.0.0:5353 0.0.0.0:* - udp6 0 0 :::45175 :::* - udp6 0 0 :::5353 :::* - Nous, ce qui nous int√©resse ce sont bitcoind et lnd. On va passer tous les ports d\u0026rsquo;√©coute en revue et comprendre si oui ou non ils sont \u0026ldquo;torrifi√©s\u0026rdquo; :\nlnd 9735 : C\u0026rsquo;est le port de LND, \u0026ldquo;torrifi√©e\u0026rdquo; avec le cl√© priv√©e de votre Tor ; bitcoind 28332 : C\u0026rsquo;est le port ZMQ de Bitcoin, il sert √† la configuration et n\u0026rsquo;est pas distribu√© ; bitcoind 8333 : C\u0026rsquo;est le port de bitcoind qui est cach√© via Tor (HiddenServicePort dans /etc/tor/torrc) ; bitcoind 8332 : C\u0026rsquo;est le port JSON-RPC de bitcoind, nul besoin de le cacher avec Tor si vous ne le distribuez pas ; bitcoind 8332 IPV6 : C\u0026rsquo;est le port ipv6 de bitcoind qui est cach√© via Tor (HiddenServicePort dans /etc/tor/torrc) ; Enfin pour voir si lnd a bien consid√©r√© vos modifications, tapez lncli getinfo, vous obtenez un JSON comme suit :\n{ \u0026#34;version\u0026#34;: \u0026#34;0.8.0-beta commit=v0.8.1-beta\u0026#34;, \u0026#34;identity_pubkey\u0026#34;: \u0026#34;03a2c34daf010b3501daf704b5a321e82e1631421b7ffa18dd49014967eda82dc9\u0026#34;, \u0026#34;alias\u0026#34;: \u0026#34;blocs.fr\u0026#34;, \u0026#34;color\u0026#34;: \u0026#34;#00aaff\u0026#34;, \u0026#34;num_pending_channels\u0026#34;: 0, \u0026#34;num_active_channels\u0026#34;: 6, \u0026#34;num_inactive_channels\u0026#34;: 0, \u0026#34;num_peers\u0026#34;: 6, \u0026#34;block_height\u0026#34;: 610817, \u0026#34;block_hash\u0026#34;: \u0026#34;0000000000000000000ff1cf20075afd0df2a52288edd20a7d1cd8a51ca3e32a\u0026#34;, \u0026#34;best_header_timestamp\u0026#34;: 1577900732, \u0026#34;synced_to_chain\u0026#34;: true, \u0026#34;synced_to_graph\u0026#34;: true, \u0026#34;testnet\u0026#34;: false, \u0026#34;chains\u0026#34;: [ { \u0026#34;chain\u0026#34;: \u0026#34;bitcoin\u0026#34;, \u0026#34;network\u0026#34;: \u0026#34;mainnet\u0026#34; } ], \u0026#34;uris\u0026#34;: [ \u0026#34;03a2c34daf010b3501daf704b5a321e82e1631421b7ffa18dd49014967eda82dc9@blocsiq5epwbye47.onion:9735\u0026#34; ] } Int√©ressez vous √† la partie d\u0026rsquo;en bas, \u0026quot;uris\u0026quot;, qui est une liste des adresses distribu√©es dans le r√©seau. Ici je n\u0026rsquo;ai qu\u0026rsquo;une adresse qui est un .onion, voir ce qui suit le \u0026ldquo;@\u0026rdquo;. La partie de gauche est la cl√© publique de mon lnd.\n.onion est un nom de domaine exclusif au routage en oignon comme le fait Tor. Comme vous pouvez l\u0026rsquo;imaginer, c\u0026rsquo;est r√©ellement une r√©f√©rence √† la plante. Cela vient du routage qui recouvre le message de plusieurs couches, comme un oignon o√π le coeur est enrob√© de plusieurs couches. MrBidouille.\nV√©rifications faites, vous √™tes cach√©s, bravo !\nMerci √† Clint pour ses infos sur Tor et JohnOnChain pour m\u0026rsquo;avoir aid√© √† la configuration de lnd avec Tor.\n","description":"Vous avez un n≈ìud Bitcoin et Lightning Network, vous participez √† la d√©centralisation du r√©seau, bravo ! Cependant il r√©side un point noir, en particulier si votre noeud est localis√© chez vous ou votre bureau... En connaissant votre adresse IP, publi√©e par le noeud, il est possible de vous localiser. On rem√©die √† cela avec Tor.","id":14,"section":"blog","tags":["bitcoin","debian","bitcoin-cli","tor"],"title":"Servir Bitcoin et Lightning Network en √©tant anonyme avec Tor","uri":"https://blocs.fr/blog/bitcoin-et-lightning-anonyme-avec-tor/"},{"content":"Mat√©riels requis Avant tout il va vous falloir du mat√©riel puisqu\u0026rsquo;un n≈ìud est un serveur qui fourni un service. Ne vous inqui√©tez pas vous n\u0026rsquo;aurez pas besoin d\u0026rsquo;un serveur co√ªteux, bruyant et consommateur. Vous aurez besoin d\u0026rsquo;un nano-ordinateur, c\u0026rsquo;est petit, c\u0026rsquo;est silencieux et la consommation est basse, voil√† la liste :\nRaspberry Pi 3 : ce mat√©riel est peu co√ªteux et a les capacit√©s optimales pour avoir un n≈ìud LN efficace. Veillez √† acqu√©rir un pack contenant le Raspberry Pi, l\u0026rsquo;alimentation secteur et une carte SSD. Ces √©l√©ments sont compris dans le pack officiel ; Un disque dur SSD de 500go ou plus : vous devrez t√©l√©charger la blockchain de Bitcoin qui fait plus de 200 giga octects. Je recommande un disque dur SSD (√©lectronique) √† pr√©f√©rer au disque dur m√©canique qui a une moins bonne tol√©rance √† la panne. J\u0026rsquo;ai personnellement un disque dur m√©canique ; Un √©cran port HDMI : ce sera n√©cessaire pour faire les premi√®res configurations ; Un clavier USB : ce sera √©galement n√©cessaire pour faire les premi√®res configurations ; Un c√¢ble RJ45 : ce sera pour connecter votre Raspberry Pi √† Internet. Il est possible d\u0026rsquo;avoir une connexion wifi en y connectant une antenne ou un dongle. Cependant je d√©conseille cette approche pour des raisons de s√©curit√© et √©galement pour √©viter les contraintes d\u0026rsquo;installation de drivers pas toujours disponibles sur les distributions Linux ; Installer Raspian Stretch Lite Cette √©tape est optionnelle mais recommand√©e.\nAvant d\u0026rsquo;entamer la configuration de votre Raspberry installez un nouveau syst√®me d\u0026rsquo;exploitation plus l√©ger que celui install√© par d√©faut : c\u0026rsquo;est Raspian Stretch Lite.\nStretch Lite est un syst√®me d\u0026rsquo;exploitation dans le but d\u0026rsquo;optimiser la consommation de ressources sur notre syst√®me.\nInstallez Raspian Stretch Lite sur la carte SD fournie avec le Raspberry Pi. Il vous faudra la formater. Avec Windows le logiciel Etcher est d\u0026rsquo;une grande aide. Sur Mac et distributions Linux pr√©f√©rez la ligne de commande.\nConfigurer le Raspberry Pi Ici je vais consid√©rer que vous √™tes sur Raspian Stretch Lite, mais pas d\u0026rsquo;inqui√©tude vous pouvez tout suivre avec le syst√®me d\u0026rsquo;origine, veillez √† ouvrir le terminal car nous allons travailler en ligne de commande, rien de mieux pour se familiariser avec l\u0026rsquo;environnement Linux.\nLes acc√®s par d√©faut sont les suivants\n1 2 raspberry login: pi Password: raspberry Si vous n\u0026rsquo;√™tes pas habitu√© au terminal Debian, en tapant votre mot de passe rien ne s\u0026rsquo;affiche, c\u0026rsquo;est tout √† faire normal, ce que vous tapez est quand m√™me pris en compte. C\u0026rsquo;est une protection au m√™me titre que les √©toiles qu\u0026rsquo;on voit sur les formulaires web.\nActiver et configurer SSH Actuellement vous travaillez avec un √©cran et un clavier branch√©s sur votre petit Rapsberry\u0026hellip; Et c\u0026rsquo;est peut-√™tre pas pratique. J\u0026rsquo;ai une bonne nouvelle, on va pouvoir faire en sorte de g√©rer votre syst√®me sans avoir besoin d\u0026rsquo;y acc√©der physiquement. Vous allez le contr√¥ler √† distance gr√¢ce au protocole SSH !\nSSH signifie Secure Shell, c\u0026rsquo;est un protocole de r√©seau ing√©nieux qui permet l\u0026rsquo;ex√©cution de commandes √† distance en b√©n√©ficiant de canaux crypt√©s. Il est possible d\u0026rsquo;utiliser SSH au sein d\u0026rsquo;un r√©seau local mais aussi en passant par Internet par exemple. Sachez que par d√©faut la configuration du SSH dans Raspian permet l\u0026rsquo;authentification par login et mot de passe.\nPar d√©faut la connexion SSH est d√©sactiv√©e pour des raisons de s√©curit√©, alors activez le en tapant ce qui suit\n1 pi@raspberrypi:~ $ sudo raspi-config Un menu graphique peu charmant s\u0026rsquo;ouvre, s√©lectionnez Interfacing Options (Configure connections to peripherals) puis ssh (Enable or disable ssh server) ensuite s√©lectionnez Yes, OK et enfin Finish.\nRevenez sur le terminal et red√©marrez le service ssh\n1 pi@raspberrypi:~ $ sudo systemctl restart ssh Votre SSH est maintenant activ√©.\n√Ä la bonheur, vous pouvez d√®s maintenant vous connecter √† votre Raspberry √† distance, depuis un autre ordinateur. D\u0026rsquo;abord r√©cup√©rez l\u0026rsquo;adresse IP de votre Raspberry vous en aurez besoin, utilisez la commande ifconfig pour l\u0026rsquo;afficher. Voil√† un extrait de mon ifconfig\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 pi@raspberrypi:~ $ ifconfig eth0: flags=4163\u0026lt;UP,BROADCAST,RUNNING,MULTICAST\u0026gt;; mtu 1500 inet 192.168.1.4 netmask 255.255.255.0 broadcast 192.168.1.255 inet6 fe80::10e0:8a76:4fe4:c3c2 prefixlen 64 scopeid 0x20 ether b8:27:eb:6a:3a:d9 txqueuelen 1000 (Ethernet) RX packets 169483183 bytes 168117311599 (156.5 GiB) RX errors 2 dropped 45841 overruns 0 frame 0 TX packets 132373249 bytes 17426498366 (16.2 GiB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 lo: flags=73\u0026lt;UP,LOOPBACK,RUNNING\u0026gt;; mtu 65536 inet 127.0.0.1 netmask 255.0.0.0 inet6 ::1 prefixlen 128 scopeid 0x10 loop txqueuelen 1000 (Local Loopback) RX packets 39066126 bytes 154986068081 (144.3 GiB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 39066126 bytes 154986068081 (144.3 GiB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 wlan0: flags=4099\u0026lt;UP,BROADCAST,MULTICAST\u0026gt;; mtu 1500 ether b8:27:eb:3f:6f:8c txqueuelen 1000 (Ethernet) RX packets 0 bytes 0 (0.0 B) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 0 bytes 0 (0.0 B) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 Voyez en surlign√© mon adresse IP est 192.168.1.42 ‚Äî puisque c\u0026rsquo;est la r√©ponse √† tous les myst√®res de l\u0026rsquo;univers. Vous la trouverez normalement sur le connecteur eth0 et en ipv4 qui est le format que j\u0026rsquo;ai s√©lectionn√© et que je vous recommande pour √©viter des configurations futures.\nAvec votre ordinateur favori, que ce soit sur MacOS, Windows, Ubuntu, Trisquel ou TempleOS vous pouvez utiliser un outil qui permet de vous connecter √† votre Raspberry avec SSH. Le plus simple avec MacOS ou une distribution Linux. Si vous n\u0026rsquo;avez pas ssh de disponible en commande, veuillez installer OpenSSH. Voil√† comment proc√©der avec votre terminal sachant que mon IP est 192.168.1.42\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 monpc@oumonmac:~ $ ssh-keygen -t rsa -b 4096 \u0026gt;; Generating public/private rsa key pair. \u0026gt;; Enter a file in which to save the key (/home/you/.ssh/id_rsa): [Press enter] Laissez par d√©faut \u0026gt;; Enter passphrase (empty for no passphrase): [Type a passphrase] Votre mot de passe \u0026gt;; Enter same passphrase again: [Type passphrase again] Confirmez votre mot de passe monpc@oumonmac:~ $ ssh pi@192.168.1.42 pi@192.168.1.42\u0026#39;s password: Entrez votre mot de passe Linux raspberrypi 4.14.71-v7+ #1145 SMP Fri Sep 21 15:38:35 BST 2018 armv7l The programs included with the Debian GNU/Linux system are free software; the exact distribution terms for each program are described in the individual files in /usr/share/doc/* /copyright. Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent permitted by applicable law. Last login: Tue Mar 19 02:04:32 2019 from 192.168.1.44 pi@raspberrypi:~ \u0026amp; Cette √©tape permet d\u0026rsquo;avoir une cl√© RSA pour initialiser une communication chiffr√©e avec votre Raspberry et de connecter ensuite.\nIl existe des solutions avec interface comme PuTTY pour Windows. Vous devrez entrer l\u0026rsquo;adresse IP de votre Raspberry, le login pi et le mot de passe raspberry.\nCr√©er un utilisateur Afin de prot√©ger votre installation du mieux que possible je recommande de cr√©er un utilisateur pr√©vu √† cet usage. Nous l\u0026rsquo;appellerons \u0026ldquo;bitcoin\u0026rdquo;.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 pi@raspberrypi:~ $ adduser bitcoin Adding user \u0026#39;bitcoin\u0026#39; ... Adding new group \u0026#39;bitcoin\u0026#39; (1001) ... Adding new user \u0026#39;bitcoin\u0026#39; (1001) with group \u0026#39;bitcoin\u0026#39; ... Creating home directory \u0026#39;/home/bitcoin\u0026#39; ... Copying files from \u0026#39;/etc/skel\u0026#39; ... Enter new UNIX password: Mettez un mot de passe fort Retype new UNIX password: Confirmez votre mot de passe passwd: password updated successfully Changing the user information for bitcoin Enter the new value, or press ENTER for the default \u0026amp;nbsp;\u0026amp;nbsp;Full Name []: Vous pouvez laisser tous ces champs vides \u0026amp;nbsp;\u0026amp;nbsp;Room Number []: \u0026amp;nbsp;\u0026amp;nbsp;Work Phone []: \u0026amp;nbsp;\u0026amp;nbsp;Home Phone []: \u0026amp;nbsp;\u0026amp;nbsp;Other []: Is the information correct? [Y/n] Y Vous pouvez d√©sormais vous connecter directement √† l\u0026rsquo;utilisateur \u0026ldquo;bitcoin\u0026rdquo; avec SSH en tapant par exemple ssh bitcoin@192.168.1.42\nPr√©parer le disque dur Vous aurez besoin de t√©l√©charger l\u0026rsquo;enti√®ret√© de la blockchain Bitcoin qui fait 250go √† l\u0026rsquo;heure o√π j\u0026rsquo;√©cris ces lignes. Cela signifie que la petite carte SD du Raspberry ne peut pas m√©moriser tout √ßa. On va faire en sorte que toutes les informations relatives √† la blockchain r√©sident dans le disque externe.\nUne fois que vous avez branch√© votre disque dur sur votre Raspberry, vous devriez le retrouver en tapant la commande df -h. Cette commande va vous lister quelque chose qui ressemble √† ce qui suit :\n1 2 3 4 5 6 7 8 9 pi@raspberrypi:~ $ df -h /dev/root 15G 4.2G 9.8G 30% devtmpfs 460M 0 460M 0% /dev tmpfs 464M 0 464M 0% /dev/shm tmpfs 464M 6.2M 458M 2% /run tmpfs 5.0M 4.0K 5.0M 1% /run/lock tmpfs 464M 0 464M 0% /sys/fs/cgroup /dev/mmcblk0p1 44M 22M 22M 51% /boot Highlight\u0026gt;/dev/sda 458G 249G 186G 58% /home/bitcoin/.bitcoi\u0026lt;/ Highlight \u0026gt;tmpfs 93M 0 93M 0% /run/user/1001 Vous devrez trouver un √©l√©ment ayant la m√™me capacit√© de stockage que votre disque. Mon disque fait 500go et on le trouve sur le chemin /dev/sda. En g√©n√©ral on le devine dans la mesure o√π c\u0026rsquo;est le seul disque ayant cette capacit√©. Notez ce nom quelque part, et retenez cette commande df qui est pratique pour g√©rer ses disques.\nFormater (optionnel) Votre disque dur doit maintenant √™tre vierge (√† moins que vous y avez enregistr√© la blockchain, dans ce cas ignorez cette √©tape). Tapez la commande fdisk [votre disque] o√π [votre disque] devient le nom de votre disque, dans mon exemple c\u0026rsquo;est fdisk /dev/sda.\nMonter le disque Enfin il faut monter le disque sur le dossier de travail de Bitcoin, on va lui pr√©parer sa maison et son nid douillet. Monter un disque signifie que nous allons associer un r√©pertoire √† un disque, octroyant une capacit√© de m√©moire certaine √† un r√©pertoire. Et pour ce faire connectez vous √† l\u0026rsquo;utilisateur que nous avions pr√©c√©demment cr√©√© su bitcoin, puis tapez mkdir .bitcoin .lnd.\nIl ne vous reste plus qu\u0026rsquo;√† taper mount \u0026lt;votre disque\u0026gt; .bitcoin o√π votre disque est le chemin trouv√© avec df.\nmkdir signifie make directory, c\u0026rsquo;est pour cr√©er un dossier et .bitcoin est le nom du dossier. Par d√©faut nous travaillerons avec ce dossier pour la blockchain et les portefeuilles. Le \u0026ldquo;.\u0026rdquo; est un moyen de cacher le dossier, cependant en aucun cas cela constitue s√©curit√© suffisante.\nInstaller bitcoind et bitcoin-cli Pour cette partie restez connect√© √† l\u0026rsquo;utilisateur bitcoin en tapant su bitcoin.\nbitcoind est le syst√®me central de Bitcoin, le \u0026ldquo;d\u0026rdquo; √† la fin signifie \u0026ldquo;daemon\u0026rdquo; qui d√©signe un service ex√©cut√© et maintenu par la machine. bitcoin-cli est une interface de commande qui permet d‚Äôinteragir avec le service Bitcoin. Les deux s\u0026rsquo;installent ensemble, ce qui est super !\nD\u0026rsquo;abord vous devrez chercher les fichiers d\u0026rsquo;installation de Bitcoin, je vous le donne ici : bitcoin-0.19.0.1-arm-linux-gnueabihf.tar.gz. Gardez ce lien vous en aurez besoin.\nJe tiens √† souligner que vous pouvez le chercher par vous m√™me en vous rendant ici et en s√©lectionnant \u0026ldquo;ARM Linux 64bits\u0026rdquo;. Je vous conseille de le faire vous m√™me car les versions sont mises √† jour, ci-dessus vous avez la version 0.19.0.1 de Bitcoin Core.\nSuivez les commandes ci-dessous pour installer bitcoind\n1 2 3 4 bitcoin@raspberrypi:~ $ wget https://bitcoin.org/bin/bitcoin-core-0.19.0.1/bitcoin-0.19.0.1-arm-linux-gnueabihf.tar.gz bitcoin@raspberrypi:~ $ tar -vxf bitcoin-0.19.0.1-arm-linux-gnueabihf.tar.gz bitcoin@raspberrypi:~ $ sudo install -m 0755 -o bitcoin -g bitcoin -t /usr/local/bin bitcoin-0.19.0.1/bin/* bitcoin@raspberrypi:~ $ rm -rf bitcoin-0.19.0.1 Notez qu\u0026rsquo;on donne les droits uniquement √† l\u0026rsquo;utilisateur bitcoin. D√©sormais tapez les commandes bitcoind -version et bitcoin-cli -version. Si tout est bien install√© vous verrez les versions s\u0026rsquo;afficher.\nD√©marrer bitcoind bitcoind est install√©, il reste plus qu\u0026rsquo;√† le d√©marrer pour qu\u0026rsquo;il puisse t√©l√©charger fr√©n√©tiquement la blockchain en se connectant √† des n≈ìuds du r√©seau; automatiquement.\nD\u0026rsquo;abord je vous recommande de v√©rifier si vous avez bien connect√© votre disque dur, suivez l\u0026rsquo;exemple ci-dessous\n1 2 3 4 5 6 bitcoin@raspberrypi:~ $ lsblk NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT\u0026#34; sda 8:0 0 465.8G 0 disk /home/bitcoin/.bitcoin mmcblk0 179:0 0 14.9G 0 disk |-mmcblk0p1 179:1 0 43.8M 0 part /boot -mmcblk0p2 179:2 0 14.8G 0 part / On peut voir en surlign√© que /home/bitcoin/.bitcoin est bien connect√© au disque ayant 465.8Go d\u0026rsquo;espace. Si vous n\u0026rsquo;avez pas cela, revenez sur la partie Monter le disque.\nMaintenant on peut √©crire le fichier de configuration Bitcoin. Tapez nano .bitcoin/bitcoin.conf, cela va vous ouvrir un √©diteur directement dans le terminal, ce qui vous permet d\u0026rsquo;√©crire les configurations. Voil√† des configurations que je recommande :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 server=1 daemon=1 txindex=1 rpcuser=\u0026lt;Mettez un nom d\u0026#39;utilisateur\u0026gt; rpcpassword=\u0026lt;Mettez un mot de passe\u0026gt; onlynet=ipv4 zmqpubrawblock=tcp://127.0.0.1:28332 zmqpubrawtx=tcp://127.0.0.1:28333 dbcache=50 maxorphantx=10 maxmempool=50 maxconnections=40 maxuploadtarget=1000 Pour sauvegarder tapez CTRL + O et CTRL + X pour quitter.\nEt enfin tapez sudo bitcoind qui aura pour effet de lancer le service Bitcoin qui va rapidement commencer √† t√©l√©charger la blockchain. Pour rappel cette derni√®re fait pr√®s de 200Go donc vous pouvez prendre une pause ici.\nPour observer l\u0026rsquo;avancement tapez la commande tail -f .bitcoin/debug.log vous verrez des entr√©es qui ressemblent √† ce qui suit\n2019-04-15T22:54:29Z UpdateTip: new best=00000000000000000024f0048c611086130b387e6634d8e2617c261a0c44b6dd height=571800 version=0x20c00000 log2_work=90.545983 tx=402724776 date=\u0026#39;2019-04-15T22:54:19Z\u0026#39; progress=1.000000 cache=14.5MiB(103309txo) warning=\u0026#39;35 of last 100 blocks have unexpected version\u0026#39; L\u0026rsquo;information int√©ressante ici est particuli√®rement progress=1.000000. Cette valeur est en r√©alit√© la progression de la synchronisation de la blockchain, 1 signifie 100%, si vous avez par exemple progress=0.014 alors vous en √™tes √† 1.4%. Pour quitter le tail tapez CTRL + C.\nInstaller LND et LnCLI Pour cette partie restez connect√© √† l\u0026rsquo;utilisateur bitcoin en tapant su bitcoin.\nlnd est le service qui va transformer le RaspberryPi en un n≈ìud Lightning Network. Il va se connecter automatiquement a l\u0026rsquo;interface de commande du service bitcoind. Tout comme bitcoind LND embarque l\u0026rsquo;interface de commande lncli.\nLa proc√©dure pour installer LND ressemble √† l\u0026rsquo;installation de Bitcoin. La premi√®re chose √† faire est de t√©l√©charger le service en vous rendant sur ce lien github.com/lightningnetwork/lnd/releases. Ici vous trouverez toutes les versions officielles de LND. R√©cup√©rez maintenant le lien de la derni√®re version \u0026ldquo;linux-armv7\u0026rdquo;, voici celle que j\u0026rsquo;ai √† l\u0026rsquo;heure o√π j\u0026rsquo;√©cris cet article lnd-linux-armv7-v0.8.2-beta.tar.gz.\nNotez bien que mon exemple s\u0026rsquo;applique pour la version que j\u0026rsquo;ai envoy√©e : v0.8.2beta.\n1 2 3 4 bitcoin@raspberrypi:~ $ wget https://github.com/lightningnetwork/lnd/releases/download/v0.8.2-beta/lnd-linux-armv7-v0.8.2-beta.tar.gz bitcoin@raspberrypi:~ $ tar -vxf lnd-linux-armv7-v0.8.2-beta.tar.gz bitcoin@raspberrypi:~ $ sudo install -m 0755 -o bitcoin -g bitcoin -t /user/local/bin lnd-linux-armv7-v0.8.2-beta/* bitcoin@raspberrypi:~ $ rm -rf lnd-linux-armv7-v0.8.2-beta D√©sormais tapez la commande lnd -version. Si tout est bien install√© vous verrez la version s\u0026rsquo;afficher.\nAvant de d√©marrer LND cr√©ez son fichier de configuration en tapant nano .lnd/lnd.conf. Trouvez ci-dessous une configuration que je propose, vous pouvez √©videmment mettre ce que vous voulez pour certaines options.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 [Application Options] debuglevel=info maxpendingchannels=3 alias=\u0026lt;Votre Alias / pseudonyme / nom / ...\u0026gt; color=\u0026lt;Une couleur en hexad√©cimal, par exemple #F00 pour Rouge vif\u0026gt; nat=true # Si vous vous connectez depuis une box Internet [Bitcoin] bitcoin.active=1 bitcoin.mainnet=1 bitcoin.node=bitcoind [bitcoind] bitcoind.rpcuser=\u0026lt;Ce que vous aviez mis dans .bitcoin/bitcoin.conf rpcuser=\u0026gt; bitcoind.rpcpass=\u0026lt;Ce que vous aviez mis dans .bitcoin/bitcoin.conf rpcpassword=\u0026gt; bitcoind.zmqpubrawblock=tcp://127.0.0.1:28332 bitcoind.zmqpubrawtx=tcp://127.0.0.1:28333 [autopilot] autopilot.active=1 autopilot.maxchannels=3 autopilot.allocation=0.5 \u0026ldquo;autopilot\u0026rdquo; vous intrigue peut-√™tre. C\u0026rsquo;est un algorithme qui connecte automatiquement des n≈ìuds pr√©sents dans le r√©seau d√©centralis√©, typiquement des n≈ìuds Bitcoin et Lightning Network. Autopilot int√®gre le mod√®le Barab√°si‚ÄìAlbert dans l\u0026rsquo;id√©e de produire un r√©seau pair-√†-pair en th√©orie homog√®ne. Personnellement je l\u0026rsquo;active mais en aucun cas cela est n√©cessaire.\nD√©marrer LND Tapez simplement lnd et voil√† ! Votre n≈ìud LN est en route. Il va d\u0026rsquo;abord synchroniser sa blockchain locale avec bitcoind. En attendant vous allez cr√©er votre portefeuille. En effet LND ne va pas exploiter le portefeuille de bitcoind mais g√©rer le sien, cela veut dire que vous aurez un portefeuille relatif √† votre n≈ìud LN.\nLaissez lnd tourner, ne quittez pas en faisant CTRL + C, je vous sugg√®re d\u0026rsquo;ouvrir un nouveau terminal et vous connecter √† nouveau sur bitcoin. Quitter votre terminal ne stoppera pas LND.\nUne fois de retour suivez cette proc√©dure ci-dessous :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 bitcoin@raspberrypi:~ $ lncli create Input wallet password : \u0026lt;Mettez un mot de passe fort et √©crivez le sur une feuille pour ne pas le perdre\u0026gt; Confirm wallet password: \u0026lt;Confirmez votre mot de passe\u0026gt; Do you have an existing cipher seed mnemonic you want to user? (Enter y/n): n Your cipher seed can optionally be encrypted. Input your passphrase if you wish to encrypt it (or press enter to proceed without a cipher seed passphrase): \u0026lt;Mettez un mot de passe ou pressez directement ENTREE\u0026gt; Generating fresh cipher seed... !!!YOU MUST WRITE DOWN THIS SEED TO BE ABLE TO RESTORE THE WALLET!!! \u0026gt; Ici lncli affiche votre seed, notez la consciencieusement sur une feuille, dans l\u0026#39;ordre. Cette seed (graine) est la cl√© de votre portefeuille; elle vous assurera de ne jamais perdre vos fonds !!!YOU MUST WRITE DOWN THIS SEED TO BE ABLE TO RESTORE THE WALLET!!! lnd successfully initialized! TADAM ! Vous avez maintenant un tout nouveau portefeuille et LND sera capable de fonctionner\u0026hellip; Apr√®s avoir tap√© ces commandes\n1 2 bitcoin@raspberrypi:~ $ lncli unlock bitcoin@raspberrypi:~ $ lncli newaddress p2wkh \u0026ldquo;lncli unlock\u0026rdquo; est important pour que LND puisse fonctionner car il aura besoin d\u0026rsquo;un acc√®s √† votre portefeuille, ce dernier est chiffr√© par d√©faut et il faut le d√©chiffrer en le d√©verrouillant. Le mot de passe √† ins√©rer est le premier mot de passe que vous avez mis lors de la cr√©ation du portefeuille avec lncli create\nLND est maintenant pr√™t √† fonctionner. Pour observer ce qu\u0026rsquo;il se passe tapez la commande tail -f .lnd/debug.log.\nPour v√©rifier que votre n≈ìud est bien recens√© sur les internets allez chercher votre cl√© publique en tapant lncli getinfo comme dans le terminal ci-dessous\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 bitcoin@raspberrypi:~ $ lncli getinfo { \u0026#34;dentity_pubkey\u0026#34;: \u0026#34;03a2c34daf010b3501daf704b5a321e82e1631421b7ffa18dd49014967eda82dc\u0026#34;, \u0026#34;alias\u0026#34;: \u0026#34;Blocs\u0026#34;, \u0026#34;num_pending_channels\u0026#34;: 0, \u0026#34;num_active_channels\u0026#34;: 3, \u0026#34;num_peers\u0026#34;: 4, \u0026#34;block_height\u0026#34;: 572660, \u0026#34;block_hash\u0026#34;: \u0026#34;0000000000000000001d7bf15a13ffb76a8c1256e5ab778ffcc918d97944e45a\u0026#34;, \u0026#34;synced_to_chain\u0026#34;: true, \u0026#34;testnet\u0026#34;: false, \u0026#34;chains\u0026#34;: [ \u0026#34;bitcoin\u0026#34; ], \u0026#34;uris\u0026#34;: [ \u0026#34;03a2c34daf010b3501daf704b5a321e82e1631421b7ffa18dd49014967eda82dc9@109.18.104.32:9735\u0026#34; ], \u0026#34;best_header_timestamp\u0026#34;: \u0026#34;1555878831\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;0.5.2-beta commit=v0.5.2-beta\u0026#34;, \u0026#34;num_inactive_channels\u0026#34;: 0\u0026#39; } Ma cl√© publique est 03a2c34daf010b3501daf704b5a321e82e1631421b7ffa18dd49014967eda82dc9, elle sert d\u0026rsquo;identifiant au n≈ìud. Maintenant si votre n≈ìud est bien configur√© et en route, vous pouvez le trouver sur ce site : 1ml.com en tapant dans la recherche la cl√© publique de votre n≈ìud.\nVous √™tes maintenant propri√©taire d\u0026rsquo;un n≈ìud Bitcoin et d\u0026rsquo;un n≈ìud Lightning Network. Cela signifie que vous avez la capacit√© d\u0026rsquo;utiliser n\u0026rsquo;importe quel portefeuille supportant LN en passant par votre propre serveur. F√©licitations et bienvenue dans la communaut√© de l\u0026rsquo;a\u0026hellip; Bitcoin et LN. Dans un article suivant on va voir comment avoir une interface graphique pour g√©rer son n≈ìud sans passer par les lignes de commande comme nous l\u0026rsquo;avons fait tout au long de l\u0026rsquo;installation. Pour l\u0026rsquo;heure vous pouvez d√©couvrir les possibilit√©s de LN en tapant lncli --help et les possibilit√©s de Bitcoin en tapant bitcoin-cli --help.\n","description":"Envoyer des microtransactions bitcoin n'√©tait pas possible jusqu'√† l'arriv√©e de la technologie Lightning Network. C'est un syst√®me qui permet de faire des transactions quasi-instantann√©es et avec peu de frais.","id":15,"section":"blog","tags":["bitcoin","lightning network","debian","bitcoin-cli"],"title":"Installer un n≈ìud Lightning Network","uri":"https://blocs.fr/blog/installer-un-noeud-lightning-network/"},{"content":"Notez que tout ce qui va suivre devra se faire avec l\u0026rsquo;utilisateur administrateur. Pour s\u0026rsquo;y connecter tapez une fois su root puis tapez son mot de passe.\nFixer l\u0026rsquo;adresse IP locale du n≈ìud Ce qui suit s\u0026rsquo;applique qu\u0026rsquo;aux connexions r√©seau filaire et non Wifi\nVotre n≈ìud poss√®de une adresse IP locale afin d\u0026rsquo;√™tre acc√©ssible dans votre r√©seau, c\u0026rsquo;est d\u0026rsquo;ailleurs gr√¢ce √† cette derni√®re que vous pouvez y acc√©der avec SSH. Cependant il est fort probable que son adressage se fasse dynamiquement par d√©faut, par cons√©quent l\u0026rsquo;adresse de votre Raspberry pourrait changer. Il est pr√©f√©rable d\u0026rsquo;√©viter cette inconvenance alors on va forcer une adresse IP statique.\nOuvrez le fichiers de configuration DHCP en tapant nano /etc/dhcpcd.conf, ajoutez √† la fin du fichier ces informations :\ninterface eth0 static ip_address=192.168.1.42/24 # C\u0026#39;est l\u0026#39;IP qu\u0026#39;aura la machine static routers=\u0026lt;Votre passerelle\u0026gt; # Passerelle, explications plus bas static domain_name_servers=\u0026lt;Votre passerelle\u0026gt; 8.8.8.8 Ici vous allez devoir faire un travail d\u0026rsquo;enqu√™te pour conna√Ætre votre r√©seau et savoir quelle est la passerelle. Suivez le terminal ci-dessous :\npi@raspberrypi:~ $ ip route default via 192.168.1.1 dev eth0 src 192.168.1.42 metric 202 192.168.1.0/24 dev eth0 proto kernel scope link src 192.168.1.42 metric 202 Trouv√© ! 192.168.1.1 est la passerelle de mon r√©seau, c\u0026rsquo;est ce que vous devez mettre dans la configuration DHCP plus haut. Notez √©galement le /24 qui est un masque de r√©seau et que vous devez aussi utiliser dans votre configuration DHCP.\nSans entrer dans les d√©tails le masque /24 (ou /n) est ce qui va d√©terminer la plage d\u0026rsquo;adresses disponibles. Avec une adresse type 192.168.1.0/24 vous avez 254 adresses disponibles allant de 192.168.1.1 √† 192.168.1.254. C\u0026rsquo;est important √† consid√©rer car cela signifie que vous ne pouvez pas mettre n\u0026rsquo;importe quelle adresse, il est important de respecter le format. Pour √™tre s√ªr de ne pas vous tromper, conservez les 3 premiers chiffres de l\u0026rsquo;IP et choisissez le dernier : x.x.x.y o√π \u0026ldquo;x\u0026rdquo; sont les valeurs de base de l\u0026rsquo;IP (192.168.1 selon l\u0026rsquo;exemple) et \u0026ldquo;y\u0026rdquo; est une valeur choisie arbitrairement et comprise entre 1 et 254.\nVotre n≈ìud a maintenant une IP statique.\nS√©curiser les acc√®s distants SSH SSH est un protocole de r√©seau qui vous permet de vous connecter √† distance sur une machine gr√¢ce √† un canal chiffr√©. Cela signifie que la machine distante ex√©cute un service qui re√ßoit les connexions SSH, ce service s\u0026rsquo;appelle sshd. SSH en lui m√™me est plut√¥t bien s√©curis√©, cependant il est possible de couvrir un peu mieux les acc√®s.\nSans plus attendre trouvez le fichier en tapant sudo nano /etc/ssh/sshd_config.\nVoyons quelles modifications vous pouvez apporter afin de mieux s√©curiser les acc√®s SSH. Vous noterez que la plupart des lignes sont comment√©es gr√¢ce au caract√®re \u0026ldquo;#\u0026rdquo;, cela signifie juste que les lignes comportant ce symbole au d√©but sont neutralis√©es, le travail consiste essentiellement √† d√©-neutraliser certaines lignes.\nPort 2310 : Mettez le port que vous souhaitez, le changer est toujours une couche de s√©curit√© peu co√ªteuse. Ici j\u0026rsquo;ai mis 2310.\nLoginGraceTime 2m : Limite le temps de connexion inactif √† 2 minutes. Vous pouvez l\u0026rsquo;augmenter mais le plus bas le mieux.\nStrictModes yes : Assure les acc√®s aux fichiers en fonction de l\u0026rsquo;utilisateur connect√©.\nPermitRootLogin no : Mettez PermitRootLogin √† no, cette option bloquera les connexions SSH √† l\u0026rsquo;utilisateur administrateur du Raspberry. Si vous avez suivi l\u0026rsquo;installation que je recommande vous avez un utilisateur nomm√© bitcoin qui a pour r√¥le d\u0026rsquo;administrer les services bitcoind et lnd. C\u0026rsquo;est sur ce dernier que vous vous connecterez via SSH et non sur l\u0026rsquo;utilisateur root.\nMaxAuthTries 3 : Nombre d\u0026rsquo;essais pour se connecter via SSH limit√© √† 3. Cela bloque les attaques par brute force automatis√©.\nMaxSessions 1 : Si vous √™tes la seule personne √† g√©rer votre machine, et que vous ne comptez pas cr√©er plusieurs connexions SSH simultan√©es, alors limitez le nombre de sessions √† 1. Il faut garder ce nombre le plus petit possible en fonction de vos besoins.\nPubkeyAuthentication yes : Cette option vous servira plus tard. Elle n\u0026rsquo;ajoute pas de s√©curit√© suppl√©mentaire, c\u0026rsquo;est une option qui vous facilitera l\u0026rsquo;acc√®s √† votre machine.\nTapez CTRL + O et CTRL + X; et enfin red√©marrez SSHd afin d\u0026rsquo;appliquer ces modifications en tapant sudo service sshd restart.\nEnregistrer votre cl√© pour les connexions futures Dans la configuration pr√©c√©dente vous aviez activ√© l\u0026rsquo;option PubkeyAuthentication, cette option va vous permettre d\u0026rsquo;enregistrer la cl√© publique de votre machine sur le Raspberry. Cela vous √©vitera de taper sans cesse le mot de passe de connexion.\nCela se passe en un commande. Suivez le terminal ci-dessous. Notez que cela doit se faire depuis votre machine locale (votre mac, votre pc, etc). Si vous √™tes sur Windows vous n\u0026rsquo;aurez pas cette commande.\nmonpc@oumonmac:~ $ ssh-copy-id -i ~/.ssh/id_rsa.pub bitcoin@192.168.1.42 Ensuite vous devrez taper le mot de passe de l\u0026rsquo;utilisateur \u0026ldquo;bitcoin\u0026rdquo;. Notez que l\u0026rsquo;IP 192.168.1.42 (comment trouver l\u0026rsquo;IP de mon n≈ìud ?) doit √™tre l\u0026rsquo;IP de votre n≈ìud distant. Cette action aura pour effet de recenser la cl√© publique de votre machine dans le Raspberry Pi, il vous reconna√Ætra pour les connexions futures et ne vous demandera plus de mot de passe.\nSi vous √™tes sur Windows en utilisant PuTTy, vous pouvez g√©n√©rer et trouver votre cl√© publique avec PuTTyGen. Copiez cette cl√© qui commence par \u0026ldquo;ssh-rsa\u0026rdquo; si vous l\u0026rsquo;avez cr√©√© avec le chiffrement RSA. Cliquez sur \u0026ldquo;Save private key\u0026rdquo; et enregistrez le fichier sur votre machine. Revenez sur PuTTy, sur le panneau de gauche trouvez \u0026ldquo;Connection / SSH / Auth\u0026rdquo; puis dans la section \u0026ldquo;Private key file for authentication\u0026rdquo; chargez le fichier de votre cl√© priv√©e, c\u0026rsquo;est un fichier .ppk. Connectez vous √† votre Raspberry en utilisant PuTTy. Une fois connect√© tapez sudo nano .ssh/authorized_keys et collez la cl√© publique que vous aviez copi√©, puis sauvegardez le fichier. C\u0026rsquo;est termin√© d√©sormais votre Raspberry conna√Æt votre cl√© publique et autorisera les connexions futures depuis votre machine Windows.\nAjouter une couche suppl√©mentaire √† l\u0026rsquo;authentification SSH Pour l\u0026rsquo;instant il est toujours possible de forcer l\u0026rsquo;acc√®s √† votre n≈ìud avec une attaque par dictionnaire, qui consiste √† tester des millions de mot de passe jusqu\u0026rsquo;√† trouver un acc√®s. Il existe un service nomm√© fail2ban qui va permettre de prot√©ger en limitant les tentatives de connexion.\nPour l\u0026rsquo;installer tapez apt-get update \u0026amp;\u0026amp; apt-get install -y fail2ban. Ensuite vous allez devoir configurer une chose si vous avez modifi√© le port SSH comme je l\u0026rsquo;ai montr√© juste au dessus. Cherchez le fichier de configuration de fail2ban nano /etc/fail2ban/jail.d/defaults-debian.conf. Voyez la section [sshd] mettez ce qui suit (si vous n\u0026rsquo;avez rien dans le fichier, ajoutez √©galement ce qui suit) :\n[sshd] enabled = true port = 2310 # Notez que c\u0026#39;est le port que j\u0026#39;ai mis plus haut dans sshd_config Sauvegardez en tapant CTRL + O et CTRL + X pour fermer et enfin tapez systemctl restart fail2ban.\nfail2ban est un service polyvalent qui s√©curise nombreuse authentifications, dont le service sshd et nous l\u0026rsquo;utilisons pour √ßa.\nActiver le red√©marrage automatique des services Cette partie est cruciale. Si votre Raspberry est red√©marr√© √† cause d\u0026rsquo;une coupure de courant par exemple, il red√©marrera\u0026hellip; Mais il ne relancera pas bitcoind ni lnd. Ce qui aurait pour effet d\u0026rsquo;√©teindre le service et vous obliger √† intervenir pour qu\u0026rsquo;il pers√©v√®re.\nD\u0026rsquo;abord il va falloir faire en sorte que le disque soit toujours mont√© sur le dossier .bitcoin car c\u0026rsquo;est ce dernier qui recense la blockchain et bitcoind en a besoin. Le montage de disque ne se fait jamais automatiquement. Alors voil√† comment configurer cela :\n1 2 3 4 5 6 7 8 9 10 11 12 13 pi@raspberry:~ $ df -h Filesystem Size Used Avail Use% Mounted on /dev/root 15G 5.6G 8.4G 40% / devtmpfs 460M 0 460M 0% /dev tmpfs 464M 0 464M 0% /dev/shm tmpfs 464M 12M 452M 3% /run tmpfs 5.0M 4.0K 5.0M 1% /run/lock tmpfs 464M 0 464M 0% /sys/fs/cgroup /dev/mmcblk0p1 44M 22M 22M 51% /boot /dev/sda 458G 253G 182G 59% /home/bitcoin/.bitcoin tmpfs 93M 0 93M 0% /run/user/1001 pi@raspberry:~ $ echo \u0026#39;/dev/sda /home/bitcoin/.bitcoin ext4 defaults,noatime 0 0\u0026#39; \u0026gt;\u0026gt; /etc/fstab Soyez vigilant ici. J\u0026rsquo;ai surlign√© mon montage actuel qui est /dev/sda mont√© sur /home/bitcoin/.bitcoin, vous devez mettre ce chemin dans le echo en dessous. Notez √©galement l\u0026rsquo;annotation ext4 qui est le syst√®me de fichier que j\u0026rsquo;ai choisi lorsque j\u0026rsquo;avais format√© le disque. Si vous avez un doute suivez le terminal ci-dessous\n1 2 pi@raspberry:~ $ file -sL /dev/sda /dev/sda: Linux rev 1.0 ext4 filesystem data, UUID=a2a0ec66-f768-4cf0-9442-6c2878ab60e1, volume name BLOCK-STORAGE (needs journal recovery) (extents) (64bit) (large files) (huge files) O√π /dev/sda est mon disque √† monter. On voit en surlign√© ext4 qui est le syst√®me de fichier.\nbitcoind Le red√©marrage automatique d\u0026rsquo;un service sur Linux se fait toujours de la m√™me mani√®re, il faut √©crire le service. Et pour ce faire tapez nano /etc/systemd/system/bitcoind.service et entrez la configuration suivante :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 [Unit] Description=Bitcoin daemon After=network.target [Service] ExecStartPre=/bin/sh -c \u0026#39;sleep 30\u0026#39; ExecStart=/usr/local/bin/bitcoind -daemon -conf=/home/bitcoin/.bitcoin/bitcoin.conf -pid=/home/bitcoin/.bitcoin/bitcoind.pid # Mettez le chemin vers votre dossier .bitcoin PIDFile=/home/bitcoin/.bitcoin/bitcoind.pid # Mettez le chemin vers votre dossier .bitcoin User=bitcoin # Votre utilisateur qui g√®re le service Group=bitcoin # Votre groupe qui g√®re le service Type=forking KillMode=process Restart=always TimeoutSec=120 RestartSec=30 [Install] WantedBy=multi-user.target CTRL + O et CTRL + X pour enregistrer et quitter puis tapez systemctl enable bitcoind. La machine est lanc√©e, le service bitcoind d√©marrera au lancement du Raspberry.\nlnd Encore une fois, il faut cr√©er un service pour le service de lightning network, tapez nano /etc/systemd/system/lnd.service et voil√† la configuration que je recommande :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 [Unit] Description=LND Wants=bitcoind.service After=bticoind.service # Il d√©marre apr√®s bitcoind [Service] ExecStart=/usr/local/bin/lnd User=bitcoin # Votre utilisateur qui g√®re le service Group=bitcoin # Votre utilisateur qui g√®re le service Type=simple KillMode=process LimitNOFILE=128000 TimeoutSec=300 Restart=always RestartSec=120 [Install] WantedBy=multi-user.target Et enfin pour l\u0026rsquo;activer systemctl enable lnd.\nF√©licitations, votre Raspberry est autonome, il relancera les services en cas de red√©marrage inopin√©, sans votre aide, tout seul comme un grand.\nDans un article futur on va voir comment on peut administrer son n≈ìud avec une interface graphique !\n","description":"Dans l'article pr√©c√©dent j'ai √©crit au sujet de l'installation d'un n≈ìud Bitcoin Lightning Network avec un Raspberry Pi. Ce dernier est sommaire et va √† l'essentiel. Dans cet article il va s'agir d'optimiser la configuration du Raspberry Pi afin d'am√©liorer sa s√©curit√© et rendre l'administration moins laborieuse.","id":16,"section":"blog","tags":["bitcoin","lightning network","debian","bitcoin-cli"],"title":"Configurer son n≈ìud Bitcoin Lightning Network","uri":"https://blocs.fr/blog/configurer-un-noeud-lightning-network/"}]