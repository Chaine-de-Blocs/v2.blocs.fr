[{"content":"Lecture du chapitre 1 de Mastering the Lightning Network Bienvenue dans Mastering the Lightning Network !\nLe Lightning Network (souvent abrégé en LN) change la façon dont les gens échangent de la valeur en ligne, et c\u0026rsquo;est l\u0026rsquo;une des avancées les plus excitantes de l\u0026rsquo;histoire de Bitcoin. Le Lightning Network en est encore à ses balbutiements. Le Lightning Network est un protocole permettant d\u0026rsquo;utiliser Bitcoin de manière intelligente. Il s\u0026rsquo;agit d\u0026rsquo;une technologie de deuxième couche sur Bitcoin.\nLe concept du Lightning Network a été proposé en 2015, et la première implémentation a été lancée en 2018. À partir de 2021, nous commençons seulement à voir les opportunités que le Lightning Network offre à Bitcoin, y compris l\u0026rsquo;amélioration de la confidentialité, de la vitesse et de l\u0026rsquo;échelle. Avec une connaissance de base du Lightning Network, vous pouvez aider à façonner l\u0026rsquo;avenir du réseau tout en créant des opportunités pour vous-même.\nIl est supposé que vous avez déjà quelques connaissances de base sur Bitcoin, mais si ce n\u0026rsquo;est pas le cas, ne vous inquiétez pas, les concepts Bitcoin les plus importants sont expliqués. Si vous voulez en savoir plus sur Bitcoin, vous pouvez lire Mastering Bitcoin, 2e édition, par Andreas M. Antonopoulos (O\u0026rsquo;Reilly), disponible gratuitement en ligne.\nAlors que la majeure partie de ce livre est écrite pour les programmeurs, les premiers chapitres sont écrits pour être accessibles à tous, quelle que soit leur expérience technique. Dans ce chapitre, nous commencerons par un peu de terminologie, puis nous examinerons la confiance et son application dans ces systèmes, et enfin nous discuterons de l\u0026rsquo;histoire et de l\u0026rsquo;avenir du Lightning Network.\n","description":"Introduction à Lightning Network et Bitcoin. Comment le protocole intègre un protocole d'équilibre permettant à des acteurs du réseau Lightning Network de se faire confiance.","id":0,"section":"blog","tags":["bitcoin","lightning network","mastering the lightning network","live"],"title":"1 - Mastering the Lightning Network - Comprendre Bitcoin et le Lightning Network","uri":"https://blocs.fr/blog/mastering-the-lightning-network-1/"},{"content":"Lecture des chapitre 13 et 14 de Mastering the Lightning Network Wire Protocol Dans ce chapitre, nous plongeons dans le protocole filaire du Lightning Network et couvrons également tous les différents leviers d\u0026rsquo;extensibilité qui ont été intégrés au protocole. À la fin de ce chapitre, un lecteur ambitieux devrait être capable d\u0026rsquo;écrire son propre analyseur de protocole filaire pour le Lightning Network. En plus d\u0026rsquo;être capable d\u0026rsquo;écrire un analyseur de protocole filaire personnalisé, un lecteur de ce chapitre acquerra une compréhension approfondie des divers mécanismes de mise à niveau qui ont été intégrés au protocole.\nChiffrement bout à bout Dans ce chapitre, nous examinerons le transport de messages cryptés du Lightning Network, parfois appelé protocole Brontide, qui permet aux pairs d\u0026rsquo;établir une communication cryptée de bout en bout, une authentification et une vérification de l\u0026rsquo;intégrité.\nUne partie de ce chapitre comprend des détails hautement techniques sur le protocole de chiffrement et les algorithmes de chiffrement utilisés dans le transport chiffré Lightning. Vous pouvez décider de sauter cette section si vous n\u0026rsquo;êtes pas intéressé par ces détails.\n","description":"On lit le livre Mastering the Lightning Network (LN) en Direct ! Chapitre 13 - Wire Protocol; Chapitre 14 - Chiffrement bout à bout","id":1,"section":"blog","tags":["bitcoin","lightning network","mastering the lightning network","live"],"title":"10 - Mastering the Lightning Network - Les messages sur Lightning Network (TLV, e2e encryption)","uri":"https://blocs.fr/blog/mastering-the-lightning-network-10/"},{"content":"Lecture des chapitre 15 et 16 de Mastering the Lightning Network Requête de paiement Dans ce chapitre, nous examinerons les demandes de paiement Lightning, ou, comme on les appelle plus communément, les factures Lightning.\nVie privée avec LN Dans ce chapitre, nous examinons certains des problèmes les plus importants liés à la sécurité et à la confidentialité du Lightning Network. Tout d\u0026rsquo;abord, nous examinerons la confidentialité, ce que cela signifie, comment l\u0026rsquo;évaluer et certaines choses que vous pouvez faire pour protéger votre propre confidentialité lorsque vous utilisez le Lightning Network. Ensuite, nous explorerons certaines attaques courantes et techniques d\u0026rsquo;atténuation.\n","description":"On lit le livre Mastering the Lightning Network (LN) en Direct ! Chapitre 15 - Requête de paiement; Chapitre 16 - Vie privée avec LN","id":2,"section":"blog","tags":["bitcoin","lightning network","mastering the lightning network","live"],"title":"11 - Mastering the Lightning Network - Informations Paiement et vie privée en vidéo","uri":"https://blocs.fr/blog/mastering-the-lightning-network-11/"},{"content":"Chapitre final de Mastering the Lightning Network en vidéo En quelques années seulement, le Lightning Network est passé d\u0026rsquo;un livre blanc à un réseau mondial en pleine croissance. En tant que deuxième couche de Bitcoin, il a tenu sa promesse de paiements rapides, peu coûteux et privés. De plus, il a déclenché un tsunami d\u0026rsquo;innovation, car il libère les développeurs des contraintes de consensus qui existent dans le développement de Bitcoin.\nL\u0026rsquo;innovation dans le Lightning Network se produit à plusieurs niveaux :\nAu niveau du protocole principal de Bitcoin, fournir l\u0026rsquo;utilisation et la demande de nouveaux opcodes Bitcoin Script, d\u0026rsquo;algorithmes de signature et d\u0026rsquo;optimisations Au niveau du protocole Lightning, avec de nouvelles fonctionnalités déployées rapidement sur l\u0026rsquo;ensemble du réseau Au niveau du canal de paiement, avec de nouvelles constructions de canaux et des améliorations En tant que fonctionnalités opt-in distinctes déployées de bout en bout par des implémentations indépendantes que les expéditeurs et les destinataires peuvent utiliser s\u0026rsquo;ils le souhaitent Avec de nouvelles et passionnantes applications Lightning (LApps) construites au-dessus des clients et des protocoles Voyons comment ces innovations changent Lightning maintenant et dans un avenir proche.\n","description":"Fin du livre et setup d'un serveur Bitcon et Lightning Network avec getumbrel","id":3,"section":"blog","tags":["bitcoin","lightning network","mastering the lightning network","live"],"title":"12 - Mastering the Lightning Network - Chapitre final en vidéo","uri":"https://blocs.fr/blog/mastering-the-lightning-network-12/"},{"content":"Lecture du chapitre 2 de Mastering the Lightning Network Dans ce chapitre, nous commencerons là où la plupart des gens commencent lorsqu\u0026rsquo;ils rencontrent le Lightning Network pour la première fois : choisir un logiciel pour participer à l\u0026rsquo;économie LN. Nous examinerons les choix de deux utilisateurs qui représentent un cas d\u0026rsquo;utilisation courant pour le Lightning Network et apprendrons par l\u0026rsquo;exemple. Alice, cliente d\u0026rsquo;un café, utilisera un portefeuille Lightning sur son appareil mobile pour acheter du café au Bob\u0026rsquo;s Cafe. Bob, un commerçant, utilisera un nœud Lightning et un portefeuille pour exécuter un système de point de vente dans son café, afin qu\u0026rsquo;il puisse accepter les paiements sur le Lightning Network.\n","description":"On lit le livre Mastering the Lightning Network (LN) en Direct ! Chapitre 2 - Le commencement","id":4,"section":"blog","tags":["bitcoin","lightning network","mastering the lightning network","live"],"title":"2 - Mastering the Lightning Network - Paiement avec Bitcoin et Lightning Network","uri":"https://blocs.fr/blog/mastering-the-lightning-network-2/"},{"content":"Lecture du chapitre 3 de Mastering the Lightning Network Maintenant que nous avons suivi Alice alors qu\u0026rsquo;elle installait un portefeuille Lightning et achetait un café à Bob, nous allons regarder sous le capot et déballer les différents composants du Lightning Network impliqués dans ce processus. Ce chapitre donnera une vue d\u0026rsquo;ensemble de haut niveau et n\u0026rsquo;abordera pas tous les détails techniques. Le but est plutôt de vous aider à prendre conscience des concepts et briques de base les plus importants du Lightning Network.\nSi vous avez de l\u0026rsquo;expérience en informatique, en cryptographie, en Bitcoin et en développement de protocoles, ce chapitre devrait vous suffire pour pouvoir remplir vous-même les détails de connexion. Si vous êtes moins expérimenté, ce chapitre vous donnera une vue d\u0026rsquo;ensemble suffisante pour que vous compreniez plus facilement les spécifications formelles du protocole, connues sous le nom de BOLT (Basis of Lightning Technology). Si vous êtes débutant, ce chapitre vous aidera à mieux comprendre les chapitres techniques du livre.\nNous commencerons par une définition en une phrase de ce qu\u0026rsquo;est le Lightning Network et nous le détaillerons dans le reste de ce chapitre.\nLe Lightning Network est un réseau peer-to-peer de canaux de paiement mis en œuvre sous forme de contrats intelligents sur la blockchain Bitcoin ainsi qu\u0026rsquo;un protocole de communication qui définit la manière dont les participants configurent et exécutent ces contrats intelligents.\n","description":"On lit le livre Mastering the Lightning Network (LN) en Direct ! Chapitre 3 - Comment le Lightning Network fonctionne","id":5,"section":"blog","tags":["bitcoin","lightning network","mastering the lightning network","live"],"title":"3 - Mastering the Lightning Network - Transaction d'engagement (commitment tx)","uri":"https://blocs.fr/blog/mastering-the-lightning-network-3/"},{"content":"Lecture du chapitre 4 de Mastering the Lightning Network Comme nous l\u0026rsquo;avons vu dans les chapitres précédents, un nœud Lightning est un système informatique qui participe au Lightning Network. Le Lightning Network n\u0026rsquo;est pas un produit ou une entreprise ; il s\u0026rsquo;agit d\u0026rsquo;un ensemble de normes ouvertes qui définissent une base d\u0026rsquo;interopérabilité. En tant que tel, le logiciel de nœud Lightning a été créé par diverses entreprises et groupes communautaires. La grande majorité des logiciels Lightning sont open source, ce qui signifie que le code source est ouvert et sous licence de manière à permettre la collaboration, le partage et la participation de la communauté au processus de développement. De même, les implémentations de nœuds Lightning que nous présenterons dans ce chapitre sont toutes open source et sont développées en collaboration.\nContrairement à Bitcoin, où la norme est définie par une implémentation de référence dans un logiciel (Bitcoin Core), dans Lightning, la norme est définie par une série de documents de normes appelés Basis of Lightning Technology (BOLT), trouvés dans le référentiel lightning-rfc.\nIl n\u0026rsquo;y a pas d\u0026rsquo;implémentation de référence du Lightning Network, mais il existe plusieurs implémentations concurrentes, compatibles BOLT et interopérables développées par différentes équipes et organisations. Les équipes qui développent des logiciels pour le Lightning Network contribuent également au développement et à l\u0026rsquo;évolution des normes BOLT.\nUne autre différence majeure entre le logiciel de nœud Lightning et le logiciel de nœud Bitcoin est que les nœuds Lightning n\u0026rsquo;ont pas besoin de fonctionner en parallèle avec des règles de consensus et peuvent avoir des fonctionnalités étendues au-delà de la ligne de base des BOLT. Par conséquent, différentes équipes peuvent poursuivre diverses fonctionnalités expérimentales qui, si elles réussissent et sont largement déployées, peuvent faire partie des BOLT plus tard.\nDans ce chapitre, vous apprendrez à configurer chacun des packages logiciels pour les implémentations de nœuds Lightning les plus courantes. Nous les avons présentés par ordre alphabétique pour souligner que nous ne préférons ou n\u0026rsquo;approuvons généralement pas l\u0026rsquo;un par rapport à l\u0026rsquo;autre. Chacun a ses forces et ses faiblesses, et le choix dépendra de divers facteurs. Puisqu\u0026rsquo;ils sont développés dans différents langages de programmation (par exemple, Go, C, etc.), votre choix peut également dépendre de votre niveau de familiarité et d\u0026rsquo;expertise avec un langage spécifique et un ensemble d\u0026rsquo;outils de développement.\n","description":"On lit le livre Mastering the Lightning Network (LN) en Direct ! Chapitre 4 - Les clients Lightning Network","id":6,"section":"blog","tags":["bitcoin","lightning network","mastering the lightning network","live"],"title":"4 - Mastering the Lightning Network - Créer un réseau de nœud Lightning Network","uri":"https://blocs.fr/blog/mastering-the-lightning-network-4/"},{"content":"Lecture du chapitre 5 de Mastering the Lightning Network Après avoir lu jusqu\u0026rsquo;ici, vous avez probablement configuré un portefeuille Lightning. Dans ce chapitre, nous allons aller plus loin et configurer un nœud Lightning complet. En plus d\u0026rsquo;en installer un, nous apprendrons à le faire fonctionner et à l\u0026rsquo;entretenir dans le temps.\nIl existe de nombreuses raisons pour lesquelles vous pourriez vouloir configurer votre propre nœud Lightning. Ils incluent:\nÊtre un participant actif à part entière du Lightning Network, et pas seulement un utilisateur final Pour gérer une boutique en ligne ou recevoir des revenus via les paiements Lightning Pour gagner des revenus grâce aux frais de routage Lightning ou en louant la liquidité du canal Pour développer de nouveaux services, applications ou plug-ins pour le Lightning Network Pour augmenter votre confidentialité financière tout en utilisant Lightning Pour utiliser certaines applications conçues sur Lightning, telles que les applications de messagerie instantanée alimentées par Lightning Pour la liberté financière, l\u0026rsquo;indépendance et la souveraineté Il y a des coûts associés à l\u0026rsquo;exécution d\u0026rsquo;un nœud LN. Vous avez besoin d\u0026rsquo;un ordinateur, d\u0026rsquo;une connexion Internet permanente, de beaucoup d\u0026rsquo;espace disque et de beaucoup de temps ! Les coûts d\u0026rsquo;exploitation comprendront les dépenses d\u0026rsquo;électricité.\nMais les compétences que vous apprendrez de cette expérience sont précieuses et peuvent également être appliquées à une variété d\u0026rsquo;autres tâches.\n","description":"On lit le livre Mastering the Lightning Network (LN) en Direct ! Chapitre 5 - Opérer un serveur Lightning Network","id":7,"section":"blog","tags":["bitcoin","lightning network","mastering the lightning network","live"],"title":"5 - Mastering the Lightning Network - Installer un serveur Bitcoin et LN","uri":"https://blocs.fr/blog/mastering-the-lightning-network-5/"},{"content":"Lecture des chapitres 6 et 7 de Mastering the Lightning Network Dans ce chapitre, nous allons plonger dans les canaux de paiement et voir comment ils sont construits. Nous commencerons par le nœud d\u0026rsquo;Alice ouvrant un canal vers le nœud de Bob, en nous appuyant sur les exemples présentés au début de ce livre.\nLes messages échangés par les nœuds d\u0026rsquo;Alice et de Bob sont définis dans \u0026ldquo;BOLT #2 : Peer Protocol for Channel Management\u0026rdquo;. Les transactions créées par les nœuds d\u0026rsquo;Alice et de Bob sont définies dans \u0026ldquo;BOLT #3 : Bitcoin Transaction and Script Formats\u0026rdquo;. Dans ce chapitre, nous nous concentrons sur les parties \u0026ldquo;Channel open and close\u0026rdquo; et \u0026ldquo;Channel state machine\u0026rdquo; de l\u0026rsquo;architecture du protocole Lightning, mises en évidence par un aperçu au centre (couche peer-to-peer) des canaux de paiement dans la suite de protocoles Lightning .\n","description":"On lit le livre Mastering the Lightning Network (LN) en Direct ! Chapitre 6 - Architecture Lightning Network; Chapitre 7 - Les canaux de paiement","id":8,"section":"blog","tags":["bitcoin","lightning network","mastering the lightning network","live"],"title":"6 - Mastering the Lightning Network - Comprendre la commitment transaction","uri":"https://blocs.fr/blog/mastering-the-lightning-network-6/"},{"content":"Lecture du Chapitre 8 de Mastering the Lightning Network Dans ce chapitre, nous verrons enfin comment les canaux de paiement peuvent être connectés pour former un réseau de canaux de paiement via un processus appelé routage. Plus précisément, nous nous intéresserons à la première partie de la couche de routage, le protocole \u0026ldquo;Atomic and trustless multihop contracts\u0026rdquo;. Ceci est mis en évidence par un aperçu dans la suite de protocoles, illustré dans Routage de paiement Atomic dans la suite de protocoles Lightning.\n","description":"On lit le livre Mastering the Lightning Network (LN) en Direct ! Chapitre 8 - Routage dans le canaux de paiment","id":9,"section":"blog","tags":["bitcoin","lightning network","mastering the lightning network","live"],"title":"7 - Mastering the Lightning Network - Routage, secret de paiement et HTLC sur LN","uri":"https://blocs.fr/blog/mastering-the-lightning-network-7/"},{"content":"Lecture des chapitre 10, 11 et 12 de Mastering the Lightning Network Routage en oignon Dans ce chapitre, nous décrirons le mécanisme de routage en oignon du Lightning Network. L\u0026rsquo;invention du routage en oignon précède le Lightning Network de 25 ans ! Le routage en oignon a été inventé par des chercheurs de la marine américaine en tant que protocole de sécurité des communications. Le routage en oignon est le plus célèbre utilisé par Tor, la superposition Internet routée en oignon qui permet aux chercheurs, aux militants, aux agents de renseignement et à tout le monde d\u0026rsquo;utiliser Internet de manière privée et anonyme.\nDans ce chapitre, nous nous intéressons à la partie \u0026ldquo;Source-based onion routing (SPHINX)\u0026rdquo; de l\u0026rsquo;architecture du protocole Lightning, mise en évidence par un aperçu au centre (couche de routage) du routage Onion dans la suite de protocoles Lightning.\nProtocole de Gossip Dans ce chapitre, nous décrirons le protocole de potins du Lightning Network et comment il est utilisé par les nœuds pour construire et maintenir un graphe de canal. Nous passerons également en revue le mécanisme d\u0026rsquo;amorçage DNS utilisé pour trouver des pairs avec lesquels \u0026ldquo;commérer\u0026rdquo;.\nLa section \u0026ldquo;Frais de routage et relais Gossip\u0026rdquo; est mise en évidence par un aperçu couvrant la couche de routage et la couche peer-to-peer du protocole Gossip dans la suite de protocoles Lightning.\nPath Finding La livraison des paiements sur le Lightning Network dépend de la recherche d\u0026rsquo;un chemin de l\u0026rsquo;expéditeur au destinataire, un processus appelé recherche de chemin. Étant donné que le routage est effectué par l\u0026rsquo;expéditeur, l\u0026rsquo;expéditeur doit trouver un chemin approprié pour atteindre la destination. Ce chemin est ensuite encodé dans un oignon.\nDans ce chapitre, nous examinerons le problème de la recherche de chemin, comprendrons comment l\u0026rsquo;incertitude sur les équilibres des canaux complique ce problème et examinerons comment une implémentation typique de la recherche de chemin tente de le résoudre.\n","description":"On lit le livre Mastering the Lightning Network (LN) en Direct ! Chapitre 10 - Routage en oignon; Chapitre 11 - Protocole de Gossip; Chapitre 12 - Path Finding","id":10,"section":"blog","tags":["bitcoin","lightning network","mastering the lightning network","live"],"title":"9 - Mastering the Lightning Network - Onion routing, Gossip protocol et Path Finding","uri":"https://blocs.fr/blog/mastering-the-lightning-network-9/"},{"content":"La cryptomonnaie, la technologie Blockchain, ça fait beaucoup parler. Plus rarement pour l\u0026rsquo;innovation technique que la technologie apporte que pour son actualité sur les marchés. Les deux aspects ne sont pas inintéressants, d\u0026rsquo;ailleurs l\u0026rsquo;intérêt financier pour la technologie permet aussi de susciter un vif intérêt pour la faire évoluer. Et la technologie Blockchain évolue vite.\nC\u0026rsquo;est aujourd\u0026rsquo;hui une manne financière qui s\u0026rsquo;auto-finance. Avec toujours une demande d\u0026rsquo;innovation croissante allant de la DeFi (Decentralized Finance) aux NFTs (jetons non fongibles) qui ont maintenant le vent en poupe.\nVous avez un intérêt pour la technique, alors c\u0026rsquo;est le moment le plus opportun pour se lancer. Nous allons voir dans cet article tous les éléments importants pour s\u0026rsquo;initier au développement Blockchain. C\u0026rsquo;est parti ?\nAfin de faciliter la lecture je vais utiliser le terme \u0026ldquo;Blockchain\u0026rdquo; pour évoquer toute l\u0026rsquo;innovation autour de la technologie Blockchain.\nL\u0026rsquo;intérêt de l\u0026rsquo;innovation Blockchain Il y a encore quelques années, et ça semble être un poncif de plus en plus suranné,\nnous parlions souvent de \u0026ldquo;Blockchain Bullshit\u0026rdquo;. Cette formulation peu racoleuse et à charge\némergeait beaucoup avec l\u0026rsquo;arrivée de Ethereum dans l\u0026rsquo;écosystème en 2015.\nEthereum, l\u0026rsquo;enfant spirituel de Bitcoin et des projets connexes comme Colored Coins (parmi les premiers jets du NFT).\nAujourd\u0026rsquo;hui, les galimatias des gardiens du temple sont moins audibles. De manière concrète\nla Blockchain propose des approches nouvelles voire diruptives si on s\u0026rsquo;intéresse\nde près à la DeFi par exemple. Selon moi, la disruption était déjà là avec Bitcoin,\nj\u0026rsquo;aime parler d\u0026rsquo;une boîte de Pandore savamment ouverte.\nLa disruption, concept fort usité pour évoquer le néant parfois mais aussi pour soulever\nl\u0026rsquo;impact fondamental d\u0026rsquo;une innovation. Si la Blockchain a bien disrupté un domaine, on pourrait\nl\u0026rsquo;appeler \u0026ldquo;des contrats et de la confiance\u0026rdquo;.\nVaste monde qui comporte une multitude de cases comme les interactions entre agents économiques,\nou la juridiction et la loi. Concrètement, l\u0026rsquo;innovation Blockchain apporte un moyen de créer\nla confiance autour de contrats.\nCela semble bien peu ludique, ça manque de fun ! Mais rassurez-vous, on touche à des couches\nsi profondes que les applications sont encore à découvrir ou à approfondir : allant de la création\nd\u0026rsquo;un circuit économique entre le monde réel et un jeux vidéo à la collection de cartes,\nà titre d\u0026rsquo;idées.\nDu Web à la Blockchain, le frontend Entrons maintenant dans ce qui nous intéresse, la technique.\nEt pour commencer, rien de mieux qu\u0026rsquo;introduire la partie la plus évidente et la plus accessible.\nLorsqu\u0026rsquo;on parle de développement Blockchain vous allez - quasiment - toujours retrouver une\npartie visible de l\u0026rsquo;iceberg : le frontend.\nPar exemple il va s\u0026rsquo;agir de faire une interface pour un portefeuille, ou une page pour suivre\ndes transactions. Ou encore mieux, une page pour réaliser des contrats !\nToutes ces couches sont largement développées avec les langages Web (JavaScript / TypeScript / Dart, HTML, CSS).\nMême pour faire des applications de bureau ou mobile : Electron pour l\u0026rsquo;application bureau, React Native\nou Flutter pour de l\u0026rsquo;application mobile.\nWeb3JS, un premier pas Web3JS, doux nom\u0026hellip; Vous connaissez le Web 2.0, c\u0026rsquo;est celui que vous utilisez tous les jours,\nc\u0026rsquo;est le Web dynamique avec des sites comme Amazon ou Backmarket pour faire des achats. La Blockchain\napporte le Web 3.0, bon c\u0026rsquo;est juste du babélisme technico-commercial. L\u0026rsquo;Internet de la valeur,\nça a plus de caractère.\nJe vous parle de Web3JS, c\u0026rsquo;est une solution pour JavaScript (et adaptée à d\u0026rsquo;autres langages).\nCette dernière a l\u0026rsquo;intérêt d\u0026rsquo;être largement documentée et usitée.\nSi vous ne savez pas par quoi commencer, Web3JS est votre go to.\nWeb3JS est labélisée comme la solution pour les APIs Ethereum. Dans les faits cette librairie\npeut aller bien au-delà de Ethereum. C\u0026rsquo;est ce qui va vous permettre de créer le lien entre\nce qui se passe dans une blockchain et l\u0026rsquo;affichage sur un site ou une application.\nVoilà à quoi ressemble du code avec Web3JS :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 // Connecte Web3 avec un provider par défaut. // Un provider est un logiciel qui permet de faire l\u0026#39;interfaçage entre le Web3 et // le réseau Blockchain (mainnet, testnet, autre...). // En général le \u0026#34;givenProvider\u0026#34; sera Metamask. Metamask est une extension installée // sur le navigateur de l\u0026#39;utilisateur qui joue le rôle à la fois de portefeuille // et de gestionnaire de providers let web3 = new Web3(Web3.givenProvider); // Exemple de création et d\u0026#39;envoi d\u0026#39;une transaction web3.eth.sendTransaction({ from: \u0026#39;0xDD135B5D7AC09183C3A975e989a57D65f6c8B54B\u0026#39;, // Adresse vers laquelle envoyer des jetons value: Web3.utils.toWei(1), // Transforme la valeur 1 en unité Wei }) .once(\u0026#39;sending\u0026#39;, function(payload){ /* La transaction est en cours d\u0026#39;envoi */ }) .once(\u0026#39;sent\u0026#39;, function(payload){ /* La transaction a été envoyée au provider */ }) .once(\u0026#39;transactionHash\u0026#39;, function(hash){ /* Le provider a reçu la transaction et a renvoyé son identifiant */ }) .once(\u0026#39;receipt\u0026#39;, function(receipt){ /* Reçu de la transaction, cela signifie qu\u0026#39;elle est considérée par le réseau en but de la publier dans la blockchain */ }) .on(\u0026#39;confirmation\u0026#39;, function(confNumber, receipt, latestBlockHash){ /** La transaction est maintenant inscrite dans la blockchain. La confirmation est déclenchée pour chaque nouveau bloc publié après le bloc comportant cette transaction **/ }) .on(\u0026#39;error\u0026#39;, function(error){ /* Oops, y\u0026#39;a eu une erreur */ }) .then(function(receipt){ /* La transaction est maintenant inscrite dans la blockchain */ }); Binance Smart Chain (BSC) est un réseau lancé par la fameuse\nplateforme Binance. Ce dernier étant repris de Ethereum peut fonctionner avec Web3JS.\nWeb3 de manière générale est une librairie qui permet de faire le dialogue entre une blockchain\net une application, qu\u0026rsquo;elle soit un client ou un serveur.\nPar où commencer ? Si vous n\u0026rsquo;avez aucune notion du développement Web, alors commencez par là ! Vouloir directement\nfaire du développement Blockchain en frontend va créer une confusion qui vous ralentira.\nUne excellente ressource française sont les cours gratuits de OpenClassroom.\nPour s\u0026rsquo;initier concrètement lancez-vous sur un projet faisant usage de la Blockchain, par exemple\nune page qui permet de faire des transactions. Pour faire cela vous n\u0026rsquo;aurez pas besoin de faire\nautre chose que du développement frontend. Web3JS et Metamask seront vos outils principaux.\nL\u0026rsquo;arrière scène de la Blockchain, le backend Initialement, l\u0026rsquo;innovation Blockchain arrivée avec Bitcoin est un projet majoritairement\nbackend. Le gros du travail sur Bitcoin est son protocole pair-à-pair. La petite partie\nfrontend est le portefeuille Bitcoin Core développé en C++ avec Qt (Bitcoin Qt était\nson nom encore en 2013).\nEthereum est aussi un projet où la composante dominante est le protocole et sa machine\nvirtuelle (EVM). Ethereum a cependant apporté un nouveau pan qui peinait à émerger avec Bitcoin pour des raisons techniques.\nLa partie backend dans le développement Blockchain touche à plusieurs couches fondamentalement\ndifférentes.\nChoix 1 : Le développement de protocole On va s\u0026rsquo;astreindre de reprendre la définition même de \u0026ldquo;protocole\u0026rdquo;. C\u0026rsquo;est plus intéressant\nde se borner à ce qu\u0026rsquo;est un protocole autour de la technologie Blockchain.\nDévelopper un protocole revient à développer sa Blockchain. C\u0026rsquo;est l\u0026rsquo;acte de définir des règles\nde comportements dans un réseau décentralisé. C\u0026rsquo;est la partie la moins évidente, pour cause\nfaire un protocole demande une ingénierie poussée. C\u0026rsquo;est un long travail de conception.\nC\u0026rsquo;est un domaine d\u0026rsquo;expertise qui a relativement peu de demande, développer son\npropre protocole demande un investissement conséquent pour un gain modéré. D\u0026rsquo;autres approches\nsont souvent plus abordables. Elles sont évoquées plus bas.\nPar où commencer ? Pour s\u0026rsquo;initier à cette partie il est primordial d\u0026rsquo;avoir une bonne expérience sur un langage\ncompilé comme Rust, C++ ou Golang, pas de chapelle ce n\u0026rsquo;est qu\u0026rsquo;une liste non exhaustive.\nIl est possible de faire un protocole Blockchain avec un langage interprété comme JavaScript\net le soft NodeJS. Lisk l\u0026rsquo;ont fait par exemple.\nVous pouvez aussi reprendre la source d\u0026rsquo;un protocole déjà développé, changer\nquelques règles dans le code source, et le publier. On parle à ce moment de fork.\nC\u0026rsquo;est ce que BCH ont fait avec Bitcoin Core, ou Dogecoin avec Litecoin qui lui est un fork de Bitcoin Core,\nou Binance Smart Chain avec Ethereum.\nChoix 2 : Le développement de contrats intelligents Là on commence à entrer dans ce qui est fortement demandé dans le marché des compétences\nen développement Blockchain.\nJe vous évoquais plus tôt que là où la technologie Blockchain est disruptive, c\u0026rsquo;est autour\ndes contrats et de la confiance entre agents économiques. Eh bien\u0026hellip; L\u0026rsquo;innovation Blockchain\nva avec les contrats intelligents.\nSimplement dit, le contrat intelligent est un programme dont l\u0026rsquo;exécution est connue et\nautonome. Elle est Connue car c\u0026rsquo;est un programme dont le code source est accessible à quiconque.\nImaginez deux acteurs dans une opération immobilière. Le cessionnaire Tom, et l\u0026rsquo;acquéreuse\nAdèle. Les deux associent leur échange à un contrat intelligent. À la signature\npar les deux acteurs, le contrat exécute une passation de la propriété à Adèle et un envoi\ndes fonds à Tom est automatiquement exécuté. Sans ces deux signatures, rien ne se passe. On pourrait étendre avec\nune histoire de délai avant mise à terme, etc. Vous avez saisi l\u0026rsquo;idée.\nLes possibilités d\u0026rsquo;un contrat intelligent sont indénombrables puisque c\u0026rsquo;est un programme que\nvous développez. En général, n\u0026rsquo;importe quel secteur impliquant plusieurs acteurs qui ont\nbesoin de confiance pourraient trouver un intérêt dans le contrat intelligent.\nCôté développement il existe tout un univers mais une solution se dégage largement aujourd\u0026rsquo;hui.\nC\u0026rsquo;est Ethereum avec son langage Solidity.\nSolidity est un langage qui permet simplement de développer des contrats intelligents. C\u0026rsquo;est un\nlangage typé qui reprend des principes de la programmation orientée objet comme Java.\nPar où commencer ? Vous pouvez dès maintenant vous amuser à faire des contrats intelligent avec l\u0026rsquo;éditeur Web Remix.\nCela peut être déroutant au premier abord, en s\u0026rsquo;appuyant avec la documentation Remix\net Solidity vous pouvez commencer à découvrir.\nUn éminent livre complet a été écrit par l\u0026rsquo;inénarrable Andreas M. Antonopoulos avec Gavin Wood : Mastering Ethereum.\nCe livre est en prix libre mais sa version française n\u0026rsquo;est pas trouvable sur le Web. C\u0026rsquo;est un contenu parfait\npour cerner les tenants et les aboutissants d\u0026rsquo;Ethereum, néanmoins il manque en pragmatisme pour gagner\nen compétences rapidement.\nChoix 3 : Le développement de services connectés à un réseau Blockchain C\u0026rsquo;est l\u0026rsquo;un des moins évoqués pourtant la demande pour ce genre de compétences est aussi\nimportante que le développement de contrats. Ce genre de développement est plus proche\ndes solutions classiques comme faire une API pour un service.\nDans un réseau Blockchain beaucoup d\u0026rsquo;informations circulent, elles sont toutes publiques\npar définition, si on se tient à une Blockchain publique.\nDes services peuvent avoir un besoin d\u0026rsquo;exploiter ces informations dans leur infrastructure.\nPar exemple, le cas typique sont les places de marché dans la cryptomonnaie. Ces dernières\ngèrent des flux de transactions sur différentes cryptomonnaies. Pour chaque, le serveur\nde ces places de marché ont un service qui consulte les informations sur les différentes\nblockchains.\nCette partie est souvent associée au développement de contrats intelligents. Dans la grande\nmajorité des cas, après le développement d\u0026rsquo;un contrat intelligent, on souhaite tracer\ndans un serveur certaines informations pour avoir un suivi. Par exemple, il est possible\nde déclencher une action en temps réel lorsqu\u0026rsquo;une transaction est exécutée dans le réseau\nBlockchain avec WebSocket.\nJe vous évoquais que Web3JS possède des librairies aussi pour d\u0026rsquo;autres langages dans le but lire\ndes informations sur Ethereum.\nJe vous montre un exemple de code commenté sur Golang avec go-web3 :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 package main import ( \u0026#34;fmt\u0026#34; \u0026#34;github.com/umbracle/go-web3/wallet\u0026#34; web3 \u0026#34;github.com/umbracle/go-web3\u0026#34; \u0026#34;github.com/umbracle/go-web3/jsonrpc\u0026#34; \u0026#34;math/big\u0026#34; ) func main() { // Connexion à un réseau blockchain local // Ici localhost:7545 est un provider JSONRPC client, err := jsonrpc.NewClient(\u0026#34;http://localhost:7545\u0026#34;) if err != nil { panic(err) } // On génère un nouveau portefeuille, la clé est une clé privée key, _ := wallet.GenerateKey() to := web3.Address{0x1} transferVal := web3.Ether(1) // Envoi de 1 Ether vers l\u0026#39;adresse 0x1 txn := \u0026amp;web3.Transaction{ To: \u0026amp;to, Value: transferVal, Gas: 100000, } // Signature de la transaction signer := wallet.NewEIP155Signer(chainID) txn, _ = signer.SignTx(txn, key) // Envoi de la transaction data := txn.MarshalRLP() hash, _ := c.Eth().SendRawTransaction(data) } Par où commencer ? Le plus simple est de lancer votre projet et exploiter Ethereum qui a un nombre conséquent\nde librairies. Web3 est sûrement disponible pour votre langage favoris.\nCommencez par lancer votre Blockchain Ethereum locale avec Geth ou Ganache. Avec cette dernière,\nvous serez capable de faire une API qui récupère les informations.\nPar exemple, vous pouvez faire un service qui se connecte à votre Blockchain locale puis qui réagit\nà chaque transaction via le WebSocket.\nConclusion Vous aurez compris, j\u0026rsquo;axe l\u0026rsquo;article vers le plus pratique et le plus probant dans la quête\nde travailler dans ce domaine et créer de la valeur.\nEn plus de développer des compétences pour réaliser vos projets Blockchain, un tel bagage\nouvre des portes à des métiers divers. Cela peut passer par de l\u0026rsquo;encadrement de projets pour\ndes entreprises nécessitant d\u0026rsquo;une expertise à de l\u0026rsquo;audit de projets Blockchain.\nOn pourrait faire le tour de l\u0026rsquo;écosystème, évoquer plus en profondeur les projets tout autant intéressants\ncomme Bitcoin, Cardano ou Algorand. Le bestiaire est incommensurable et c\u0026rsquo;est preuve\nde bonne santé, la vie grouille.\nEthereum est donc aujourd\u0026rsquo;hui l\u0026rsquo;écosystème le plus complet avec un historique fort. On compte\nparmi les grands tournants : les ICO avec ERC20, CryptoKitties et les NFT, ou encore la DeFi avec Uniswap.\n","description":"La cryptomonnaie, la technologie Blockchain, ça fait beaucoup parler. Plus rarement pour l'innovation technique que la technologie apporte que pour son actualité sur les marchés. Les deux aspects ne sont pas inintéressants, d'ailleurs l'intérêt financier pour la technologie permet aussi de susciter un vif intérêt pour la faire évoluer. Et la technologie Blockchain évolue vite.","id":11,"section":"blog","tags":["bitcoin","lightning network","mastering the lightning network","live"],"title":"Le développement Blockchain, par où commencer ?","uri":"https://blocs.fr/blog/le-developpement-blockchain-par-ou-commencer/"},{"content":"Vous avez un nœud Bitcoin et Lightning Network, vous participez à la décentralisation du réseau, bravo ! Cependant il réside un point noir, en particulier si votre noeud est localisé chez vous ou votre bureau\u0026hellip; En connaissant votre adresse IP, publiée par le nœud, il est possible de vous localiser. C\u0026rsquo;est sensible dans le cas où vous y mettez pour l\u0026rsquo;équivalent de milliers d\u0026rsquo;euros en bitcoins, une personne mal intentionnée pourrait vous pirater voire vous cambrioler. Heureusement, grâce à Tor vous allez pouvoir cacher tout cela en un temps record\nCe guide est basé sur une installation avec bitcoind et lnd sur un Debian 9 Stretch Lite, sur n\u0026rsquo;importe quelle version Debian 9 ce guide sera fonctionnel.\nQu\u0026rsquo;est ce que Tor ? Pourquoi Tor ? Vous connaissez peut-être Tor indirectement en citant le « Deep Web », mais c\u0026rsquo;est bien plus que cela. Tor est un logiciel libre qui permet de brouiller les communications Internet (TCP) en construisant un circuit de routage IP. En d\u0026rsquo;autres termes un émetteur communique avec un récepteur en passant par un chemin incompréhensible, la communication devient intraçable d\u0026rsquo;un point de vue extérieur.\nAutant vous dire que Tor est la solution propice à anonymiser les communications de votre nœud Bitcoin.\nTor tord le chemin.\nInstaller et activer Tor On va travailler avec le terminale de commandes, si vous avez la version Lite, vous n\u0026rsquo;avez que cela sous la main en principe.\nInstaller Tor se fait avec la commande apt update \u0026amp;\u0026amp; apt install tor, on met à jour apt pour être sûr de télécharger la dernière version des dépendances.\nUne fois installé activez le service en tapant systemctl enable tor et systemctl start tor.\nConfigurer Tor On a installé Tor, nous allons le configurer en prévision des usages avec lnd et bitcoind.\nLa configuration de Tor se trouve dans le chemin /etc/tor/torrc où torrc est un fichier de configuration. Connectez-vous en root pour le modifier avec su root, puis tapez vim /etc/tor/torrc ou nano /etc/tor/torrc si vous préférez nano pour éditer un fichier. Je vous montre les configurations à décommenter (en retirant le # au début de chaque ligne concernée).\n1 2 3 4 5 6 7 ControlPort 9051 CookieAuthentication 1 HiddenServiceDir /var/lib/tor/bitcoin/ # Emplacement du dossier de votre routage HiddenServicePort 8333 127.0.0.1:8333 # Routage bitcoin (8333 est le port mainnet de Bitcoin) HiddenServicePort 8332 [::1]:8332 # Routage bitcoin ipv6 Modifications faites, tapez systemctl restart tor pour redémarrer Tor afin qu\u0026rsquo;il prenne en compte vos modifications.\nEt enfin pour voir si Tor est fonctionnel, observez le avec la commande systemctl status tor@default, vous devriez avec quelque chose comme suit :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 root@raspberry:~ $ systemctl status tor ● tor@default.service - Anonymizing overlay network for TCP Loaded: loaded (/lib/systemd/system/tor@default.service; static; vendor preset: enabled) Active: active (running) since Wed 2020-01-01 10:09:09 UTC; 7h ago Process: 1805 ExecReload=/bin/kill -HUP ${MAINPID} (code=exited, status=0/SUCCESS) Process: 2259 ExecStartPre=/usr/bin/tor --defaults-torrc /usr/share/tor/tor-service-defaults-torrc -f /etc/tor/torrc --RunAsDaemon 0 --verify-config (code=exited, status=0/SUCCESS Process: 2257 ExecStartPre=/usr/bin/install -Z -m 02755 -o debian-tor -g debian-tor -d /var/run/tor (code=exited, status=0/SUCCESS) Main PID: 2262 (tor) CGroup: /system.slice/system-tor.slice/tor@default.service └─2262 /usr/bin/tor --defaults-torrc /usr/share/tor/tor-service-defaults-torrc -f /etc/tor/torrc --RunAsDaemon 0 Jan 01 10:09:05 raspberrypi tor[2259]: Jan 01 10:09:05.113 [notice] Read configuration file /usr/share/tor/tor-service-defaults-torrc. Jan 01 10:09:05 raspberrypi tor[2259]: Jan 01 10:09:05.113 [notice] Read configuration file /etc/tor/torrc. Jan 01 10:09:05 raspberrypi tor[2259]: Configuration was valid Jan 01 10:09:05 raspberrypi tor[2262]: Jan 01 10:09:05.979 [notice] Tor 0.2.9.16 (git-9ef571339967c1e5) running on Linux with Libevent 2.0.21-stable, OpenSSL 1.1.0j and Zlib 1.2.8. Jan 01 10:09:05 raspberrypi tor[2262]: Jan 01 10:09:05.979 [notice] Tor can\u0026#39;t help you if you use it wrong! Learn how to be safe at https://www.torproject.org/download/download#warn Jan 01 10:09:05 raspberrypi tor[2262]: Jan 01 10:09:05.979 [notice] Read configuration file /usr/share/tor/tor-service-defaults-torrc. Jan 01 10:09:05 raspberrypi tor[2262]: Jan 01 10:09:05.979 [notice] Read configuration file /etc/tor/torrc. Jan 01 10:09:05 raspberrypi tor[2262]: Jan 01 10:09:05.995 [notice] Opening Socks listener on 127.0.0.1:9050 Jan 01 10:09:05 raspberrypi tor[2262]: Jan 01 10:09:05.995 [notice] Opening Control listener on 127.0.0.1:9051 Jan 01 10:09:09 raspberrypi systemd[1]: Started Anonymizing overlay network for TCP. Si votre service Tor n\u0026rsquo;est pas actif, vous trouverez des informations en tapant journalctl -u tor@default.\nConnecter votre Bitcoin à Tor Cette configuration fonctionne avec bitcoind en version 0.19.0.1, dans mon nœud j\u0026rsquo;utilise l\u0026rsquo;utilisateur bitcoin pour gérer ce service, je vous déconseille d\u0026rsquo;utiliser root.\nAvant de commencer vous allez devoir chercher votre nom de domaine Tor en tapant ce qui suit :\n1 2 bitcoin@raspberry:~ $ cat /var/lib/tor/bitcoin/hostname blocsiq5epwbye47.onion blocsiq5epwbye47.onion est mon nom de domaine (hostname).\nSi vous voulez savoir comment avoir un domaine qui commence par un mot ou pseudo comme ici \u0026ldquo;blocs\u0026rdquo;, laissez un commentaire plus bas.\nPour configurer Bitcoin vous allez modifier .bitcoin/bitcoin.conf avec les informations suivantes :\n# Vos configurations # ... # Ajoutez ou modifiez ce qui suit proxy=127.0.0.1:9050 # Proxy sur le service Tor externalip=blocsiq5epwbye47.onion # à remplacer par votre hostname, c\u0026#39;est l\u0026#39;adresse affichée aux autres nœuds du réseau Redémarrez Bitcoin en tapant bitcoin-cli stop \u0026amp;\u0026amp; bitcoind.\nFélicitations votre nœud est désormais sur le réseau Tor. Il ne vous reste plus qu\u0026rsquo;à faire de même sur LND afin d\u0026rsquo;anonymiser nos échanges sur le réseau Lightning Network.\nConnecter votre Lightning à Tor La configuration de lnd est un peu différente de Bitcoin. Sans plus attendre ouvrez .lnd/lnd.conf et ajoutez ces différentes configurations :\n# Vos configurations # ... # Ajoutez ou modifiez ce qui suit listen=localhost # Important pour éviter d\u0026#39;ouvrir votre IP externalip=blocsiq5epwbye47.onion # Votre hostname Tor nat=false # A désactiver pour éviter d\u0026#39;associer votre adresse IP à votre nœud [tor] tor.active=1 tor.socks=9050 tor.privatekeypath=/var/lib/tor/bitcoin/private_key Redémarrez votre lnd en tapant lncli stop et lnd pour lancer le service.\nIl se peut que vous ayez une erreur de droit relative à Tor. Dans la partie suivante on voit comment la solutionner.\nGérer les droits avec Tor Vous devez donner accès à différents fichiers de Tor à l\u0026rsquo;utilisateur qui gère votre lnd, dans mon cas mon utilisateur est bitcoin.\nTapez la commande chmod -R 0750 /var/lib/tor. Cela va donner accès en lecture au groupe debian-tor sur le dossier /var/lib/tor.\nMaintenant ajoutez l\u0026rsquo;utilisateur bitcoin au groupe debian-tor en tapant usermod -a -G debian-tor bitcoin en étant connecté sur su root.\nTor est bien conçu, il ne nous permet pas d\u0026rsquo;appliquer les droits qu\u0026rsquo;on veut à ses dossiers pour limiter de trop les ouvrir. Tapez journalctl -u tor@default, si les dernières lignes parlent d\u0026rsquo;une erreur, cela signifie que votre Tor n\u0026rsquo;est plus en route. C\u0026rsquo;est un général dû à une mauvaise configuration (mauvais droits sur les dossiers relatifs à Tor, mauvaises configuration dans torrc, etc.)\nA partir d\u0026rsquo;ici votre nœud est connecté au réseau en passant par Tor ! Il est toujours intéressant d\u0026rsquo;observer si tout est bien cadré par Tor afin de ne pas avoir de fuite d\u0026rsquo;IP. Tapez la commande du terminal ci-dessous :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 root@raspberry:~ $ netstat -tulpn (Not all processes could be identified, non-owned process info will not be shown, you would have to be root to see it all.) Active Internet connections (only servers) Proto Recv-Q Send-Q Local Address Foreign Address State PID/Program name tcp 0 0 127.0.0.1:9735 0.0.0.0:* LISTEN 2043/lnd tcp 0 0 127.0.0.1:28332 0.0.0.0:* LISTEN 653/bitcoind tcp 0 0 127.0.0.1:8332 0.0.0.0:* LISTEN 653/bitcoind tcp 0 0 127.0.0.1:8333 0.0.0.0:* LISTEN 653/bitcoind tcp 0 0 127.0.0.1:28333 0.0.0.0:* LISTEN 653/bitcoind tcp 0 0 127.0.0.1:8080 0.0.0.0:* LISTEN 2043/lnd tcp 0 0 0.0.0.0:22 0.0.0.0:* LISTEN - tcp 0 0 127.0.0.1:10009 0.0.0.0:* LISTEN 2043/lnd tcp 0 0 127.0.0.1:9050 0.0.0.0:* LISTEN - tcp 0 0 127.0.0.1:9051 0.0.0.0:* LISTEN - tcp6 0 0 ::1:8332 :::* LISTEN 653/bitcoind tcp6 0 0 :::80 :::* LISTEN - tcp6 0 0 :::22 :::* LISTEN - udp 0 0 0.0.0.0:48138 0.0.0.0:* - udp 0 0 0.0.0.0:68 0.0.0.0:* - udp 0 0 0.0.0.0:5353 0.0.0.0:* - udp6 0 0 :::45175 :::* - udp6 0 0 :::5353 :::* - Nous, ce qui nous intéresse ce sont bitcoind et lnd. On va passer tous les ports d\u0026rsquo;écoute en revue et comprendre si oui ou non ils sont \u0026ldquo;torrifiés\u0026rdquo; :\nlnd 9735 : C\u0026rsquo;est le port de LND, \u0026ldquo;torrifiée\u0026rdquo; avec le clé privée de votre Tor ; bitcoind 28332 : C\u0026rsquo;est le port ZMQ de Bitcoin, il sert à la configuration et n\u0026rsquo;est pas distribué ; bitcoind 8333 : C\u0026rsquo;est le port de bitcoind qui est caché via Tor (HiddenServicePort dans /etc/tor/torrc) ; bitcoind 8332 : C\u0026rsquo;est le port JSON-RPC de bitcoind, nul besoin de le cacher avec Tor si vous ne le distribuez pas ; bitcoind 8332 IPV6 : C\u0026rsquo;est le port ipv6 de bitcoind qui est caché via Tor (HiddenServicePort dans /etc/tor/torrc) ; Enfin pour voir si lnd a bien considéré vos modifications, tapez lncli getinfo, vous obtenez un JSON comme suit :\n{ \u0026#34;version\u0026#34;: \u0026#34;0.8.0-beta commit=v0.8.1-beta\u0026#34;, \u0026#34;identity_pubkey\u0026#34;: \u0026#34;03a2c34daf010b3501daf704b5a321e82e1631421b7ffa18dd49014967eda82dc9\u0026#34;, \u0026#34;alias\u0026#34;: \u0026#34;blocs.fr\u0026#34;, \u0026#34;color\u0026#34;: \u0026#34;#00aaff\u0026#34;, \u0026#34;num_pending_channels\u0026#34;: 0, \u0026#34;num_active_channels\u0026#34;: 6, \u0026#34;num_inactive_channels\u0026#34;: 0, \u0026#34;num_peers\u0026#34;: 6, \u0026#34;block_height\u0026#34;: 610817, \u0026#34;block_hash\u0026#34;: \u0026#34;0000000000000000000ff1cf20075afd0df2a52288edd20a7d1cd8a51ca3e32a\u0026#34;, \u0026#34;best_header_timestamp\u0026#34;: 1577900732, \u0026#34;synced_to_chain\u0026#34;: true, \u0026#34;synced_to_graph\u0026#34;: true, \u0026#34;testnet\u0026#34;: false, \u0026#34;chains\u0026#34;: [ { \u0026#34;chain\u0026#34;: \u0026#34;bitcoin\u0026#34;, \u0026#34;network\u0026#34;: \u0026#34;mainnet\u0026#34; } ], \u0026#34;uris\u0026#34;: [ \u0026#34;03a2c34daf010b3501daf704b5a321e82e1631421b7ffa18dd49014967eda82dc9@blocsiq5epwbye47.onion:9735\u0026#34; ] } Intéressez vous à la partie d\u0026rsquo;en bas, \u0026quot;uris\u0026quot;, qui est une liste des adresses distribuées dans le réseau. Ici je n\u0026rsquo;ai qu\u0026rsquo;une adresse qui est un .onion, voir ce qui suit le \u0026ldquo;@\u0026rdquo;. La partie de gauche est la clé publique de mon lnd.\n.onion est un nom de domaine exclusif au routage en oignon comme le fait Tor. Comme vous pouvez l\u0026rsquo;imaginer, c\u0026rsquo;est réellement une référence à la plante. Cela vient du routage qui recouvre le message de plusieurs couches, comme un oignon où le coeur est enrobé de plusieurs couches. MrBidouille.\nVérifications faites, vous êtes cachés, bravo !\nMerci à Clint pour ses infos sur Tor et JohnOnChain pour m\u0026rsquo;avoir aidé à la configuration de lnd avec Tor.\n","description":"Vous avez un nœud Bitcoin et Lightning Network, vous participez à la décentralisation du réseau, bravo ! Cependant il réside un point noir, en particulier si votre noeud est localisé chez vous ou votre bureau... En connaissant votre adresse IP, publiée par le noeud, il est possible de vous localiser. On remédie à cela avec Tor.","id":12,"section":"blog","tags":["bitcoin","debian","bitcoin-cli","tor"],"title":"Servir Bitcoin et Lightning Network en étant anonyme avec Tor","uri":"https://blocs.fr/blog/bitcoin-et-lightning-anonyme-avec-tor/"},{"content":"Matériels requis Avant tout il va vous falloir du matériel puisqu\u0026rsquo;un nœud est un serveur qui fourni un service. Ne vous inquiétez pas vous n\u0026rsquo;aurez pas besoin d\u0026rsquo;un serveur coûteux, bruyant et consommateur. Vous aurez besoin d\u0026rsquo;un nano-ordinateur, c\u0026rsquo;est petit, c\u0026rsquo;est silencieux et la consommation est basse, voilà la liste :\nRaspberry Pi 3 : ce matériel est peu coûteux et a les capacités optimales pour avoir un nœud LN efficace. Veillez à acquérir un pack contenant le Raspberry Pi, l\u0026rsquo;alimentation secteur et une carte SSD. Ces éléments sont compris dans le pack officiel ; Un disque dur SSD de 500go ou plus : vous devrez télécharger la blockchain de Bitcoin qui fait plus de 200 giga octects. Je recommande un disque dur SSD (électronique) à préférer au disque dur mécanique qui a une moins bonne tolérance à la panne. J\u0026rsquo;ai personnellement un disque dur mécanique ; Un écran port HDMI : ce sera nécessaire pour faire les premières configurations ; Un clavier USB : ce sera également nécessaire pour faire les premières configurations ; Un câble RJ45 : ce sera pour connecter votre Raspberry Pi à Internet. Il est possible d\u0026rsquo;avoir une connexion wifi en y connectant une antenne ou un dongle. Cependant je déconseille cette approche pour des raisons de sécurité et également pour éviter les contraintes d\u0026rsquo;installation de drivers pas toujours disponibles sur les distributions Linux ; Installer Raspian Stretch Lite Cette étape est optionnelle mais recommandée.\nAvant d\u0026rsquo;entamer la configuration de votre Raspberry installez un nouveau système d\u0026rsquo;exploitation plus léger que celui installé par défaut : c\u0026rsquo;est Raspian Stretch Lite.\nStretch Lite est un système d\u0026rsquo;exploitation dans le but d\u0026rsquo;optimiser la consommation de ressources sur notre système.\nInstallez Raspian Stretch Lite sur la carte SD fournie avec le Raspberry Pi. Il vous faudra la formater. Avec Windows le logiciel Etcher est d\u0026rsquo;une grande aide. Sur Mac et distributions Linux préférez la ligne de commande.\nConfigurer le Raspberry Pi Ici je vais considérer que vous êtes sur Raspian Stretch Lite, mais pas d\u0026rsquo;inquiétude vous pouvez tout suivre avec le système d\u0026rsquo;origine, veillez à ouvrir le terminal car nous allons travailler en ligne de commande, rien de mieux pour se familiariser avec l\u0026rsquo;environnement Linux.\nLes accès par défaut sont les suivants\n1 2 raspberry login: pi Password: raspberry Si vous n\u0026rsquo;êtes pas habitué au terminal Debian, en tapant votre mot de passe rien ne s\u0026rsquo;affiche, c\u0026rsquo;est tout à faire normal, ce que vous tapez est quand même pris en compte. C\u0026rsquo;est une protection au même titre que les étoiles qu\u0026rsquo;on voit sur les formulaires web.\nActiver et configurer SSH Actuellement vous travaillez avec un écran et un clavier branchés sur votre petit Rapsberry\u0026hellip; Et c\u0026rsquo;est peut-être pas pratique. J\u0026rsquo;ai une bonne nouvelle, on va pouvoir faire en sorte de gérer votre système sans avoir besoin d\u0026rsquo;y accéder physiquement. Vous allez le contrôler à distance grâce au protocole SSH !\nSSH signifie Secure Shell, c\u0026rsquo;est un protocole de réseau ingénieux qui permet l\u0026rsquo;exécution de commandes à distance en bénéficiant de canaux cryptés. Il est possible d\u0026rsquo;utiliser SSH au sein d\u0026rsquo;un réseau local mais aussi en passant par Internet par exemple. Sachez que par défaut la configuration du SSH dans Raspian permet l\u0026rsquo;authentification par login et mot de passe.\nPar défaut la connexion SSH est désactivée pour des raisons de sécurité, alors activez le en tapant ce qui suit\n1 pi@raspberrypi:~ $ sudo raspi-config Un menu graphique peu charmant s\u0026rsquo;ouvre, sélectionnez Interfacing Options (Configure connections to peripherals) puis ssh (Enable or disable ssh server) ensuite sélectionnez Yes, OK et enfin Finish.\nRevenez sur le terminal et redémarrez le service ssh\n1 pi@raspberrypi:~ $ sudo systemctl restart ssh Votre SSH est maintenant activé.\nÀ la bonheur, vous pouvez dès maintenant vous connecter à votre Raspberry à distance, depuis un autre ordinateur. D\u0026rsquo;abord récupérez l\u0026rsquo;adresse IP de votre Raspberry vous en aurez besoin, utilisez la commande ifconfig pour l\u0026rsquo;afficher. Voilà un extrait de mon ifconfig\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 pi@raspberrypi:~ $ ifconfig eth0: flags=4163\u0026lt;UP,BROADCAST,RUNNING,MULTICAST\u0026gt;; mtu 1500 inet 192.168.1.4 netmask 255.255.255.0 broadcast 192.168.1.255 inet6 fe80::10e0:8a76:4fe4:c3c2 prefixlen 64 scopeid 0x20 ether b8:27:eb:6a:3a:d9 txqueuelen 1000 (Ethernet) RX packets 169483183 bytes 168117311599 (156.5 GiB) RX errors 2 dropped 45841 overruns 0 frame 0 TX packets 132373249 bytes 17426498366 (16.2 GiB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 lo: flags=73\u0026lt;UP,LOOPBACK,RUNNING\u0026gt;; mtu 65536 inet 127.0.0.1 netmask 255.0.0.0 inet6 ::1 prefixlen 128 scopeid 0x10 loop txqueuelen 1000 (Local Loopback) RX packets 39066126 bytes 154986068081 (144.3 GiB) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 39066126 bytes 154986068081 (144.3 GiB) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 wlan0: flags=4099\u0026lt;UP,BROADCAST,MULTICAST\u0026gt;; mtu 1500 ether b8:27:eb:3f:6f:8c txqueuelen 1000 (Ethernet) RX packets 0 bytes 0 (0.0 B) RX errors 0 dropped 0 overruns 0 frame 0 TX packets 0 bytes 0 (0.0 B) TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0 Voyez en surligné mon adresse IP est 192.168.1.42 — puisque c\u0026rsquo;est la réponse à tous les mystères de l\u0026rsquo;univers. Vous la trouverez normalement sur le connecteur eth0 et en ipv4 qui est le format que j\u0026rsquo;ai sélectionné et que je vous recommande pour éviter des configurations futures.\nAvec votre ordinateur favori, que ce soit sur MacOS, Windows, Ubuntu, Trisquel ou TempleOS vous pouvez utiliser un outil qui permet de vous connecter à votre Raspberry avec SSH. Le plus simple avec MacOS ou une distribution Linux. Si vous n\u0026rsquo;avez pas ssh de disponible en commande, veuillez installer OpenSSH. Voilà comment procéder avec votre terminal sachant que mon IP est 192.168.1.42\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 monpc@oumonmac:~ $ ssh-keygen -t rsa -b 4096 \u0026gt;; Generating public/private rsa key pair. \u0026gt;; Enter a file in which to save the key (/home/you/.ssh/id_rsa): [Press enter] Laissez par défaut \u0026gt;; Enter passphrase (empty for no passphrase): [Type a passphrase] Votre mot de passe \u0026gt;; Enter same passphrase again: [Type passphrase again] Confirmez votre mot de passe monpc@oumonmac:~ $ ssh pi@192.168.1.42 pi@192.168.1.42\u0026#39;s password: Entrez votre mot de passe Linux raspberrypi 4.14.71-v7+ #1145 SMP Fri Sep 21 15:38:35 BST 2018 armv7l The programs included with the Debian GNU/Linux system are free software; the exact distribution terms for each program are described in the individual files in /usr/share/doc/* /copyright. Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent permitted by applicable law. Last login: Tue Mar 19 02:04:32 2019 from 192.168.1.44 pi@raspberrypi:~ \u0026amp; Cette étape permet d\u0026rsquo;avoir une clé RSA pour initialiser une communication chiffrée avec votre Raspberry et de connecter ensuite.\nIl existe des solutions avec interface comme PuTTY pour Windows. Vous devrez entrer l\u0026rsquo;adresse IP de votre Raspberry, le login pi et le mot de passe raspberry.\nCréer un utilisateur Afin de protéger votre installation du mieux que possible je recommande de créer un utilisateur prévu à cet usage. Nous l\u0026rsquo;appellerons \u0026ldquo;bitcoin\u0026rdquo;.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 pi@raspberrypi:~ $ adduser bitcoin Adding user \u0026#39;bitcoin\u0026#39; ... Adding new group \u0026#39;bitcoin\u0026#39; (1001) ... Adding new user \u0026#39;bitcoin\u0026#39; (1001) with group \u0026#39;bitcoin\u0026#39; ... Creating home directory \u0026#39;/home/bitcoin\u0026#39; ... Copying files from \u0026#39;/etc/skel\u0026#39; ... Enter new UNIX password: Mettez un mot de passe fort Retype new UNIX password: Confirmez votre mot de passe passwd: password updated successfully Changing the user information for bitcoin Enter the new value, or press ENTER for the default \u0026amp;nbsp;\u0026amp;nbsp;Full Name []: Vous pouvez laisser tous ces champs vides \u0026amp;nbsp;\u0026amp;nbsp;Room Number []: \u0026amp;nbsp;\u0026amp;nbsp;Work Phone []: \u0026amp;nbsp;\u0026amp;nbsp;Home Phone []: \u0026amp;nbsp;\u0026amp;nbsp;Other []: Is the information correct? [Y/n] Y Vous pouvez désormais vous connecter directement à l\u0026rsquo;utilisateur \u0026ldquo;bitcoin\u0026rdquo; avec SSH en tapant par exemple ssh bitcoin@192.168.1.42\nPréparer le disque dur Vous aurez besoin de télécharger l\u0026rsquo;entièreté de la blockchain Bitcoin qui fait 250go à l\u0026rsquo;heure où j\u0026rsquo;écris ces lignes. Cela signifie que la petite carte SD du Raspberry ne peut pas mémoriser tout ça. On va faire en sorte que toutes les informations relatives à la blockchain résident dans le disque externe.\nUne fois que vous avez branché votre disque dur sur votre Raspberry, vous devriez le retrouver en tapant la commande df -h. Cette commande va vous lister quelque chose qui ressemble à ce qui suit :\n1 2 3 4 5 6 7 8 9 pi@raspberrypi:~ $ df -h /dev/root 15G 4.2G 9.8G 30% devtmpfs 460M 0 460M 0% /dev tmpfs 464M 0 464M 0% /dev/shm tmpfs 464M 6.2M 458M 2% /run tmpfs 5.0M 4.0K 5.0M 1% /run/lock tmpfs 464M 0 464M 0% /sys/fs/cgroup /dev/mmcblk0p1 44M 22M 22M 51% /boot Highlight\u0026gt;/dev/sda 458G 249G 186G 58% /home/bitcoin/.bitcoi\u0026lt;/ Highlight \u0026gt;tmpfs 93M 0 93M 0% /run/user/1001 Vous devrez trouver un élément ayant la même capacité de stockage que votre disque. Mon disque fait 500go et on le trouve sur le chemin /dev/sda. En général on le devine dans la mesure où c\u0026rsquo;est le seul disque ayant cette capacité. Notez ce nom quelque part, et retenez cette commande df qui est pratique pour gérer ses disques.\nFormater (optionnel) Votre disque dur doit maintenant être vierge (à moins que vous y avez enregistré la blockchain, dans ce cas ignorez cette étape). Tapez la commande fdisk [votre disque] où [votre disque] devient le nom de votre disque, dans mon exemple c\u0026rsquo;est fdisk /dev/sda.\nMonter le disque Enfin il faut monter le disque sur le dossier de travail de Bitcoin, on va lui préparer sa maison et son nid douillet. Monter un disque signifie que nous allons associer un répertoire à un disque, octroyant une capacité de mémoire certaine à un répertoire. Et pour ce faire connectez vous à l\u0026rsquo;utilisateur que nous avions précédemment créé su bitcoin, puis tapez mkdir .bitcoin .lnd.\nIl ne vous reste plus qu\u0026rsquo;à taper mount \u0026lt;votre disque\u0026gt; .bitcoin où votre disque est le chemin trouvé avec df.\nmkdir signifie make directory, c\u0026rsquo;est pour créer un dossier et .bitcoin est le nom du dossier. Par défaut nous travaillerons avec ce dossier pour la blockchain et les portefeuilles. Le \u0026ldquo;.\u0026rdquo; est un moyen de cacher le dossier, cependant en aucun cas cela constitue sécurité suffisante.\nInstaller bitcoind et bitcoin-cli Pour cette partie restez connecté à l\u0026rsquo;utilisateur bitcoin en tapant su bitcoin.\nbitcoind est le système central de Bitcoin, le \u0026ldquo;d\u0026rdquo; à la fin signifie \u0026ldquo;daemon\u0026rdquo; qui désigne un service exécuté et maintenu par la machine. bitcoin-cli est une interface de commande qui permet d’interagir avec le service Bitcoin. Les deux s\u0026rsquo;installent ensemble, ce qui est super !\nD\u0026rsquo;abord vous devrez chercher les fichiers d\u0026rsquo;installation de Bitcoin, je vous le donne ici : bitcoin-0.19.0.1-arm-linux-gnueabihf.tar.gz. Gardez ce lien vous en aurez besoin.\nJe tiens à souligner que vous pouvez le chercher par vous même en vous rendant ici et en sélectionnant \u0026ldquo;ARM Linux 64bits\u0026rdquo;. Je vous conseille de le faire vous même car les versions sont mises à jour, ci-dessus vous avez la version 0.19.0.1 de Bitcoin Core.\nSuivez les commandes ci-dessous pour installer bitcoind\n1 2 3 4 bitcoin@raspberrypi:~ $ wget https://bitcoin.org/bin/bitcoin-core-0.19.0.1/bitcoin-0.19.0.1-arm-linux-gnueabihf.tar.gz bitcoin@raspberrypi:~ $ tar -vxf bitcoin-0.19.0.1-arm-linux-gnueabihf.tar.gz bitcoin@raspberrypi:~ $ sudo install -m 0755 -o bitcoin -g bitcoin -t /usr/local/bin bitcoin-0.19.0.1/bin/* bitcoin@raspberrypi:~ $ rm -rf bitcoin-0.19.0.1 Notez qu\u0026rsquo;on donne les droits uniquement à l\u0026rsquo;utilisateur bitcoin. Désormais tapez les commandes bitcoind -version et bitcoin-cli -version. Si tout est bien installé vous verrez les versions s\u0026rsquo;afficher.\nDémarrer bitcoind bitcoind est installé, il reste plus qu\u0026rsquo;à le démarrer pour qu\u0026rsquo;il puisse télécharger frénétiquement la blockchain en se connectant à des nœuds du réseau; automatiquement.\nD\u0026rsquo;abord je vous recommande de vérifier si vous avez bien connecté votre disque dur, suivez l\u0026rsquo;exemple ci-dessous\n1 2 3 4 5 6 bitcoin@raspberrypi:~ $ lsblk NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT\u0026#34; sda 8:0 0 465.8G 0 disk /home/bitcoin/.bitcoin mmcblk0 179:0 0 14.9G 0 disk |-mmcblk0p1 179:1 0 43.8M 0 part /boot -mmcblk0p2 179:2 0 14.8G 0 part / On peut voir en surligné que /home/bitcoin/.bitcoin est bien connecté au disque ayant 465.8Go d\u0026rsquo;espace. Si vous n\u0026rsquo;avez pas cela, revenez sur la partie Monter le disque.\nMaintenant on peut écrire le fichier de configuration Bitcoin. Tapez nano .bitcoin/bitcoin.conf, cela va vous ouvrir un éditeur directement dans le terminal, ce qui vous permet d\u0026rsquo;écrire les configurations. Voilà des configurations que je recommande :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 server=1 daemon=1 txindex=1 rpcuser=\u0026lt;Mettez un nom d\u0026#39;utilisateur\u0026gt; rpcpassword=\u0026lt;Mettez un mot de passe\u0026gt; onlynet=ipv4 zmqpubrawblock=tcp://127.0.0.1:28332 zmqpubrawtx=tcp://127.0.0.1:28333 dbcache=50 maxorphantx=10 maxmempool=50 maxconnections=40 maxuploadtarget=1000 Pour sauvegarder tapez CTRL + O et CTRL + X pour quitter.\nEt enfin tapez sudo bitcoind qui aura pour effet de lancer le service Bitcoin qui va rapidement commencer à télécharger la blockchain. Pour rappel cette dernière fait près de 200Go donc vous pouvez prendre une pause ici.\nPour observer l\u0026rsquo;avancement tapez la commande tail -f .bitcoin/debug.log vous verrez des entrées qui ressemblent à ce qui suit\n2019-04-15T22:54:29Z UpdateTip: new best=00000000000000000024f0048c611086130b387e6634d8e2617c261a0c44b6dd height=571800 version=0x20c00000 log2_work=90.545983 tx=402724776 date=\u0026#39;2019-04-15T22:54:19Z\u0026#39; progress=1.000000 cache=14.5MiB(103309txo) warning=\u0026#39;35 of last 100 blocks have unexpected version\u0026#39; L\u0026rsquo;information intéressante ici est particulièrement progress=1.000000. Cette valeur est en réalité la progression de la synchronisation de la blockchain, 1 signifie 100%, si vous avez par exemple progress=0.014 alors vous en êtes à 1.4%. Pour quitter le tail tapez CTRL + C.\nInstaller LND et LnCLI Pour cette partie restez connecté à l\u0026rsquo;utilisateur bitcoin en tapant su bitcoin.\nlnd est le service qui va transformer le RaspberryPi en un nœud Lightning Network. Il va se connecter automatiquement a l\u0026rsquo;interface de commande du service bitcoind. Tout comme bitcoind LND embarque l\u0026rsquo;interface de commande lncli.\nLa procédure pour installer LND ressemble à l\u0026rsquo;installation de Bitcoin. La première chose à faire est de télécharger le service en vous rendant sur ce lien github.com/lightningnetwork/lnd/releases. Ici vous trouverez toutes les versions officielles de LND. Récupérez maintenant le lien de la dernière version \u0026ldquo;linux-armv7\u0026rdquo;, voici celle que j\u0026rsquo;ai à l\u0026rsquo;heure où j\u0026rsquo;écris cet article lnd-linux-armv7-v0.8.2-beta.tar.gz.\nNotez bien que mon exemple s\u0026rsquo;applique pour la version que j\u0026rsquo;ai envoyée : v0.8.2beta.\n1 2 3 4 bitcoin@raspberrypi:~ $ wget https://github.com/lightningnetwork/lnd/releases/download/v0.8.2-beta/lnd-linux-armv7-v0.8.2-beta.tar.gz bitcoin@raspberrypi:~ $ tar -vxf lnd-linux-armv7-v0.8.2-beta.tar.gz bitcoin@raspberrypi:~ $ sudo install -m 0755 -o bitcoin -g bitcoin -t /user/local/bin lnd-linux-armv7-v0.8.2-beta/* bitcoin@raspberrypi:~ $ rm -rf lnd-linux-armv7-v0.8.2-beta Désormais tapez la commande lnd -version. Si tout est bien installé vous verrez la version s\u0026rsquo;afficher.\nAvant de démarrer LND créez son fichier de configuration en tapant nano .lnd/lnd.conf. Trouvez ci-dessous une configuration que je propose, vous pouvez évidemment mettre ce que vous voulez pour certaines options.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 [Application Options] debuglevel=info maxpendingchannels=3 alias=\u0026lt;Votre Alias / pseudonyme / nom / ...\u0026gt; color=\u0026lt;Une couleur en hexadécimal, par exemple #F00 pour Rouge vif\u0026gt; nat=true # Si vous vous connectez depuis une box Internet [Bitcoin] bitcoin.active=1 bitcoin.mainnet=1 bitcoin.node=bitcoind [bitcoind] bitcoind.rpcuser=\u0026lt;Ce que vous aviez mis dans .bitcoin/bitcoin.conf rpcuser=\u0026gt; bitcoind.rpcpass=\u0026lt;Ce que vous aviez mis dans .bitcoin/bitcoin.conf rpcpassword=\u0026gt; bitcoind.zmqpubrawblock=tcp://127.0.0.1:28332 bitcoind.zmqpubrawtx=tcp://127.0.0.1:28333 [autopilot] autopilot.active=1 autopilot.maxchannels=3 autopilot.allocation=0.5 \u0026ldquo;autopilot\u0026rdquo; vous intrigue peut-être. C\u0026rsquo;est un algorithme qui connecte automatiquement des nœuds présents dans le réseau décentralisé, typiquement des nœuds Bitcoin et Lightning Network. Autopilot intègre le modèle Barabási–Albert dans l\u0026rsquo;idée de produire un réseau pair-à-pair en théorie homogène. Personnellement je l\u0026rsquo;active mais en aucun cas cela est nécessaire.\nDémarrer LND Tapez simplement lnd et voilà ! Votre nœud LN est en route. Il va d\u0026rsquo;abord synchroniser sa blockchain locale avec bitcoind. En attendant vous allez créer votre portefeuille. En effet LND ne va pas exploiter le portefeuille de bitcoind mais gérer le sien, cela veut dire que vous aurez un portefeuille relatif à votre nœud LN.\nLaissez lnd tourner, ne quittez pas en faisant CTRL + C, je vous suggère d\u0026rsquo;ouvrir un nouveau terminal et vous connecter à nouveau sur bitcoin. Quitter votre terminal ne stoppera pas LND.\nUne fois de retour suivez cette procédure ci-dessous :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 bitcoin@raspberrypi:~ $ lncli create Input wallet password : \u0026lt;Mettez un mot de passe fort et écrivez le sur une feuille pour ne pas le perdre\u0026gt; Confirm wallet password: \u0026lt;Confirmez votre mot de passe\u0026gt; Do you have an existing cipher seed mnemonic you want to user? (Enter y/n): n Your cipher seed can optionally be encrypted. Input your passphrase if you wish to encrypt it (or press enter to proceed without a cipher seed passphrase): \u0026lt;Mettez un mot de passe ou pressez directement ENTREE\u0026gt; Generating fresh cipher seed... !!!YOU MUST WRITE DOWN THIS SEED TO BE ABLE TO RESTORE THE WALLET!!! \u0026gt; Ici lncli affiche votre seed, notez la consciencieusement sur une feuille, dans l\u0026#39;ordre. Cette seed (graine) est la clé de votre portefeuille; elle vous assurera de ne jamais perdre vos fonds !!!YOU MUST WRITE DOWN THIS SEED TO BE ABLE TO RESTORE THE WALLET!!! lnd successfully initialized! TADAM ! Vous avez maintenant un tout nouveau portefeuille et LND sera capable de fonctionner\u0026hellip; Après avoir tapé ces commandes\n1 2 bitcoin@raspberrypi:~ $ lncli unlock bitcoin@raspberrypi:~ $ lncli newaddress p2wkh \u0026ldquo;lncli unlock\u0026rdquo; est important pour que LND puisse fonctionner car il aura besoin d\u0026rsquo;un accès à votre portefeuille, ce dernier est chiffré par défaut et il faut le déchiffrer en le déverrouillant. Le mot de passe à insérer est le premier mot de passe que vous avez mis lors de la création du portefeuille avec lncli create\nLND est maintenant prêt à fonctionner. Pour observer ce qu\u0026rsquo;il se passe tapez la commande tail -f .lnd/debug.log.\nPour vérifier que votre nœud est bien recensé sur les internets allez chercher votre clé publique en tapant lncli getinfo comme dans le terminal ci-dessous\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 bitcoin@raspberrypi:~ $ lncli getinfo { \u0026#34;dentity_pubkey\u0026#34;: \u0026#34;03a2c34daf010b3501daf704b5a321e82e1631421b7ffa18dd49014967eda82dc\u0026#34;, \u0026#34;alias\u0026#34;: \u0026#34;Blocs\u0026#34;, \u0026#34;num_pending_channels\u0026#34;: 0, \u0026#34;num_active_channels\u0026#34;: 3, \u0026#34;num_peers\u0026#34;: 4, \u0026#34;block_height\u0026#34;: 572660, \u0026#34;block_hash\u0026#34;: \u0026#34;0000000000000000001d7bf15a13ffb76a8c1256e5ab778ffcc918d97944e45a\u0026#34;, \u0026#34;synced_to_chain\u0026#34;: true, \u0026#34;testnet\u0026#34;: false, \u0026#34;chains\u0026#34;: [ \u0026#34;bitcoin\u0026#34; ], \u0026#34;uris\u0026#34;: [ \u0026#34;03a2c34daf010b3501daf704b5a321e82e1631421b7ffa18dd49014967eda82dc9@109.18.104.32:9735\u0026#34; ], \u0026#34;best_header_timestamp\u0026#34;: \u0026#34;1555878831\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;0.5.2-beta commit=v0.5.2-beta\u0026#34;, \u0026#34;num_inactive_channels\u0026#34;: 0\u0026#39; } Ma clé publique est 03a2c34daf010b3501daf704b5a321e82e1631421b7ffa18dd49014967eda82dc9, elle sert d\u0026rsquo;identifiant au nœud. Maintenant si votre nœud est bien configuré et en route, vous pouvez le trouver sur ce site : 1ml.com en tapant dans la recherche la clé publique de votre nœud.\nVous êtes maintenant propriétaire d\u0026rsquo;un nœud Bitcoin et d\u0026rsquo;un nœud Lightning Network. Cela signifie que vous avez la capacité d\u0026rsquo;utiliser n\u0026rsquo;importe quel portefeuille supportant LN en passant par votre propre serveur. Félicitations et bienvenue dans la communauté de l\u0026rsquo;a\u0026hellip; Bitcoin et LN. Dans un article suivant on va voir comment avoir une interface graphique pour gérer son nœud sans passer par les lignes de commande comme nous l\u0026rsquo;avons fait tout au long de l\u0026rsquo;installation. Pour l\u0026rsquo;heure vous pouvez découvrir les possibilités de LN en tapant lncli --help et les possibilités de Bitcoin en tapant bitcoin-cli --help.\n","description":"Envoyer des microtransactions bitcoin n'était pas possible jusqu'à l'arrivée de la technologie Lightning Network. C'est un système qui permet de faire des transactions quasi-instantannées et avec peu de frais.","id":13,"section":"blog","tags":["bitcoin","lightning network","debian","bitcoin-cli"],"title":"Installer un nœud Lightning Network","uri":"https://blocs.fr/blog/installer-un-noeud-lightning-network/"},{"content":"Notez que tout ce qui va suivre devra se faire avec l\u0026rsquo;utilisateur administrateur. Pour s\u0026rsquo;y connecter tapez une fois su root puis tapez son mot de passe.\nFixer l\u0026rsquo;adresse IP locale du nœud Ce qui suit s\u0026rsquo;applique qu\u0026rsquo;aux connexions réseau filaire et non Wifi\nVotre nœud possède une adresse IP locale afin d\u0026rsquo;être accéssible dans votre réseau, c\u0026rsquo;est d\u0026rsquo;ailleurs grâce à cette dernière que vous pouvez y accéder avec SSH. Cependant il est fort probable que son adressage se fasse dynamiquement par défaut, par conséquent l\u0026rsquo;adresse de votre Raspberry pourrait changer. Il est préférable d\u0026rsquo;éviter cette inconvenance alors on va forcer une adresse IP statique.\nOuvrez le fichiers de configuration DHCP en tapant nano /etc/dhcpcd.conf, ajoutez à la fin du fichier ces informations :\ninterface eth0 static ip_address=192.168.1.42/24 # C\u0026#39;est l\u0026#39;IP qu\u0026#39;aura la machine static routers=\u0026lt;Votre passerelle\u0026gt; # Passerelle, explications plus bas static domain_name_servers=\u0026lt;Votre passerelle\u0026gt; 8.8.8.8 Ici vous allez devoir faire un travail d\u0026rsquo;enquête pour connaître votre réseau et savoir quelle est la passerelle. Suivez le terminal ci-dessous :\npi@raspberrypi:~ $ ip route default via 192.168.1.1 dev eth0 src 192.168.1.42 metric 202 192.168.1.0/24 dev eth0 proto kernel scope link src 192.168.1.42 metric 202 Trouvé ! 192.168.1.1 est la passerelle de mon réseau, c\u0026rsquo;est ce que vous devez mettre dans la configuration DHCP plus haut. Notez également le /24 qui est un masque de réseau et que vous devez aussi utiliser dans votre configuration DHCP.\nSans entrer dans les détails le masque /24 (ou /n) est ce qui va déterminer la plage d\u0026rsquo;adresses disponibles. Avec une adresse type 192.168.1.0/24 vous avez 254 adresses disponibles allant de 192.168.1.1 à 192.168.1.254. C\u0026rsquo;est important à considérer car cela signifie que vous ne pouvez pas mettre n\u0026rsquo;importe quelle adresse, il est important de respecter le format. Pour être sûr de ne pas vous tromper, conservez les 3 premiers chiffres de l\u0026rsquo;IP et choisissez le dernier : x.x.x.y où \u0026ldquo;x\u0026rdquo; sont les valeurs de base de l\u0026rsquo;IP (192.168.1 selon l\u0026rsquo;exemple) et \u0026ldquo;y\u0026rdquo; est une valeur choisie arbitrairement et comprise entre 1 et 254.\nVotre nœud a maintenant une IP statique.\nSécuriser les accès distants SSH SSH est un protocole de réseau qui vous permet de vous connecter à distance sur une machine grâce à un canal chiffré. Cela signifie que la machine distante exécute un service qui reçoit les connexions SSH, ce service s\u0026rsquo;appelle sshd. SSH en lui même est plutôt bien sécurisé, cependant il est possible de couvrir un peu mieux les accès.\nSans plus attendre trouvez le fichier en tapant sudo nano /etc/ssh/sshd_config.\nVoyons quelles modifications vous pouvez apporter afin de mieux sécuriser les accès SSH. Vous noterez que la plupart des lignes sont commentées grâce au caractère \u0026ldquo;#\u0026rdquo;, cela signifie juste que les lignes comportant ce symbole au début sont neutralisées, le travail consiste essentiellement à dé-neutraliser certaines lignes.\nPort 2310 : Mettez le port que vous souhaitez, le changer est toujours une couche de sécurité peu coûteuse. Ici j\u0026rsquo;ai mis 2310.\nLoginGraceTime 2m : Limite le temps de connexion inactif à 2 minutes. Vous pouvez l\u0026rsquo;augmenter mais le plus bas le mieux.\nStrictModes yes : Assure les accès aux fichiers en fonction de l\u0026rsquo;utilisateur connecté.\nPermitRootLogin no : Mettez PermitRootLogin à no, cette option bloquera les connexions SSH à l\u0026rsquo;utilisateur administrateur du Raspberry. Si vous avez suivi l\u0026rsquo;installation que je recommande vous avez un utilisateur nommé bitcoin qui a pour rôle d\u0026rsquo;administrer les services bitcoind et lnd. C\u0026rsquo;est sur ce dernier que vous vous connecterez via SSH et non sur l\u0026rsquo;utilisateur root.\nMaxAuthTries 3 : Nombre d\u0026rsquo;essais pour se connecter via SSH limité à 3. Cela bloque les attaques par brute force automatisé.\nMaxSessions 1 : Si vous êtes la seule personne à gérer votre machine, et que vous ne comptez pas créer plusieurs connexions SSH simultanées, alors limitez le nombre de sessions à 1. Il faut garder ce nombre le plus petit possible en fonction de vos besoins.\nPubkeyAuthentication yes : Cette option vous servira plus tard. Elle n\u0026rsquo;ajoute pas de sécurité supplémentaire, c\u0026rsquo;est une option qui vous facilitera l\u0026rsquo;accès à votre machine.\nTapez CTRL + O et CTRL + X; et enfin redémarrez SSHd afin d\u0026rsquo;appliquer ces modifications en tapant sudo service sshd restart.\nEnregistrer votre clé pour les connexions futures Dans la configuration précédente vous aviez activé l\u0026rsquo;option PubkeyAuthentication, cette option va vous permettre d\u0026rsquo;enregistrer la clé publique de votre machine sur le Raspberry. Cela vous évitera de taper sans cesse le mot de passe de connexion.\nCela se passe en un commande. Suivez le terminal ci-dessous. Notez que cela doit se faire depuis votre machine locale (votre mac, votre pc, etc). Si vous êtes sur Windows vous n\u0026rsquo;aurez pas cette commande.\nmonpc@oumonmac:~ $ ssh-copy-id -i ~/.ssh/id_rsa.pub bitcoin@192.168.1.42 Ensuite vous devrez taper le mot de passe de l\u0026rsquo;utilisateur \u0026ldquo;bitcoin\u0026rdquo;. Notez que l\u0026rsquo;IP 192.168.1.42 (comment trouver l\u0026rsquo;IP de mon nœud ?) doit être l\u0026rsquo;IP de votre nœud distant. Cette action aura pour effet de recenser la clé publique de votre machine dans le Raspberry Pi, il vous reconnaîtra pour les connexions futures et ne vous demandera plus de mot de passe.\nSi vous êtes sur Windows en utilisant PuTTy, vous pouvez générer et trouver votre clé publique avec PuTTyGen. Copiez cette clé qui commence par \u0026ldquo;ssh-rsa\u0026rdquo; si vous l\u0026rsquo;avez créé avec le chiffrement RSA. Cliquez sur \u0026ldquo;Save private key\u0026rdquo; et enregistrez le fichier sur votre machine. Revenez sur PuTTy, sur le panneau de gauche trouvez \u0026ldquo;Connection / SSH / Auth\u0026rdquo; puis dans la section \u0026ldquo;Private key file for authentication\u0026rdquo; chargez le fichier de votre clé privée, c\u0026rsquo;est un fichier .ppk. Connectez vous à votre Raspberry en utilisant PuTTy. Une fois connecté tapez sudo nano .ssh/authorized_keys et collez la clé publique que vous aviez copié, puis sauvegardez le fichier. C\u0026rsquo;est terminé désormais votre Raspberry connaît votre clé publique et autorisera les connexions futures depuis votre machine Windows.\nAjouter une couche supplémentaire à l\u0026rsquo;authentification SSH Pour l\u0026rsquo;instant il est toujours possible de forcer l\u0026rsquo;accès à votre nœud avec une attaque par dictionnaire, qui consiste à tester des millions de mot de passe jusqu\u0026rsquo;à trouver un accès. Il existe un service nommé fail2ban qui va permettre de protéger en limitant les tentatives de connexion.\nPour l\u0026rsquo;installer tapez apt-get update \u0026amp;\u0026amp; apt-get install -y fail2ban. Ensuite vous allez devoir configurer une chose si vous avez modifié le port SSH comme je l\u0026rsquo;ai montré juste au dessus. Cherchez le fichier de configuration de fail2ban nano /etc/fail2ban/jail.d/defaults-debian.conf. Voyez la section [sshd] mettez ce qui suit (si vous n\u0026rsquo;avez rien dans le fichier, ajoutez également ce qui suit) :\n[sshd] enabled = true port = 2310 # Notez que c\u0026#39;est le port que j\u0026#39;ai mis plus haut dans sshd_config Sauvegardez en tapant CTRL + O et CTRL + X pour fermer et enfin tapez systemctl restart fail2ban.\nfail2ban est un service polyvalent qui sécurise nombreuse authentifications, dont le service sshd et nous l\u0026rsquo;utilisons pour ça.\nActiver le redémarrage automatique des services Cette partie est cruciale. Si votre Raspberry est redémarré à cause d\u0026rsquo;une coupure de courant par exemple, il redémarrera\u0026hellip; Mais il ne relancera pas bitcoind ni lnd. Ce qui aurait pour effet d\u0026rsquo;éteindre le service et vous obliger à intervenir pour qu\u0026rsquo;il persévère.\nD\u0026rsquo;abord il va falloir faire en sorte que le disque soit toujours monté sur le dossier .bitcoin car c\u0026rsquo;est ce dernier qui recense la blockchain et bitcoind en a besoin. Le montage de disque ne se fait jamais automatiquement. Alors voilà comment configurer cela :\n1 2 3 4 5 6 7 8 9 10 11 12 13 pi@raspberry:~ $ df -h Filesystem Size Used Avail Use% Mounted on /dev/root 15G 5.6G 8.4G 40% / devtmpfs 460M 0 460M 0% /dev tmpfs 464M 0 464M 0% /dev/shm tmpfs 464M 12M 452M 3% /run tmpfs 5.0M 4.0K 5.0M 1% /run/lock tmpfs 464M 0 464M 0% /sys/fs/cgroup /dev/mmcblk0p1 44M 22M 22M 51% /boot /dev/sda 458G 253G 182G 59% /home/bitcoin/.bitcoin tmpfs 93M 0 93M 0% /run/user/1001 pi@raspberry:~ $ echo \u0026#39;/dev/sda /home/bitcoin/.bitcoin ext4 defaults,noatime 0 0\u0026#39; \u0026gt;\u0026gt; /etc/fstab Soyez vigilant ici. J\u0026rsquo;ai surligné mon montage actuel qui est /dev/sda monté sur /home/bitcoin/.bitcoin, vous devez mettre ce chemin dans le echo en dessous. Notez également l\u0026rsquo;annotation ext4 qui est le système de fichier que j\u0026rsquo;ai choisi lorsque j\u0026rsquo;avais formaté le disque. Si vous avez un doute suivez le terminal ci-dessous\n1 2 pi@raspberry:~ $ file -sL /dev/sda /dev/sda: Linux rev 1.0 ext4 filesystem data, UUID=a2a0ec66-f768-4cf0-9442-6c2878ab60e1, volume name BLOCK-STORAGE (needs journal recovery) (extents) (64bit) (large files) (huge files) Où /dev/sda est mon disque à monter. On voit en surligné ext4 qui est le système de fichier.\nbitcoind Le redémarrage automatique d\u0026rsquo;un service sur Linux se fait toujours de la même manière, il faut écrire le service. Et pour ce faire tapez nano /etc/systemd/system/bitcoind.service et entrez la configuration suivante :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 [Unit] Description=Bitcoin daemon After=network.target [Service] ExecStartPre=/bin/sh -c \u0026#39;sleep 30\u0026#39; ExecStart=/usr/local/bin/bitcoind -daemon -conf=/home/bitcoin/.bitcoin/bitcoin.conf -pid=/home/bitcoin/.bitcoin/bitcoind.pid # Mettez le chemin vers votre dossier .bitcoin PIDFile=/home/bitcoin/.bitcoin/bitcoind.pid # Mettez le chemin vers votre dossier .bitcoin User=bitcoin # Votre utilisateur qui gère le service Group=bitcoin # Votre groupe qui gère le service Type=forking KillMode=process Restart=always TimeoutSec=120 RestartSec=30 [Install] WantedBy=multi-user.target CTRL + O et CTRL + X pour enregistrer et quitter puis tapez systemctl enable bitcoind. La machine est lancée, le service bitcoind démarrera au lancement du Raspberry.\nlnd Encore une fois, il faut créer un service pour le service de lightning network, tapez nano /etc/systemd/system/lnd.service et voilà la configuration que je recommande :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 [Unit] Description=LND Wants=bitcoind.service After=bticoind.service # Il démarre après bitcoind [Service] ExecStart=/usr/local/bin/lnd User=bitcoin # Votre utilisateur qui gère le service Group=bitcoin # Votre utilisateur qui gère le service Type=simple KillMode=process LimitNOFILE=128000 TimeoutSec=300 Restart=always RestartSec=120 [Install] WantedBy=multi-user.target Et enfin pour l\u0026rsquo;activer systemctl enable lnd.\nFélicitations, votre Raspberry est autonome, il relancera les services en cas de redémarrage inopiné, sans votre aide, tout seul comme un grand.\nDans un article futur on va voir comment on peut administrer son nœud avec une interface graphique !\n","description":"Dans l'article précédent j'ai écrit au sujet de l'installation d'un nœud Bitcoin Lightning Network avec un Raspberry Pi. Ce dernier est sommaire et va à l'essentiel. Dans cet article il va s'agir d'optimiser la configuration du Raspberry Pi afin d'améliorer sa sécurité et rendre l'administration moins laborieuse.","id":14,"section":"blog","tags":["bitcoin","lightning network","debian","bitcoin-cli"],"title":"Configurer son nœud Bitcoin Lightning Network","uri":"https://blocs.fr/blog/configurer-un-noeud-lightning-network/"}]